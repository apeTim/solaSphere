{"version":3,"sources":["components/Navbar.tsx","utils/displayName.ts","components/GameBox.tsx","components/ActiveGames.tsx","components/UserGames.tsx","components/Profile.tsx","ScrollToTop.tsx","components/MyProfile.tsx","components/Chat.tsx","components/LeftSide.tsx","components/RecentGames.tsx","components/RightSide.tsx","components/FullUserInfo.tsx","App.tsx","reducers/user.ts","reportWebVitals.ts","reducers/games.ts","reducers/associatedKeypair.ts","reducers/wallet.ts","reducers/sockets.ts","store.ts","index.tsx","utils/shortenAddress.ts","components/Socials.tsx"],"names":["messageToSign","Uint8Array","from","Buffer","connection","Connection","servicePublicKey","PublicKey","Navbar","wallet","useWallet","useState","isAskedToVerify","setIsAskedToVerify","isLoggedIn","setIsLoggedIn","depositModalOpen","setDepositModalOpen","menuOpen","setMenuOpen","depositAmount","setDepositAmount","depositStatus","setDepositStatus","withdrawModalOpen","setWithdrawModalOpen","withdrawAmount","setWithdrawAmount","withdrawnAmount","setWithdrawnAmount","balanceChanged","setBalanceChanged","withdrawStatus","setWithdrawStatus","pendingAmount","setPendingAmount","prevBalance","setPrevBalance","dispatch","useDispatch","user","useSelector","state","associatedKeypair","sockets","connectUser","a","type","payload","connectSocket","loadAssociatedKeypair","axios","get","withCredentials","data","associatedKp","Keypair","fromSecretKey","secretKey","getAssociatedKeypairBalance","getBalance","publicKey","emit","_id","on","amount","fromDeposit","deposit","LAMPORTS_PER_SOL","toast","error","transaction","Transaction","add","SystemProgram","transfer","fromPubkey","toPubkey","lamports","sendTransaction","console","log","response","message","toString","withdraw","feePayer","signers","requestWithdraw","balance","post","onAccountChange","accountInfo","ex","openWithdrawModel","balanace","useEffect","signAndAuth","signMessage","authenticated","toBase58","toBytes","signedMessage","Array","className","to","src","isActive","onClick","onAnimationEnd","Number","toFixed","shortenAddress","style","display","width","height","d","value","onChange","event","input","inputDepositAmount","target","size","color","inputWithdrawAmount","disabled","displayName","username","GameBox","props","game","setGame","move","setMove","joinModalOpen","setJoinModalOpen","useSound","volume","playJoin","playWin","playLoss","playCountDown","applySound","creator","opponent","includes","status","winner","changeGameStatus","fee","setTimeout","joinGame","gameId","success","cancelGame","creatorMove","onAnimationEndCapture","date","countDownEnd","onComplete","renderer","time","seconds","opponentMove","activeStatuses","amountOptions","ActiveGames","userGames","setUserGames","openGames","setOpenGames","createGameModalOpen","setCreateGameModalOpen","creatingGame","setCreatingGame","gameAmount","setGameAmount","games","createGame","removeGame","getGamesData","activeGames","updatedGame","forEach","push","length","map","UserGames","index","winAmount","moment","updatedAt","format","Profile","useParams","setUser","setGames","notFound","setNotFound","gamesWon","setGamesWon","gamesLost","setGamesLost","getUser","Promise","all","responseUser","responseGame","undefined","ScrollToTop","pathname","useLocation","window","scrollTo","MyProfile","editData","setEditData","editUserModalOpen","setEditUserModalOpen","editUser","newUser","getGames","createAvatar","avatarStyle","seed","rel","href","backgroundImage","alt","onInput","placeholder","Chat","messagesRef","useRef","setMessage","messages","setMessages","sendMessage","content","scrollMessagesToBottom","current","scrollTop","scrollHeight","inputMessage","contentWords","split","c","trim","join","getLast","old","ref","reverse","Date","now","lastMessageAt","onKeyPress","key","intervalDelay","precision","milliseconds","LeftSide","Socials","RecentGames","recentGames","setRecentGames","loadRecentGames","loser","RightSide","FullUserInfo","blocked","setBlocked","network","WalletAdapterNetwork","Testnet","App","UserActions","endpoint","useMemo","clusterApiUrl","wallets","getPhantomWallet","getSlopeWallet","getSolflareWallet","addEventListener","solana","gameSocket","io","userSocket","messageSocket","ConnectionProvider","WalletProvider","autoConnect","path","element","autoClose","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","GamesActions","AssociatedKeypairActions","WalletActions","SocketsActions","defaultSockets","combined","combineReducers","action","LOAD_USER","UPDATE_USER_BALANCE","UPDATE_USER_LAST_MESSAGE_AT","LOAD_WALLET","LOAD_ASSOCIATED_KEYPAIR","LOAD_GAMES","ADD_GAME","find","UPDATE_GAME","LOAD_GAME_SOCKET","LOAD_USER_SOCKET","LOAD_MESSAGE_SOCKET","createStore","ReactDOM","render","store","document","getElementById","slice"],"mappings":"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","file":"static/js/main.d1293a78.chunk.js","sourcesContent":["import React, { useEffect, useState } from 'react';\r\n\r\nimport { useWallet, WalletContextState } from '@solana/wallet-adapter-react';\r\nimport axios from 'axios';\r\n\r\nimport { useDispatch, useSelector } from 'react-redux';\r\n\r\nimport { Connection, Keypair, LAMPORTS_PER_SOL, Message, PublicKey, SystemProgram, Transaction } from '@solana/web3.js'\r\nimport { clusterApiUrl } from '@solana/web3.js'\r\nimport { WalletMultiButton } from '@solana/wallet-adapter-react-ui';\r\n\r\nimport '../css/Navbar.css'\r\nimport '../css/Modal.css'\r\nimport '../css/Dropdown.css'\r\nimport User from '../interfaces/User';\r\nimport { CombinedReducer } from '../store';\r\nimport Svg from 'react-inlinesvg'\r\n\r\nimport { Sockets } from '../reducers/sockets';\r\nimport { Link } from 'react-router-dom';\r\nimport { toast } from 'react-toastify';\r\nimport ClipLoader from \"react-spinners/ClipLoader\";\r\nimport { NavLink } from 'react-router-dom';\r\nimport Socials from './Socials';\r\nimport { shortenAddress } from '../utils/shortenAddress';\r\n\r\nconst messageToSign = Uint8Array.from(Buffer.from('Login to the Degen Games'))\r\n\r\nconst connection = new Connection(\r\n    'https://ssc-dao.genesysgo.net/',\r\n    'confirmed'\r\n);\r\n\r\nconst servicePublicKey = new PublicKey('Degend6MwnmmXx1uiFPp9UqURUN95BZxUYKLUHZnqUHq')\r\n\r\nfunction Navbar() {\r\n\r\n    const wallet = useWallet()\r\n    const [isAskedToVerify, setIsAskedToVerify] = useState(false)\r\n    const [isLoggedIn, setIsLoggedIn] = useState(false)\r\n    const [depositModalOpen, setDepositModalOpen] = useState(false)\r\n    const [menuOpen, setMenuOpen] = useState(false)\r\n    const [depositAmount, setDepositAmount] = useState<number | null>(0)\r\n    const [depositStatus, setDepositStatus] = useState('none')\r\n    const [withdrawModalOpen, setWithdrawModalOpen] = useState(false)\r\n    const [withdrawAmount, setWithdrawAmount] = useState<number | null>(0)\r\n    const [withdrawnAmount, setWithdrawnAmount] = useState<number | null>(0)\r\n    const [balanceChanged, setBalanceChanged] = useState('0')\r\n    const [withdrawStatus, setWithdrawStatus] = useState('none')\r\n    const [pendingAmount, setPendingAmount] = useState(0)\r\n    const [prevBalance, setPrevBalance] = useState<number | null>(null)\r\n    const dispatch = useDispatch()\r\n\r\n    const user = useSelector<CombinedReducer, User>((state) => state.user)\r\n    const associatedKeypair = useSelector<CombinedReducer, Keypair>((state) => state.associatedKeypair)\r\n    const sockets = useSelector<CombinedReducer, Sockets>((state) => state.sockets)\r\n\r\n    const connectUser = async (user: User) => {\r\n        dispatch({ type: 'LOAD_WALLET', payload: wallet })\r\n        dispatch({ type: 'LOAD_USER', payload: user })\r\n        connectSocket(user)\r\n        loadAssociatedKeypair()\r\n        return setIsLoggedIn(true)\r\n    }\r\n\r\n    const loadAssociatedKeypair = async () => {\r\n        const associatedKeypair = (await axios.get('/api/u/associatedKeypair', { withCredentials: true })).data\r\n        const associatedKp = Keypair.fromSecretKey(Uint8Array.from(associatedKeypair.secretKey))\r\n        dispatch({ type: 'LOAD_ASSOCIATED_KEYPAIR', payload: associatedKp })\r\n    }\r\n\r\n    const getAssociatedKeypairBalance = async () => {\r\n        return connection.getBalance(associatedKeypair.publicKey)\r\n    }\r\n\r\n    const connectSocket = (user: User) => {\r\n        if (!(sockets && sockets.user)) return\r\n\r\n        sockets.user.emit('subscribeToProfile', user._id)\r\n        sockets.user.on('balanceChange', (amount: number, fromDeposit: boolean) => {\r\n            dispatch({ type: 'UPDATE_USER_BALANCE', payload: amount })\r\n\r\n            if (fromDeposit) setDepositStatus('validated')\r\n        })\r\n    }\r\n\r\n    const inputDepositAmount = (input: string) => {\r\n        if (!input) return setDepositAmount(null)\r\n\r\n\r\n        if (Number(input) >= 0) setDepositAmount(Number(input) * LAMPORTS_PER_SOL)\r\n        else setDepositAmount(0)\r\n    }\r\n    const inputWithdrawAmount = (input: string) => {\r\n        if (!input) return setWithdrawAmount(null)\r\n\r\n\r\n        if (Number(input) >= 0) setWithdrawAmount(Number(input) * LAMPORTS_PER_SOL)\r\n        else setWithdrawAmount(0)\r\n    }\r\n\r\n    const deposit = async () => {\r\n        if (!(wallet && wallet.publicKey && depositAmount)) return\r\n\r\n        if (depositAmount < 0.01 * LAMPORTS_PER_SOL) return toast.error('Minimum deposit amount is 0.01')\r\n\r\n        try {\r\n            const transaction = new Transaction().add(\r\n                SystemProgram.transfer({\r\n                    fromPubkey: wallet.publicKey,\r\n                    toPubkey: servicePublicKey,\r\n                    lamports: depositAmount\r\n                })\r\n            )\r\n\r\n            await wallet.sendTransaction(transaction, connection)\r\n            console.log({ transaction })\r\n            setDepositStatus('sent')\r\n        } catch (e: any) {\r\n            toast.error(e.response.data.message.toString())\r\n            setDepositStatus('failed')\r\n        }\r\n    }\r\n\r\n    const withdraw = async () => {\r\n        if (!(wallet && wallet.publicKey)) return\r\n\r\n        setWithdrawStatus('withdrawing')\r\n\r\n        const amount = await connection.getBalance(associatedKeypair.publicKey)\r\n\r\n        console.log({ amount })\r\n        const transaction = new Transaction().add(\r\n            SystemProgram.transfer({\r\n                fromPubkey: associatedKeypair.publicKey,\r\n                toPubkey: new PublicKey(user.publicKey),\r\n                lamports: amount\r\n            })\r\n        )\r\n        transaction.feePayer = new PublicKey(user.publicKey)\r\n\r\n        await wallet.sendTransaction(transaction, connection, { signers: [associatedKeypair] })\r\n\r\n        setWithdrawnAmount(amount)\r\n        setWithdrawStatus('withdrawn')\r\n    }\r\n    const requestWithdraw = async () => {\r\n        if (!(wallet && wallet.publicKey && withdrawAmount)) return\r\n\r\n        if (withdrawAmount < 0.01 * LAMPORTS_PER_SOL) return toast.error(\"Minimum withdraw is 0.01 SOLs\")\r\n        if (withdrawAmount > user.balance) return toast.error(\"Balance needs to be higher than the withdraw amount\")\r\n\r\n        try {\r\n            setWithdrawStatus('withdrawing')\r\n            setPendingAmount(withdrawAmount)\r\n            await axios.post('/api/u/requestWithdraw', { amount: withdrawAmount })\r\n\r\n            connection.onAccountChange(\r\n                associatedKeypair.publicKey,\r\n                (accountInfo, ex) => {\r\n                    if (accountInfo.lamports >= withdrawAmount) {\r\n                        withdraw()\r\n                    }\r\n                },\r\n                'confirmed'\r\n            )\r\n        } catch (e: any) {\r\n            toast.error(e.response.data.message.toString())\r\n        }\r\n    }\r\n\r\n    const openWithdrawModel = async () => {\r\n        const balanace = await getAssociatedKeypairBalance()\r\n        if (balanace > 0.01) {\r\n            setPendingAmount(balanace)\r\n            setWithdrawStatus('hasPending')\r\n        } else {\r\n            setWithdrawStatus('none')\r\n        }\r\n        setWithdrawModalOpen(true)\r\n    }\r\n\r\n    useEffect(() => {\r\n        const signAndAuth = async (wallet: WalletContextState) => {\r\n            try {\r\n                if (!wallet || !wallet.signMessage || !wallet.publicKey || isAskedToVerify) return\r\n                setIsAskedToVerify(true)\r\n\r\n                let { authenticated, user } = (await axios.get('/api/auth/state')).data\r\n                console.log({ authenticated })\r\n                if (authenticated) {\r\n                    if (user.publicKey === wallet.publicKey.toBase58()) {\r\n                        await connectUser(user)\r\n                        return\r\n                    }\r\n                    console.log('PUBLIC KEYS ARE NOT THE SAME!')\r\n                    await axios.get('/api/auth/logout')\r\n                }\r\n\r\n                const publicKey = wallet.publicKey.toBytes()\r\n                const signedMessage = await wallet.signMessage(messageToSign)\r\n\r\n                user = (await axios.post('/api/auth/login', { publicKey: Array.from(publicKey), signedMessage: Array.from(signedMessage) }, { withCredentials: true })).data\r\n\r\n                await connectUser(user)\r\n            } catch (e: any) {\r\n                toast.error(e.response.data.message.toString())\r\n                console.log(e)\r\n            }\r\n        }\r\n\r\n        signAndAuth(wallet)\r\n    }, [wallet])\r\n\r\n    useEffect(() => {\r\n        if (!user) return\r\n        if (prevBalance != null) {\r\n            console.log('Balance Update!', user.balance - prevBalance)\r\n            if (user.balance - prevBalance >= 0) {\r\n                setBalanceChanged('1')\r\n            } else {\r\n                setBalanceChanged('-1')\r\n            }\r\n        }\r\n        setPrevBalance(user.balance)\r\n    }, [user?.balance])\r\n\r\n    return (\r\n        <div className='Navbar' >\r\n            <div className='navbar'>\r\n                <div className='left'>\r\n                    <Link to='/' className='logo'>\r\n                        <img src='/logo.png' />\r\n                    </Link>\r\n                    <div className='navLinks'>\r\n                        <NavLink to='/rps' className={({ isActive }) => (isActive ? 'activeNavLink' : 'inactiveNavLink')}>\r\n                            <p className='title'>Rock Paper Scissors</p>\r\n                        </NavLink>\r\n                    </div>\r\n                </div>\r\n                {user ? <div onClick={() => setMenuOpen(!menuOpen)} className={menuOpen ? \"toggleMenu open\" : \"toggleMenu\"}>\r\n                    <span></span>\r\n                    <span></span>\r\n                    <span></span>\r\n                </div> : null}\r\n                {\r\n                    isLoggedIn && user\r\n                        ? (\r\n                            <div className='user'>\r\n                                <div className='balance'>\r\n                                    <h4 data-balancechanged={balanceChanged} onAnimationEnd={() => setBalanceChanged('0')} className='amount'>{Number((user?.balance / LAMPORTS_PER_SOL).toFixed(5))} SOL</h4>\r\n                                </div>\r\n                                <button onClick={() => { setDepositModalOpen(true); setDepositStatus('none') }} className='depositB'>Deposit</button>\r\n                                <button onClick={() => openWithdrawModel()} className='withdrawB'>Withdraw</button>\r\n                                <Link to={`/u/${user.publicKey.toString()}`} className='profile'>\r\n                                    <h4 className='name'>{shortenAddress(user.publicKey.toString())}</h4>\r\n                                </Link>\r\n                            </div>\r\n                        )\r\n                        : (\r\n                            <div className='multiButton'>\r\n                                <WalletMultiButton />\r\n                            </div>\r\n                        )\r\n                }\r\n            </div >\r\n            <div className='modal' style={{ display: depositModalOpen ? 'flex' : 'none' }}>\r\n                <div className='container'>\r\n                    <div className='wrapper'>\r\n                        <button className='closeB' onClick={() => setDepositModalOpen(false)}><svg width=\"14\" height=\"14\"><path d=\"M14 12.461 8.3 6.772l5.234-5.233L12.006 0 6.772 5.234 1.54 0 0 1.539l5.234 5.233L0 12.006l1.539 1.528L6.772 8.3l5.69 5.7L14 12.461z\"></path></svg></button>\r\n                        <h1 className='title'>Deposit</h1>\r\n                        {\r\n                            depositStatus === 'none' ?\r\n                                <>\r\n                                    <input type=\"number\" value={depositAmount === null ? '' : depositAmount / LAMPORTS_PER_SOL} onChange={(event) => inputDepositAmount((event.target as HTMLInputElement).value)} />\r\n                                    <button className='actionB modalB' onClick={() => deposit()}>Deposit</button></>\r\n                                :\r\n                                depositStatus === 'sent' ?\r\n                                    <>\r\n                                        <h3 className='status'>Validating <ClipLoader size={13} color='#443f89' /></h3>\r\n                                    </> : depositStatus === 'validated' ? <h3 className='status'>Succesfully validated</h3> : <h3 className='status'>Failed</h3>\r\n                        }\r\n                    </div>\r\n                </div>\r\n                <div className='overlay'></div>\r\n            </div>\r\n            <div className='modal' style={{ display: withdrawModalOpen ? 'flex' : 'none' }}>\r\n                <div className='container'>\r\n                    <div className='wrapper'>\r\n                        <button className='closeB' onClick={() => setWithdrawModalOpen(false)}><svg width=\"14\" height=\"14\"><path d=\"M14 12.461 8.3 6.772l5.234-5.233L12.006 0 6.772 5.234 1.54 0 0 1.539l5.234 5.233L0 12.006l1.539 1.528L6.772 8.3l5.69 5.7L14 12.461z\"></path></svg></button>\r\n                        <h1 className='title'>Withdraw</h1>\r\n                        {\r\n                            withdrawStatus === 'none'\r\n                                ?\r\n                                <>\r\n                                    <input type=\"number\" value={withdrawAmount === null ? '' : withdrawAmount / LAMPORTS_PER_SOL} onChange={(event) => inputWithdrawAmount((event.target as HTMLInputElement).value)} />\r\n                                    <button className='actionB modalB' onClick={() => requestWithdraw()}>Withdraw</button></>\r\n                                :\r\n                                withdrawStatus === 'hasPending' || withdrawStatus === 'withdrawing' ?\r\n                                    <div className='pending'>\r\n                                        <h2>Pending: {pendingAmount / LAMPORTS_PER_SOL} SOL</h2>\r\n                                        <button className='actionB' disabled={withdrawStatus === 'withdrawing'} onClick={() => withdraw()}><span className='withdrawLabel'>Withdraw</span> {withdrawStatus === 'withdrawing' ? <ClipLoader size={13} color='#27244f' /> : null}</button>\r\n                                    </div> : withdrawStatus === 'withdrawn' ?\r\n                                        <h2>Succesfully withdrawn {withdrawnAmount ? withdrawnAmount / LAMPORTS_PER_SOL : null}</h2>\r\n                                        : <h3 className='status'>Failed</h3>\r\n                        }\r\n                    </div>\r\n                </div>\r\n                <div className='overlay'></div>\r\n            </div>\r\n            <div style={{ display: menuOpen ? 'flex' : 'none' }} className='menu'>\r\n                {user ? <div className='navLinks'>\r\n                    <NavLink onClick={() => setDepositModalOpen(true)} to='' className='activeNavLink navLink'>\r\n                        <img className='icon' src='/img/deposit.png' />\r\n                        <p className='title'>Deposit</p>\r\n                    </NavLink>\r\n                    <NavLink onClick={() => setWithdrawModalOpen(true)} to='' className='activeNavLink navLink'>\r\n                        <img className='icon' src='/img/withdraw.png' />\r\n                        <p className='title'>Withdraw</p>\r\n                    </NavLink>\r\n                </div> : null}\r\n                <Socials />\r\n            </div>\r\n        </div >\r\n    );\r\n}\r\n\r\nexport default Navbar;\r\n","import User from \"../interfaces/User\";\r\nimport { shortenAddress } from \"./shortenAddress\";\r\n\r\nexport const displayName = (user: User) => {\r\n    return user.username || shortenAddress(user.publicKey)\r\n}","import React, { useEffect, useState } from 'react';\r\n\r\nimport { useWallet } from '@solana/wallet-adapter-react';\r\nimport axios from 'axios';\r\n\r\nimport { useDispatch, useSelector } from 'react-redux';\r\n\r\nimport { LAMPORTS_PER_SOL } from '@solana/web3.js'\r\nimport Countdown from 'react-countdown';\r\nimport Svg from 'react-inlinesvg'\r\n\r\nimport useSound from 'use-sound';\r\nimport '../css/ActiveGames.css'\r\nimport '../css/Coin.css'\r\nimport '../css/Modal.css'\r\nimport User from '../interfaces/User';\r\nimport { CombinedReducer } from '../store';\r\nimport Game from '../interfaces/Game';\r\nimport { toast } from 'react-toastify';\r\nimport { Link } from 'react-router-dom';\r\nimport { displayName } from '../utils/displayName';\r\n\r\nimport 'animate.css'\r\n\r\ninterface Props {\r\n    game: Game,\r\n    removeGame: (game: Game) => void\r\n}\r\n\r\nfunction GameBox(props: Props) {\r\n    const [game, setGame] = useState<Game>()\r\n    const [move, setMove] = useState(0)\r\n    const [joinModalOpen, setJoinModalOpen] = useState(false)\r\n\r\n    const wallet = useWallet()\r\n    const dispatch = useDispatch()\r\n    const user = useSelector<CombinedReducer, User>((state) => state.user)\r\n    const [playJoin] = useSound('/sound/join.mp3', { volume: 0.25 });\r\n    const [playWin] = useSound('/sound/win.mp3', { volume: 0.25 });\r\n    const [playLoss] = useSound('/sound/loss.mp3', { volume: 0.25 });\r\n    const [playCountDown] = useSound('/sound/countDown.mp3', { volume: 0.25 });\r\n\r\n    useEffect(() => {\r\n        setGame(props.game)\r\n    }, [props.game])\r\n\r\n    useEffect(() => {\r\n        if (!game) return\r\n\r\n        applySound(game)\r\n    }, [game])\r\n\r\n    const applySound = (game: Game) => {\r\n        if (!(user?._id && [game.creator._id, game.opponent?._id].includes(user._id))) return\r\n\r\n        if (game.status === 'ended') {\r\n            playJoin()\r\n        } else if (game.status === 'revealed') {\r\n            if (!game.winner) return\r\n\r\n            if (game.winner?._id === user._id) {\r\n                playWin()\r\n            } else {\r\n                playLoss()\r\n            }\r\n        } else if (game.status === 'countdown') {\r\n            playCountDown()\r\n        }\r\n\r\n    }\r\n\r\n    const changeGameStatus = (status: string) => {\r\n        if (!game) return\r\n        if (game.status === status) return\r\n\r\n        setGame({ ...game, status })\r\n\r\n        if (status === 'revealed') {\r\n            if (game.winner && game.winner?._id === user._id) {\r\n                dispatch({ type: 'UPDATE_USER_BALANCE', payload: game.amount * 2 })\r\n            } else if (!game.winner && [game.creator._id, game.opponent?._id].includes(user._id)) {\r\n                dispatch({ type: 'UPDATE_USER_BALANCE', payload: game.amount * (1 + game.fee / 100) })\r\n            }\r\n            setTimeout(() => {\r\n                game.status = 'removed'\r\n                dispatch({ type: 'UPDATE_GAME', payload: game })\r\n            }, 2500)\r\n        }\r\n    }\r\n\r\n    const joinGame = async () => {\r\n        if (!(wallet && wallet.publicKey && game)) return\r\n\r\n        if (user._id === game.creator._id) return toast.error('You can not join your game')\r\n        if (user.balance < game.amount) return toast.error('Balance needs to be higher than the game bet')\r\n\r\n        try {\r\n            await axios.post('/api/game/join', {\r\n                gameId: game._id,\r\n                move\r\n            })\r\n\r\n            toast.success('Joined the game')\r\n\r\n            setJoinModalOpen(false)\r\n        } catch (e: any) {\r\n            toast.error(e.response.data.message.toString())\r\n        }\r\n    }\r\n\r\n    const cancelGame = async () => {\r\n        if (!(wallet && wallet.publicKey && game)) return\r\n\r\n        if (game.creator._id !== user._id) return toast.error('You can not cancel another person`s game')\r\n\r\n        try {\r\n            await axios.post('/api/game/cancel', {\r\n                gameId: game._id\r\n            })\r\n\r\n            toast.success('Game has been cancelled')\r\n        } catch (e: any) {\r\n            toast.error(e.response.data.message.toString())\r\n        }\r\n    }\r\n\r\n    return (\r\n        <>\r\n            {game && game.status !== 'removed' ? <div key={game._id} className='gameWrapper'>\r\n                <div className=\"players\">\r\n                    <div className='playerWrapper'>\r\n                        {game.status === 'revealed' ?\r\n                            <div className={game.winner?._id == game.creator._id ? 'player winner' : 'player loser'}>\r\n                                <Svg className='move flip' src={`./img/move${game.creatorMove}.svg`} />\r\n                                <Link to={`/u/${game.creator.publicKey}`} className='address'>{displayName(game.creator)}</Link>\r\n                            </div>\r\n                            : game.status === 'flipping' ?\r\n                                <div className='player'>\r\n                                    <div className='flip'><Svg onAnimationEndCapture={() => changeGameStatus('revealed')} className='move animate__animated animate__bounce' src='./img/move0.svg' /></div>\r\n                                    <Link to={`/u/${game.creator.publicKey}`} className='address'>{displayName(game.creator)}</Link>\r\n                                </div>\r\n                                : <div className='player'>\r\n                                    <Svg className='move flip' src='./img/move0.svg' />\r\n                                    <Link to={`/u/${game.creator.publicKey}`} className='address'>{displayName(game.creator)}</Link>\r\n                                </div>\r\n                        }\r\n                    </div>\r\n                    <div className='middle'>\r\n                        {game.status === 'countdown' ?\r\n                            <Countdown date={game.countDownEnd} onComplete={() => changeGameStatus('flipping')} renderer={time => <h3>{time.seconds}</h3>} />\r\n                            : <h3 className='vsTag'>VS</h3>}\r\n                    </div>\r\n                    <div className='playerWrapper'>\r\n                        {!game.opponent ?\r\n                            !user || game.creator._id === user._id ?\r\n                                <div className='player'>\r\n                                    <Svg className='movePlaceholder' src='/img/movePlaceholder.svg' />\r\n                                    <h3 className='address'>waiting...</h3>\r\n                                </div> : <div className='player join'><button onClick={() => setJoinModalOpen(true)} className='actionB'>Join</button> </div>\r\n                            : game.status === 'revealed' ?\r\n                                <div className={game.winner?._id == game.opponent._id ? 'player winner' : 'player loser'}>\r\n                                    <Svg className='move' src={`./img/move${game.opponentMove}.svg`} />\r\n                                    <Link to={`/u/${game.opponent.publicKey}`} className='address'>{displayName(game.opponent)}</Link>\r\n                                </div>\r\n                                : game.status === 'flipping' ?\r\n                                    <div className='player'>\r\n                                        <Svg className='move animate__animated animate__bounce' src='./img/move0.svg' />\r\n                                        <Link to={`/u/${game.opponent.publicKey}`} className='address'>{displayName(game.opponent)}</Link>\r\n                                    </div>\r\n                                    : <div className='player'>\r\n                                        <Svg className='move' src='./img/move0.svg' />\r\n                                        <Link to={`/u/${game.opponent.publicKey}`} className='address'>{displayName(game.opponent)}</Link>\r\n                                    </div>\r\n                        }\r\n                    </div>\r\n                </div>\r\n                <div className='info'>\r\n                    <div className='bet'>\r\n                        <h3>{game.amount / LAMPORTS_PER_SOL} SOL</h3>\r\n                    </div>\r\n\r\n                    {!game.opponent && user ?\r\n                        game.creator._id === user._id ?\r\n                            <button className='deleteB' onClick={() => cancelGame()}><Svg src='/img/bin.svg' /></button>\r\n                            :\r\n                            null\r\n                        : <></>\r\n                    }\r\n                </div>\r\n            </div> : null\r\n            }\r\n            <div className='modal' style={{ display: joinModalOpen ? 'flex' : 'none' }}>\r\n                <div className='container'>\r\n                    <div className='wrapper'>\r\n                        <button className='closeB' onClick={() => setJoinModalOpen(false)}><svg width=\"14\" height=\"14\"><path d=\"M14 12.461 8.3 6.772l5.234-5.233L12.006 0 6.772 5.234 1.54 0 0 1.539l5.234 5.233L0 12.006l1.539 1.528L6.772 8.3l5.69 5.7L14 12.461z\"></path></svg></button>\r\n                        <h1 className='title'>Join Game</h1>\r\n                        <div className='coinChooser'>\r\n                            <Svg onClick={() => setMove(0)} className={move === 0 ? 'chosen' : ''} src='./img/move0.svg' />\r\n                            <Svg onClick={() => setMove(1)} className={move === 1 ? 'chosen' : ''} src='./img/move1.svg' />\r\n                            <Svg onClick={() => setMove(2)} className={move === 2 ? 'chosen' : ''} src='./img/move2.svg' />\r\n                        </div>\r\n\r\n                        <button className='actionB modalB' onClick={() => joinGame()}>Join</button>\r\n                    </div>\r\n                </div>\r\n                <div className='overlay'></div>\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default GameBox;","import React, { useEffect, useState } from 'react';\r\n\r\nimport { useWallet } from '@solana/wallet-adapter-react';\r\nimport axios from 'axios';\r\n\r\nimport { useDispatch, useSelector } from 'react-redux';\r\n\r\nimport '../css/ActiveGames.css'\r\nimport '../css/Coin.css'\r\nimport '../css/Modal.css'\r\nimport User from '../interfaces/User';\r\nimport { CombinedReducer } from '../store';\r\nimport Game from '../interfaces/Game';\r\nimport { toast } from 'react-toastify';\r\nimport { Sockets } from '../reducers/sockets';\r\nimport GameBox from './GameBox';\r\nimport { LAMPORTS_PER_SOL } from '@solana/web3.js';\r\nimport ClipLoader from \"react-spinners/ClipLoader\";\r\n\r\nimport Svg from 'react-inlinesvg'\r\n\r\nconst activeStatuses = ['active', 'countdown', 'flipping']\r\n\r\nconst amountOptions = [0.05, 0.1, 0.25, 0.5, 1, 2]\r\n\r\nfunction ActiveGames() {\r\n\r\n    const wallet = useWallet()\r\n    const [userGames, setUserGames] = useState<Game[]>([])\r\n    const [openGames, setOpenGames] = useState<Game[]>([])\r\n    const [createGameModalOpen, setCreateGameModalOpen] = useState(false)\r\n    const [creatingGame, setCreatingGame] = useState(false)\r\n    const [gameAmount, setGameAmount] = useState<number | null>(0.05)\r\n    const [move, setMove] = useState(0)\r\n\r\n    const dispatch = useDispatch()\r\n\r\n    const user = useSelector<CombinedReducer, User>((state) => state.user)\r\n    const games = useSelector<CombinedReducer, Game[]>((state) => state.games)\r\n    const sockets = useSelector<CombinedReducer, Sockets>((state) => state.sockets)\r\n\r\n    const createGame = async () => {\r\n        if (!(wallet && wallet.publicKey && gameAmount && !creatingGame)) return\r\n        setCreatingGame(true)\r\n\r\n        if (user.balance < gameAmount) return toast.error('Balance needs to be higher than the game bet')\r\n\r\n        try {\r\n            await axios.post('/api/game', {\r\n                amount: gameAmount * LAMPORTS_PER_SOL,\r\n                creatorMove: move\r\n            })\r\n\r\n            toast.success('Game created')\r\n            setCreateGameModalOpen(false)\r\n        } catch (e: any) {\r\n            toast.error(e.response.data.message.toString())\r\n        }\r\n\r\n        setCreatingGame(false)\r\n    }\r\n\r\n    const gameUpdate = (game: Game) => {\r\n        dispatch({ type: 'UPDATE_GAME', payload: game })\r\n    }\r\n\r\n    const removeGame = (game: Game) => {\r\n        game.status = 'ended'\r\n        dispatch({ type: 'UPDATE_GAME', payload: game })\r\n    }\r\n\r\n\r\n    useEffect(() => {\r\n        const getGamesData = async () => {\r\n            const activeGames = await axios.get('/api/game/allActive')\r\n\r\n            dispatch({ type: 'LOAD_GAMES', payload: activeGames.data })\r\n        }\r\n\r\n        getGamesData()\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        if (!sockets.game) return\r\n\r\n        sockets.game.on('newGame', (game: Game) => dispatch({ type: 'ADD_GAME', payload: game }))\r\n        sockets.game.on('gameUpdate', (updatedGame: Game) => gameUpdate(updatedGame))\r\n\r\n    }, [sockets.game])\r\n\r\n    useEffect(() => {\r\n        let userGames: Game[] = []\r\n        let openGames: Game[] = []\r\n        games.forEach(game => {\r\n            if (game.status !== 'removed' && game.status !== 'cancelled') {\r\n                if (game.creator._id === user?._id) userGames.push(game)\r\n                else if (game.opponent && game.opponent._id === user?._id) userGames.push(game)\r\n                else openGames.push(game)\r\n            }\r\n        })\r\n        setUserGames(userGames)\r\n        setOpenGames(openGames)\r\n    }, [user, games])\r\n\r\n    return (\r\n        <div className='Page ActiveGames' >\r\n            <h1 className='gameTitle'>Rock Paper Scissors</h1>\r\n            <div className=\"typeWrapper\">\r\n                <div className='type'>\r\n                    <h2 className='typeHeader'>My Games</h2>\r\n                    <h2 className='gamesCounter'>{userGames.length}</h2>\r\n                </div>\r\n                {user ? <button className='createGameB' onClick={() => setCreateGameModalOpen(true)}>NEW GAME +</button> : null}\r\n            </div>\r\n            {userGames.length > 0 ? <div className='box games'>\r\n                {userGames.map(game => {\r\n                    return activeStatuses.includes(game.status) ? (\r\n                        <GameBox key={game._id} game={game} removeGame={removeGame} />\r\n                    ) : null\r\n                })}\r\n            </div> : <div className='box typePlaceHolder'><p>Your games will appear here</p></div>}\r\n            <div className='type'>\r\n                <h2 className='typeHeader'>Open Games</h2>\r\n                <h2 className='gamesCounter'>{openGames.length}</h2>\r\n            </div>\r\n            {openGames.length > 0 ? <div className='box games'>\r\n                {openGames.map(game => {\r\n                    return activeStatuses.includes(game.status) ? (\r\n                        <GameBox key={game._id} game={game} removeGame={removeGame} />\r\n                    ) : null\r\n                })}\r\n            </div> : <div className='box typePlaceHolder'><p>No open games at the moment</p></div>}\r\n            <div className='modal' style={{ display: createGameModalOpen ? 'flex' : 'none' }}>\r\n                <div className='container'>\r\n                    <div className='wrapper'>\r\n                        <button className='closeB' onClick={() => setCreateGameModalOpen(false)}><svg width=\"14\" height=\"14\"><path d=\"M14 12.461 8.3 6.772l5.234-5.233L12.006 0 6.772 5.234 1.54 0 0 1.539l5.234 5.233L0 12.006l1.539 1.528L6.772 8.3l5.69 5.7L14 12.461z\"></path></svg></button>\r\n                        <h1 className='title'>Create Game</h1>\r\n                        <h3 className='subtitle'>Choose Move</h3>\r\n                        <div className='coinChooser'>\r\n                            <Svg onClick={() => setMove(0)} className={move === 0 ? 'chosen flip' : 'flip'} src='./img/move0.svg' />\r\n                            <Svg onClick={() => setMove(1)} className={move === 1 ? 'chosen flip' : 'flip'} src='./img/move1.svg' />\r\n                            <Svg onClick={() => setMove(2)} className={move === 2 ? 'chosen flip' : 'flip'} src='./img/move2.svg' />\r\n                        </div>\r\n                        <h3 className='subtitle'>Choose Amount</h3>\r\n                        <div className='amounts'>\r\n                            {amountOptions.map(amount =>\r\n                                <div className={gameAmount === amount ? 'amountChosen' : 'amount'} onClick={() => setGameAmount(amount)}>{amount}</div>\r\n                            )}\r\n                        </div>\r\n                        <button className='actionB modalB' disabled={creatingGame} onClick={() => createGame()}>{creatingGame ? 'Creating...' : 'Create'} {creatingGame ? <ClipLoader size={13} color='#27244f' /> : null}</button>\r\n\r\n                    </div>\r\n                </div>\r\n                <div className='overlay'></div>\r\n            </div>\r\n        </div >\r\n    );\r\n}\r\n\r\nexport default ActiveGames;\r\n","import React, { useState } from 'react';\r\n\r\nimport { LAMPORTS_PER_SOL } from '@solana/web3.js'\r\nimport Svg from 'react-inlinesvg'\r\n\r\nimport '../css/UserGames.css'\r\nimport '../css/Coin.css'\r\nimport '../css/Modal.css'\r\nimport User from '../interfaces/User';\r\nimport Game from '../interfaces/Game';\r\nimport moment from 'moment'\r\nimport { Link } from 'react-router-dom';\r\nimport { displayName } from '../utils/displayName';\r\nimport { shortenAddress } from '../utils/shortenAddress';\r\n\r\ninterface Props {\r\n    games: Game[],\r\n    user: User\r\n}\r\n\r\n\r\nfunction UserGames(props: Props) {\r\n    const calculateWinAmount = (amount: number, fee: number) => Math.round(amount * 2 * ((100 - fee) / 100)) / LAMPORTS_PER_SOL\r\n\r\n    return (\r\n        <>\r\n            <table className='UserGames'>\r\n                <thead>\r\n                    <tr>\r\n                        <th>Date</th>\r\n                        <th>Bet</th>\r\n                        <th>Move</th>\r\n                        <th>Opponent</th>\r\n                        <th>Opponent Move</th>\r\n                        <th>Win Amount</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    {\r\n                        props.games.map((game, index) => {\r\n                            if (game.status !== 'ended' || !game.opponent) return\r\n\r\n                            const move = game.creator._id === props.user._id ? game.creatorMove : game.opponentMove\r\n                            const opponent = game.creator._id === props.user._id ? game.opponent : game.creator\r\n                            const opponentMove = game.creator._id === props.user._id ? game.opponentMove : game.creatorMove\r\n                            const winAmount = game.winner ? game.winner._id === props.user._id ? game.amount * 2 / LAMPORTS_PER_SOL : -game.amount / LAMPORTS_PER_SOL : 0\r\n\r\n                            return <tr key={index} className='game' >\r\n                                <td className='date'>{moment(game.updatedAt).format('MMM DD, h:mm A')}</td>\r\n                                <td>{game.amount / LAMPORTS_PER_SOL} SOL</td>\r\n                                <td className='move flip'><Svg src={`/img/move${move}.svg`} /></td>\r\n                                <td><Link className='profileLink' to={`/u/${opponent.publicKey}`}>{shortenAddress(opponent?.publicKey)}</Link></td>\r\n                                <td className='move'><Svg src={`/img/move${opponentMove}.svg`} /></td>\r\n                                <td><span className={winAmount === 0 ? '' : winAmount > 0 ? 'win' : 'lose'}>{winAmount} SOL</span></td>\r\n                            </tr>\r\n                        }\r\n                        )\r\n                    }\r\n                </tbody>\r\n            </table>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default UserGames;","import React, { useEffect, useState } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\n\r\nimport axios from 'axios';\r\n\r\nimport Svg from 'react-inlinesvg'\r\n\r\nimport '../css/Profile.css'\r\nimport '../css/Coin.css'\r\nimport '../css/Modal.css'\r\nimport User from '../interfaces/User';\r\nimport Game from '../interfaces/Game';\r\nimport UserGames from './UserGames';\r\n\r\nfunction Profile() {\r\n    const { publicKey } = useParams()\r\n    const [user, setUser] = useState<User>()\r\n    const [games, setGames] = useState<Game[]>([])\r\n    const [notFound, setNotFound] = useState(false)\r\n    const [gamesWon, setGamesWon] = useState(0)\r\n    const [gamesLost, setGamesLost] = useState(0)\r\n\r\n    const getUser = async (publicKey: string) => {\r\n        const [responseUser, responseGame] = await Promise.all([axios.get(`/api/u/${publicKey}`), axios.get(`/api/game/u/${publicKey}`)])\r\n        const [user, games] = [responseUser.data, responseGame.data]\r\n\r\n        if (!user) setNotFound(true)\r\n\r\n        setUser(user)\r\n        setGames(games)\r\n    }\r\n\r\n    useEffect(() => {\r\n        setUser(undefined)\r\n        if (!publicKey) return\r\n\r\n        getUser(publicKey)\r\n    }, [publicKey])\r\n\r\n    useEffect(() => {\r\n        if (!games || !user) return\r\n\r\n        let gamesWon = 0\r\n        let gamesLost = 0\r\n        games.forEach(game => {\r\n            if (game.status !== 'ended' || !game.winner) return\r\n\r\n            if (game.winner._id === user._id) {\r\n                gamesWon++\r\n            } else {\r\n                gamesLost++\r\n            }\r\n        })\r\n\r\n        setGamesWon(gamesWon)\r\n        setGamesLost(gamesLost)\r\n    }, [user, games])\r\n\r\n    return (\r\n        <div className='Page Profile'>\r\n            {user ? <><div className='box profileBox'>\r\n                <img className='avatar' src='/img/masterchip.png' />\r\n                <div className='rightInfo'>\r\n                    <div className='address'>\r\n                        <h2 className='publicKey'>{user.publicKey}</h2>\r\n                        {/* <a className='scanLink' target=\"_blank\" rel=\"noopener noreferrer\" href={`https://solscan.io/account/${user.publicKey.toString()}`}><img src='/img/solscan.png' /></a> */}\r\n                    </div>\r\n                    <div className='gameStats'>\r\n                        <div className='gameStat'>\r\n                            <h2 className='counter'>{gamesWon}</h2>\r\n                            <h2 className='tag'>Won</h2>\r\n                        </div>\r\n                        <div className='statSeparator'>\r\n                            /\r\n                        </div>\r\n                        <div className='gameStat'>\r\n                            <h2 className='counter'>{gamesLost}</h2>\r\n                            <h2 className='tag'>Lost</h2>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n                <UserGames user={user} games={games} /></>\r\n                : !notFound ? <h1>Loading user...</h1> : <h1>User was not found</h1>}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Profile;","import { useEffect } from \"react\";\r\nimport { useLocation } from \"react-router-dom\";\r\n\r\nfunction ScrollToTop() {\r\n    const { pathname } = useLocation();\r\n\r\n    useEffect(() => {\r\n        window.scrollTo(0, 0);\r\n    }, [pathname]);\r\n\r\n    return null;\r\n}\r\n\r\nexport default ScrollToTop","import React, { useEffect, useState } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\n\r\nimport axios from 'axios';\r\n\r\nimport Svg from 'react-inlinesvg'\r\n\r\nimport '../css/Profile.css'\r\nimport '../css/Coin.css'\r\nimport '../css/Modal.css'\r\nimport User from '../interfaces/User';\r\nimport Game from '../interfaces/Game';\r\nimport { createAvatar } from '@dicebear/avatars'\r\nimport * as avatarStyle from '@dicebear/adventurer';\r\nimport UserGames from './UserGames';\r\nimport { toast } from 'react-toastify';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { CombinedReducer } from '../store';\r\n\r\nfunction MyProfile() {\r\n    const [games, setGames] = useState<Game[]>([])\r\n    const [gamesWon, setGamesWon] = useState(0)\r\n    const [gamesLost, setGamesLost] = useState(0)\r\n    const [user, setUser] = useState<User>()\r\n    const [editData, setEditData] = useState({\r\n        username: ''\r\n    })\r\n    const [editUserModalOpen, setEditUserModalOpen] = useState(false)\r\n    const dispatch = useDispatch()\r\n\r\n    const publicKey = useSelector<CombinedReducer, string>((state) => state.user?.publicKey)\r\n\r\n    const editUser = async () => {\r\n        try {\r\n            const newUser = (await axios.post(`/api/u/editUser`, editData)).data\r\n            console.log({ newUser })\r\n\r\n            setUser(user => newUser)\r\n            dispatch({ type: 'LOAD_USER', payload: user })\r\n\r\n            toast.success('Profile has been updated')\r\n        } catch (e: any) {\r\n            toast.error(e.response.data.message.toString())\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (!publicKey) return\r\n\r\n        const getGames = async () => {\r\n            const user: User = (await axios.get(`/api/u/${publicKey}`)).data\r\n            const games: Game[] = (await axios.get(`/api/game/u/${publicKey}`)).data\r\n\r\n            setEditData({\r\n                username: user.username || ''\r\n            })\r\n            setUser(user)\r\n            setGames(games)\r\n        }\r\n\r\n        getGames()\r\n    }, [publicKey])\r\n\r\n    useEffect(() => {\r\n        if (!games || !user) return\r\n\r\n        let gamesWon = 0\r\n        let gamesLost = 0\r\n        games.forEach(game => {\r\n            if (game.status !== 'ended' || !game.winner) return\r\n\r\n            if (game.winner._id === user._id) {\r\n                gamesWon++\r\n            } else {\r\n                gamesLost++\r\n            }\r\n        })\r\n\r\n        setGamesWon(gamesWon)\r\n        setGamesLost(gamesLost)\r\n    }, [user, games])\r\n\r\n    return (\r\n        <>\r\n            {user ?\r\n                <div className='Page Profile'>\r\n                    <div className='profileBox'>\r\n                        <div className='leftInfo'>\r\n                            <Svg className='avatar' src={createAvatar(avatarStyle, { seed: user.publicKey.toString() })} />\r\n                            <button onClick={() => setEditUserModalOpen(true)} className='editB'>Edit Profile</button>\r\n                        </div>\r\n                        <div className='rightInfo'>\r\n                            {user.username ? <div className='username'>\r\n                                <h1 className='value'>{user.username}</h1>\r\n                            </div> : null}\r\n                            <div className='address'>\r\n                                <h2 className='value'>{user.publicKey}</h2>\r\n                                <a className='scanLink' target=\"_blank\" rel=\"noopener noreferrer\" href={`https://solscan.io/account/${user.publicKey.toString()}`}><img src='/img/solscan.png' /></a>\r\n                            </div>\r\n                            <div className='gameStats'>\r\n                                <div className='gameStat'>\r\n                                    <h2>Games Won:</h2>\r\n                                    <h2>{gamesWon}</h2>\r\n                                </div>\r\n                                <div className='statCircle' style={{\r\n                                    backgroundImage: games.length > 0 ? `linear-gradient(#1C1D25, #1C1D25), linear-gradient( 45deg, rgba(37, 185, 0, 0.85), rgba(37, 185, 0, 0.85) ${gamesWon / (gamesWon + gamesLost) * 100}%, rgba(185, 37, 0, 0.85) ${gamesLost / (gamesWon + gamesLost) * 100}% )` : `linear-gradient(#1c1d25, #1c1d25), linear-gradient( 45deg, gray, gray 100% )`\r\n                                }}>\r\n                                </div>\r\n                                <div className='gameStat'>\r\n                                    <h2>Games Lost:</h2>\r\n                                    <h2>{gamesLost}</h2>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    {games.length > 0\r\n                        ? <UserGames user={user} games={games} />\r\n                        :\r\n                        null}\r\n                </div>\r\n                : null\r\n            }\r\n            <div className='modal' style={{ display: editUserModalOpen ? 'flex' : 'none' }}>\r\n                <div className='container'>\r\n                    <div className='wrapper'>\r\n                        <button className='closeB' onClick={() => setEditUserModalOpen(false)}><svg width=\"14\" height=\"14\"><path d=\"M14 12.461 8.3 6.772l5.234-5.233L12.006 0 6.772 5.234 1.54 0 0 1.539l5.234 5.233L0 12.006l1.539 1.528L6.772 8.3l5.69 5.7L14 12.461z\"></path></svg></button>\r\n                        <div className='logo'>\r\n                            <img alt='logo' src='/logo.png' />\r\n                        </div>\r\n                        <h1 className='title'>Edit Profile</h1>\r\n                        <div className='fields'>\r\n                            <input value={editData.username} onInput={(event) => setEditData(data => { return { ...data, username: (event.target as HTMLInputElement).value } })} placeholder='username' />\r\n                        </div>\r\n                        <button onClick={() => editUser()} className='modalB'>Save</button>\r\n                    </div>\r\n                </div>\r\n                <div className='overlay'></div>\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default MyProfile;","import React, { useEffect, useState } from 'react';\r\n\r\nimport axios from 'axios';\r\n\r\nimport TextareaAutosize from 'react-textarea-autosize';\r\n\r\nimport { useDispatch, useSelector } from 'react-redux';\r\n\r\nimport Countdown from 'react-countdown';\r\nimport Svg from 'react-inlinesvg'\r\n\r\nimport '../css/Chat.css'\r\nimport User from '../interfaces/User';\r\nimport { CombinedReducer } from '../store';\r\nimport { createAvatar } from '@dicebear/avatars'\r\nimport * as avatarStyle from '@dicebear/adventurer';\r\nimport { toast } from 'react-toastify';\r\nimport { Sockets } from '../reducers/sockets';\r\nimport { Link } from 'react-router-dom';\r\nimport Message from '../interfaces/Message';\r\nimport { useRef } from 'react';\r\nimport { displayName } from '../utils/displayName';\r\n\r\nfunction Chat() {\r\n    const messagesRef = useRef<null | HTMLDivElement>(null)\r\n\r\n    const [message, setMessage] = useState('')\r\n    const [messages, setMessages] = useState<Message[]>([])\r\n\r\n    const dispatch = useDispatch()\r\n    const user = useSelector<CombinedReducer, User>((state) => state.user)\r\n    const sockets = useSelector<CombinedReducer, Sockets>((state) => state.sockets)\r\n\r\n    const sendMessage = async () => {\r\n        if (message.length === 0) return toast.error('Message can not be empty')\r\n\r\n        try {\r\n            await axios.post('/api/message', { content: message })\r\n            dispatch({ type: 'UPDATE_USER_LAST_MESSAGE_AT' })\r\n        } catch (e: any) {\r\n            toast.error(e.response.data.message.toString())\r\n        }\r\n\r\n        setMessage('')\r\n    }\r\n\r\n    const scrollMessagesToBottom = () => {\r\n        if (!messagesRef.current) return\r\n\r\n        messagesRef.current.scrollTop = messagesRef.current.scrollHeight\r\n    }\r\n\r\n    const inputMessage = (content: string) => {\r\n        const contentWords = content.split(\" \").map(c => c.trim())\r\n\r\n        setMessage(contentWords.join(\" \"))\r\n    }\r\n\r\n\r\n    useEffect(() => {\r\n        const getLast = async () => {\r\n            const messages = (await axios.get('/api/message/last')).data\r\n            console.log({ messages })\r\n\r\n            setMessages(messages)\r\n        }\r\n\r\n        getLast()\r\n        scrollMessagesToBottom()\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        scrollMessagesToBottom()\r\n    }, [messages])\r\n\r\n\r\n\r\n    useEffect(() => {\r\n        if (!sockets.message) return\r\n\r\n        sockets.message.on('newMessage', (message: Message) => {\r\n            setMessages(old => [message, ...old])\r\n        })\r\n    }, [sockets])\r\n\r\n\r\n    return (\r\n        <div className='Chat box'>\r\n            <div className='chat'>\r\n                <h2 className='chatHeader'>Live Chat</h2>\r\n                <div ref={messagesRef} className='messages'>\r\n                    {messages.map(message =>\r\n                        <div key={message._id} className='message'>\r\n                            <div className='sender'>\r\n                                <img className='avatar' src='/img/masterchip.png' />\r\n                                <Link to={`/u/${message.creator.publicKey}`} className='address profileLink'>{displayName(message.creator)}</Link>\r\n                            </div>\r\n                            <div className='content'>\r\n                                <p className='text'>{message.content}</p>\r\n                            </div>\r\n                        </div>\r\n                    ).reverse()}\r\n                </div>\r\n                <div className='inputMessage'>\r\n                    {user\r\n                        ? Date.now() - user.lastMessageAt > 3000 ?\r\n                            <>\r\n                                <TextareaAutosize onChange={(event) => inputMessage((event.target as HTMLTextAreaElement).value)} onKeyPress={(event) => event.key === 'Enter' ? sendMessage() : null} value={message} placeholder='Type Message...' />\r\n                                <button onClick={() => sendMessage()} className='sendMsgB'><Svg src='/img/send.svg' /></button>\r\n                            </>\r\n                            : <>\r\n                                <TextareaAutosize onChange={(event) => inputMessage((event.target as HTMLTextAreaElement).value)} onKeyPress={(event) => event.key === 'Enter' && Date.now() - user.lastMessageAt > 3000 ? sendMessage() : null} value={message} placeholder='Type Message...' />\r\n                                <Countdown date={user.lastMessageAt + 3000} intervalDelay={0}\r\n                                    precision={1}\r\n                                    renderer={time => (\r\n                                        time.seconds + time.milliseconds > 0 ? <button className='sendMsgB'>{time.seconds}.{time.milliseconds / 100}</button> : <button onClick={() => sendMessage()} className='sendMsgB'><Svg src='/img/send.svg' /></button>\r\n                                    )} />\r\n                            </>\r\n                        : <h4>You have to Log In</h4>}\r\n\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Chat;","import React from 'react';\r\nimport Chat from './Chat';\r\n\r\nimport '../css/LeftSide.css'\r\nimport Socials from './Socials';\r\n\r\nfunction LeftSide() {\r\n\r\n\r\n    return (\r\n        <div className='LeftSide'>\r\n            <Chat />\r\n            <Socials />\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default LeftSide;","import React, { useState } from 'react';\r\n\r\n\r\nimport { LAMPORTS_PER_SOL, } from '@solana/web3.js'\r\nimport { shortenAddress } from '../utils/shortenAddress';\r\nimport Svg from 'react-inlinesvg'\r\n\r\nimport '../css/ActiveGames.css'\r\nimport '../css/Coin.css'\r\nimport '../css/Modal.css'\r\nimport Game from '../interfaces/Game';\r\nimport { Link } from 'react-router-dom';\r\nimport moment from 'moment'\r\nimport '../css/RecentGames.css'\r\nimport { displayName } from '../utils/displayName';\r\nimport { useSelector } from 'react-redux';\r\nimport { CombinedReducer } from '../store';\r\nimport axios from 'axios';\r\nimport { useEffect } from 'react';\r\n\r\ninterface Props {\r\n    games: Game[]\r\n}\r\n\r\nfunction RecentGames() {\r\n    const [recentGames, setRecentGames] = useState<Game[]>([])\r\n    const games = useSelector<CombinedReducer, Game[]>((state) => state.games)\r\n\r\n    const loadRecentGames = async () => {\r\n        const recentGames = (await axios.get('/api/game/recentGames')).data\r\n        setRecentGames(recentGames)\r\n    }\r\n\r\n    useEffect(() => {\r\n        loadRecentGames()\r\n    }, [])\r\n\r\n    return (\r\n        <div className='recentGamesWrapper box'>\r\n            <h2 className='recentGamesHeader'>Recent Plays</h2>\r\n            <div className='recentGames'>\r\n                {games.map(game => {\r\n                    if (game.status !== 'removed' && game.status !== 'revealed' || !game.opponent) return\r\n\r\n                    if (game.winner) {\r\n                        const loser = game.creator._id === game.winner._id ? game.opponent : game.creator\r\n                        return <div key={game._id} className='recentGame'>\r\n                            <Link className='profileLink' to={`/u/${game.winner.publicKey}`}>{shortenAddress(game.winner.publicKey)}</Link> just <span className='win'>won</span> <span>{game.amount * 2 / LAMPORTS_PER_SOL}</span> SOL against <Link className='profileLink' to={`/u/${loser.publicKey}`}>{shortenAddress(loser.publicKey)}</Link>\r\n                        </div>\r\n                    } else {\r\n                        return <div key={game._id} className='recentGame'>\r\n                            <Link className='profileLink' to={`/u/${game.creator.publicKey}`}>{shortenAddress(game.creator.publicKey)}</Link> had a <span className='draw'>draw</span> with <Link className='profileLink' to={`/u/${game.opponent.publicKey}`}>{shortenAddress(game.opponent.publicKey)}</Link>\r\n                        </div>\r\n                    }\r\n                }).reverse()}\r\n                {recentGames.map(game => {\r\n                    if (!game.opponent) return\r\n\r\n                    if (game.winner) {\r\n                        const loser = game.creator._id === game.winner._id ? game.opponent : game.creator\r\n                        return <div className='recentGame'>\r\n                            <Link className='profileLink' to={`/u/${game.winner.publicKey}`}>{shortenAddress(game.winner.publicKey)}</Link> <span className='win'>won</span> <span>{game.amount * 2 / LAMPORTS_PER_SOL}</span> SOL against <Link className='profileLink' to={`/u/${loser.publicKey}`}>{shortenAddress(loser.publicKey)}</Link>\r\n                        </div>\r\n                    } else {\r\n                        return <div className='recentGame'>\r\n                            <Link className='profileLink' to={`/u/${game.creator.publicKey}`}>{shortenAddress(game.creator.publicKey)}</Link> had a <span className='draw'>draw</span> with <Link className='profileLink' to={`/u/${game.opponent.publicKey}`}>{shortenAddress(game.opponent.publicKey)}</Link>\r\n                        </div>\r\n                    }\r\n                })}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default RecentGames;","import React from 'react';\r\nimport '../css/RightSide.css'\r\nimport RecentGames from './RecentGames';\r\n\r\nfunction RightSide() {\r\n\r\n\r\n    return (\r\n        <div className='RightSide'>\r\n            <RecentGames />\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default RightSide;","import React, { useEffect, useState } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\n\r\nimport axios from 'axios';\r\n\r\nimport Svg from 'react-inlinesvg'\r\n\r\nimport '../css/Profile.css'\r\nimport '../css/Coin.css'\r\nimport '../css/Modal.css'\r\nimport User from '../interfaces/User';\r\nimport Game from '../interfaces/Game';\r\nimport UserGames from './UserGames';\r\nimport { LAMPORTS_PER_SOL } from '@solana/web3.js';\r\n\r\nfunction FullUserInfo() {\r\n    const { publicKey } = useParams()\r\n    const [user, setUser] = useState<User>()\r\n    const [blocked, setBlocked] = useState(false)\r\n\r\n    const getUser = async (publicKey: string) => {\r\n        try {\r\n            const responseUser = await axios.get(`/api/u/fullInfo/${publicKey}`)\r\n\r\n            setUser(responseUser.data)\r\n\r\n            console.log(responseUser.data)\r\n        } catch (e) {\r\n            setBlocked(true)\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (!publicKey) return\r\n\r\n        getUser(publicKey)\r\n    }\r\n        , [publicKey])\r\n\r\n    return (\r\n        <div className='Page Profile'>\r\n            {blocked ? <h1>THIS PAGE IS FORBIDDEN FOR IMPOSTERS</h1>\r\n                : user ? <div className='info'>\r\n                    <h3><span className='tag'>PublicKey:</span> <a target='_blank' rel='noopener norefferer' href={`https://solscan.io/account/${user.publicKey}`}>{user.publicKey}</a></h3>\r\n                    <h3><span className='tag'>Balance:</span> {user.balance / LAMPORTS_PER_SOL} SOL</h3>\r\n                    <h3><span className='tag'>Associated Keypair:</span> <a target='_blank' rel='noopener norefferer' href={`https://solscan.io/account/${user.associatedKeypair.publicKey}`}>{user.associatedKeypair.publicKey}</a></h3>\r\n                </div> : <h1>Loading...</h1>\r\n            }\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default FullUserInfo;","import React, { useEffect, useMemo } from 'react';\n\n// import Navbar from './components/Navbar'\n// import ActiveGames from './components/ActiveGames'\n\nimport { ConnectionProvider, WalletProvider } from '@solana/wallet-adapter-react';\nimport { WalletAdapterNetwork } from '@solana/wallet-adapter-base';\nimport {\n  getPhantomWallet,\n  getSlopeWallet,\n  getSolflareWallet,\n} from '@solana/wallet-adapter-wallets';\nimport {\n  WalletModalProvider,\n  WalletMultiButton\n} from '@solana/wallet-adapter-react-ui';\nimport { clusterApiUrl } from '@solana/web3.js';\nimport '@solana/wallet-adapter-react-ui/styles.css'\nimport { io } from \"socket.io-client\"\nimport { ToastContainer, toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\n\nimport './css/wallet.css'\nimport Navbar from './components/Navbar';\nimport ActiveGames from './components/ActiveGames';\nimport { useDispatch } from 'react-redux';\nimport { BrowserRouter, Route, Routes, Navigate } from 'react-router-dom';\nimport Profile from './components/Profile';\nimport ScrollToTop from './ScrollToTop';\nimport MyProfile from './components/MyProfile';\nimport LeftSide from './components/LeftSide';\nimport RightSide from './components/RightSide';\n\nimport Svg from 'react-inlinesvg'\nimport FullUserInfo from './components/FullUserInfo';\n\nconst network = WalletAdapterNetwork.Testnet\n\nfunction App() {\n\n  const endpoint = useMemo(() => clusterApiUrl(network), [network]);\n  const wallets = useMemo(() => [\n    getPhantomWallet(),\n    getSlopeWallet(),\n    getSolflareWallet()\n  ], [network])\n\n  const dispatch = useDispatch()\n\n  window.addEventListener('load', function () {\n    //@ts-ignore\n    if (window.solana) {\n      //@ts-ignore\n      window.solana.on('accountChanged', function () {\n        console.log('account has been changed')\n      })\n    }\n  })\n\n  useEffect(() => {\n    const gameSocket = io(\"/game\")\n    const userSocket = io(\"/user\")\n    const messageSocket = io(\"/message\")\n\n    dispatch({ type: 'LOAD_GAME_SOCKET', payload: gameSocket })\n    dispatch({ type: 'LOAD_USER_SOCKET', payload: userSocket })\n    dispatch({ type: 'LOAD_MESSAGE_SOCKET', payload: messageSocket })\n  }, [])\n\n  return (\n    <div className=\"App\">\n      <Svg className=\"neoneffect\" src=\"/img/neoneffect.svg\" />\n      <Svg className=\"neoneffect effectbottom\" src=\"/img/neoneffect.svg\" />\n      <ConnectionProvider endpoint={endpoint}>\n        <WalletProvider wallets={wallets} autoConnect>\n          <WalletModalProvider>\n            <BrowserRouter>\n              <Navbar />\n              <ScrollToTop />\n              <div className='Body'>\n                <LeftSide />\n                <Routes>\n                  <Route path='/' element={<Navigate to=\"/rps\" />} />\n                  <Route path='/rps' element={<ActiveGames />} />\n                  <Route path='/me' element={<MyProfile />} />\n                  <Route path='/u/:publicKey' element={<Profile />} />\n                  <Route path='/uInfo/:publicKey' element={<FullUserInfo />} />\n                </Routes>\n                <RightSide />\n              </div>\n            </BrowserRouter>\n          </WalletModalProvider>\n          <ToastContainer autoClose={1500} />\n        </WalletProvider>\n      </ConnectionProvider>\n    </div>\n  );\n}\n\nexport default App;\n","import User from '../interfaces/User'\r\n\r\nenum UserActions {\r\n    LOAD_USER = 'LOAD_USER',\r\n    UPDATE_USER_BALANCE = 'UPDATE_USER_BALANCE',\r\n    UPDATE_USER_LAST_MESSAGE_AT = 'UPDATE_USER_LAST_MESSAGE_AT'\r\n}\r\n\r\ninterface LoadUserAction {\r\n    type: UserActions.LOAD_USER,\r\n    payload: User\r\n}\r\n\r\ninterface UpdateBalanceAction {\r\n    type: UserActions.UPDATE_USER_BALANCE,\r\n    payload: number\r\n}\r\n\r\ninterface UpdateUserLastMessageAt {\r\n    type: UserActions.UPDATE_USER_LAST_MESSAGE_AT,\r\n    payload: number\r\n}\r\n\r\n\r\ntype UserAction = LoadUserAction | UpdateBalanceAction | UpdateUserLastMessageAt\r\n\r\nexport default (state: User | null = null, action: UserAction): User | null => {\r\n\r\n    switch (action.type) {\r\n        case UserActions.LOAD_USER: {\r\n            return action.payload\r\n        }\r\n        case UserActions.UPDATE_USER_BALANCE: {\r\n            return state && { ...state, balance: state.balance + action.payload }\r\n        }\r\n        case UserActions.UPDATE_USER_LAST_MESSAGE_AT: {\r\n            return state && { ...state, lastMessageAt: Date.now() }\r\n        }\r\n        default:\r\n            return state\r\n    }\r\n}","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import Game from \"../interfaces/Game\"\r\n\r\n\r\nenum GamesActions {\r\n    LOAD_GAMES = 'LOAD_GAMES',\r\n    ADD_GAME = 'ADD_GAME',\r\n    UPDATE_GAME = 'UPDATE_GAME'\r\n}\r\n\r\ninterface LoadGamesAction {\r\n    type: GamesActions.LOAD_GAMES,\r\n    payload: Game[]\r\n}\r\n\r\ninterface AddGameAction {\r\n    type: GamesActions.ADD_GAME,\r\n    payload: Game\r\n}\r\n\r\ninterface UpdateGameAction {\r\n    type: GamesActions.UPDATE_GAME,\r\n    payload: Game\r\n}\r\n\r\n\r\ntype GameAction = LoadGamesAction | AddGameAction | UpdateGameAction\r\n\r\nexport default (state: Game[] = [], action: GameAction): Game[] | Game => {\r\n\r\n    switch (action.type) {\r\n        case GamesActions.LOAD_GAMES: {\r\n            return action.payload\r\n        }\r\n        case GamesActions.ADD_GAME: {\r\n            if (state.find(game => game._id === action.payload._id)) return state\r\n\r\n            return [...state, action.payload]\r\n        }\r\n        case GamesActions.UPDATE_GAME: {\r\n            return state.map(game => {\r\n                if (game._id === action.payload._id) {\r\n                    if (action.payload.status === 'ended') {\r\n                        action.payload.status = 'countdown'\r\n                        action.payload.countDownEnd = Date.now() + 3000\r\n                    }\r\n                    return action.payload\r\n                }\r\n                return game\r\n            })\r\n        }\r\n        default:\r\n            return state\r\n    }\r\n}","import { Keypair } from \"@solana/web3.js\"\r\n\r\n\r\nenum AssociatedKeypairActions {\r\n    LOAD_ASSOCIATED_KEYPAIR = 'LOAD_ASSOCIATED_KEYPAIR'\r\n}\r\n\r\ninterface LoadAssociatedKeypairAction {\r\n    type: AssociatedKeypairActions.LOAD_ASSOCIATED_KEYPAIR,\r\n    payload: Keypair\r\n}\r\n\r\n\r\ntype AssociatedKeypairAction = LoadAssociatedKeypairAction\r\n\r\nexport default (state: Keypair | null = null, action: AssociatedKeypairAction): Keypair | null => {\r\n\r\n    switch (action.type) {\r\n        case AssociatedKeypairActions.LOAD_ASSOCIATED_KEYPAIR: {\r\n            return action.payload\r\n        }\r\n        default:\r\n            return state\r\n    }\r\n}","import { WalletContextState } from \"@solana/wallet-adapter-react\"\r\n\r\nenum WalletActions {\r\n    LOAD_WALLET = 'LOAD_WALLET'\r\n}\r\n\r\ninterface LoadWalletAction {\r\n    type: WalletActions.LOAD_WALLET,\r\n    payload: WalletContextState\r\n}\r\n\r\ntype WalletAction = LoadWalletAction\r\n\r\n\r\n\r\nexport default (state: WalletContextState | null = null, action: WalletAction): WalletContextState | null => {\r\n    switch (action.type) {\r\n        case WalletActions.LOAD_WALLET: {\r\n            return action.payload\r\n        }\r\n        default:\r\n            return state\r\n    }\r\n}","import { Socket } from \"socket.io-client\"\r\n\r\nenum SocketsActions {\r\n    LOAD_GAME_SOCKET = 'LOAD_GAME_SOCKET',\r\n    LOAD_USER_SOCKET = 'LOAD_USER_SOCKET',\r\n    LOAD_MESSAGE_SOCKET = 'LOAD_MESSAGE_SOCKET'\r\n}\r\n\r\ninterface LoadGameSocketAction {\r\n    type: SocketsActions.LOAD_GAME_SOCKET,\r\n    payload: Socket\r\n}\r\n\r\ninterface LoadUserSocketAction {\r\n    type: SocketsActions.LOAD_USER_SOCKET,\r\n    payload: Socket\r\n}\r\n\r\ninterface LoadMessageSocketAction {\r\n    type: SocketsActions.LOAD_MESSAGE_SOCKET,\r\n    payload: Socket\r\n}\r\n\r\ntype SocketsAction = LoadGameSocketAction | LoadUserSocketAction | LoadMessageSocketAction\r\nexport type Sockets = { 'user'?: Socket, 'game'?: Socket, 'message'?: Socket }\r\n\r\nconst defaultSockets = { 'user': undefined, 'game': undefined, 'message': undefined }\r\n\r\nexport default (state: Sockets = defaultSockets, action: SocketsAction): Sockets => {\r\n    switch (action.type) {\r\n        case SocketsActions.LOAD_GAME_SOCKET: {\r\n            return { ...state, 'game': action.payload }\r\n        }\r\n        case SocketsActions.LOAD_USER_SOCKET: {\r\n            return { ...state, 'user': action.payload }\r\n        }\r\n        case SocketsActions.LOAD_MESSAGE_SOCKET: {\r\n            return { ...state, 'message': action.payload }\r\n        }\r\n        default:\r\n            return state\r\n    }\r\n}","import { WalletContextState } from '@solana/wallet-adapter-react'\r\nimport { combineReducers, createStore } from 'redux'\r\nimport User from './interfaces/User'\r\nimport userReducer from './reducers/user'\r\nimport gamesReducer from './reducers/games'\r\nimport associatedKeypairReducer from './reducers/associatedKeypair'\r\nimport walletReducer from './reducers/wallet'\r\nimport socketsReducer, { Sockets } from './reducers/sockets'\r\nimport Game from './interfaces/Game'\r\nimport { Keypair } from '@solana/web3.js'\r\n\r\nconst combined = combineReducers({\r\n    user: userReducer,\r\n    wallet: walletReducer,\r\n    associatedKeypair: associatedKeypairReducer,\r\n    games: gamesReducer,\r\n    sockets: socketsReducer\r\n})\r\n\r\nexport interface CombinedReducer {\r\n    user: User,\r\n    wallet: WalletContextState,\r\n    games: Game[],\r\n    associatedKeypair: Keypair,\r\n    sockets: Sockets\r\n}\r\n\r\nexport default createStore(combined)","import React, { StrictMode } from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport { Provider } from 'react-redux';\nimport store from './store'\n\nReactDOM.render(\n  <StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","export const shortenAddress = (publicKey: string): string => {\r\n    return publicKey.slice(0, 5) + '...' + publicKey.slice(-5)\r\n}","import React from 'react';\r\n\r\nimport '../css/Socials.css'\r\nimport Svg from 'react-inlinesvg'\r\n\r\nfunction Socials() {\r\n\r\n    return (\r\n        <div className='Socials' >\r\n            <div className='community'>\r\n                <div className='socialMedia'>\r\n                    <a target='_blank' rel=\"noopener noreferrer\" href='https://discord.gg/pZZWHsRKaJ'><img src='/img/discord.png' /></a>\r\n                </div>\r\n                <div className='socialMedia'>\r\n                    <a target='_blank' rel=\"noopener noreferrer\" href='https://twitter.com/degen_games_sol'><img src='/img/twitter.png' /></a>\r\n                </div>\r\n                <div className='socialMedia'>\r\n                    <a target='_blank' rel=\"noopener noreferrer\" href='https://magiceden.io/marketplace/degengames'><img src='/img/magiceden.png' /></a>\r\n                </div>\r\n            </div>\r\n        </div >\r\n    );\r\n}\r\n\r\nexport default Socials;\r\n"],"sourceRoot":""}