(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{124:function(e,t,c){},131:function(e,t,c){"use strict";(function(e){var n=c(3),a=c.n(n),s=c(5),r=c(6),i=c(2),l=c(89),o=c(20),j=c.n(o),u=c(21),b=c(13),d=c(59),O=(c(221),c(42),c(222),c(16)),h=c(26),m=c(31),p=c(19),x=c(17),f=c(92),v=c.n(f),g=c(133),N=c(27),y=c(70),w=c(1),S=Uint8Array.from(e.from("I agree with Terms & Services of solasphere")),_=new b.a(Object(b.g)("testnet"),"confirmed"),A=new b.d("68a5pCnjnshTw3JXmht5j9rCJH9e9mzmguwQE8LighJX");t.a=function(){var e=Object(l.b)(),t=Object(i.useState)(!1),c=Object(r.a)(t,2),n=c[0],o=c[1],f=Object(i.useState)(!1),k=Object(r.a)(f,2),E=k[0],C=k[1],L=Object(i.useState)(!1),K=Object(r.a)(L,2),T=K[0],P=K[1],D=Object(i.useState)(!1),M=Object(r.a)(D,2),B=M[0],U=M[1],F=Object(i.useState)(0),G=Object(r.a)(F,2),I=G[0],R=G[1],W=Object(i.useState)("none"),H=Object(r.a)(W,2),Y=H[0],z=H[1],J=Object(i.useState)(!1),q=Object(r.a)(J,2),V=q[0],X=q[1],Q=Object(i.useState)(0),Z=Object(r.a)(Q,2),$=Z[0],ee=Z[1],te=Object(i.useState)(0),ce=Object(r.a)(te,2),ne=ce[0],ae=ce[1],se=Object(i.useState)("0"),re=Object(r.a)(se,2),ie=re[0],le=re[1],oe=Object(i.useState)("none"),je=Object(r.a)(oe,2),ue=je[0],be=je[1],de=Object(i.useState)(0),Oe=Object(r.a)(de,2),he=Oe[0],me=Oe[1],pe=Object(i.useState)(null),xe=Object(r.a)(pe,2),fe=xe[0],ve=xe[1],ge=Object(u.b)(),Ne=Object(u.c)((function(e){return e.user})),ye=Object(u.c)((function(e){return e.associatedKeypair})),we=Object(u.c)((function(e){return e.sockets})),Se=function(){var t=Object(s.a)(a.a.mark((function t(c){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log({wallet:e}),ge({type:"LOAD_WALLET",payload:e}),ge({type:"LOAD_USER",payload:c}),_e(),Ae(c),t.abrupt("return",C(!0));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),_e=function(){var e=Object(s.a)(a.a.mark((function e(){var t,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.get("/api/u/associatedKeypair",{withCredentials:!0});case 2:t=e.sent.data,c=b.b.fromSecretKey(Uint8Array.from(t.secretKey)),ge({type:"LOAD_ASSOCIATED_KEYPAIR",payload:c});case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ae=function(e){we&&we.user&&(we.user.emit("subscribeToProfile",e._id),we.user.on("balanceChange",(function(e,t){ge({type:"UPDATE_USER_BALANCE",payload:e}),console.log({amount:e,fromDeposit:t,depositModalOpen:T}),t&&z("validated")})))},ke=function(){var t=Object(s.a)(a.a.mark((function t(){var c;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e&&e.publicKey&&I){t.next=2;break}return t.abrupt("return");case 2:if(!(I<.01*b.c)){t.next=4;break}return t.abrupt("return",x.b.error("Minimum deposit amount is 0.01"));case 4:return t.prev=4,c=(new b.f).add(b.e.transfer({fromPubkey:e.publicKey,toPubkey:A,lamports:I})),t.next=8,e.sendTransaction(c,_);case 8:console.log({transaction:c}),z("sent"),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(4),x.b.error(t.t0.response.data.message.toString()),z("failed");case 16:case"end":return t.stop()}}),t,null,[[4,12]])})));return function(){return t.apply(this,arguments)}}(),Ee=function(){var t=Object(s.a)(a.a.mark((function t(){var c,n;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e&&e.publicKey){t.next=2;break}return t.abrupt("return");case 2:return be("withdrawing"),t.next=5,_.getBalance(ye.publicKey);case 5:return c=t.sent,(n=(new b.f).add(b.e.transfer({fromPubkey:ye.publicKey,toPubkey:new b.d(Ne.publicKey),lamports:c}))).feePayer=new b.d(Ne.publicKey),t.next=10,e.sendTransaction(n,_,{signers:[ye]});case 10:ae(c),be("withdrawn");case 12:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),Ce=function(){var t=Object(s.a)(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e&&e.publicKey&&$){t.next=2;break}return t.abrupt("return");case 2:if(!($<.01*b.c)){t.next=4;break}return t.abrupt("return",x.b.error("Minimum withdraw is 0.01 SOLs"));case 4:if(!($>Ne.balance)){t.next=6;break}return t.abrupt("return",x.b.error("Balance needs to be higher than the withdraw amount"));case 6:return t.prev=6,be("withdrawing"),me($),t.next=11,j.a.post("/api/u/requestWithdraw",{amount:$});case 11:return t.next=13,_.getBalance(ye.publicKey);case 13:if(t.t0=t.sent,t.t1=$,!(t.t0<t.t1)){t.next=20;break}return t.next=18,new Promise((function(e){return setTimeout((function(){return e(1)}),100)}));case 18:t.next=11;break;case 20:Ee(),t.next=26;break;case 23:t.prev=23,t.t2=t.catch(6),x.b.error(t.t2.response.data.message.toString());case 26:case"end":return t.stop()}}),t,null,[[6,23]])})));return function(){return t.apply(this,arguments)}}(),Le=function(){var e=Object(s.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_.getBalance(ye.publicKey));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ke=function(){var e=Object(s.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Le();case 2:(t=e.sent)>.01?(me(t),be("hasPending")):be("none"),X(!0);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){(function(){var e=Object(s.a)(a.a.mark((function e(t){var c,s,r,i,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t&&t.signMessage&&t.publicKey&&!n){e.next=3;break}return e.abrupt("return");case 3:return o(!0),e.next=6,j.a.get("/api/auth/state");case 6:if(c=e.sent.data,s=c.authenticated,r=c.user,console.log({authenticated:s}),!s){e.next=18;break}if(r.publicKey!==t.publicKey.toBase58()){e.next=15;break}return e.next=14,Se(r);case 14:return e.abrupt("return");case 15:return console.log("PUBLIC KEYS ARE NOT THE SAME!"),e.next=18,j.a.get("/api/auth/logout");case 18:return i=t.publicKey.toBytes(),e.next=21,t.signMessage(S);case 21:return l=e.sent,e.next=24,j.a.post("/api/auth/login",{publicKey:Array.from(i),signedMessage:Array.from(l)},{withCredentials:!0});case 24:return r=e.sent.data,e.next=27,Se(r);case 27:e.next=33;break;case 29:e.prev=29,e.t0=e.catch(0),x.b.error(e.t0.response.data.message.toString()),console.log(e.t0);case 33:case"end":return e.stop()}}),e,null,[[0,29]])})));return function(t){return e.apply(this,arguments)}})()(e)}),[e]),Object(i.useEffect)((function(){Ne&&(null!=fe&&(console.log("Balance Update!",Ne.balance-fe),Ne.balance-fe>=0?le("1"):le("-1")),ve(Ne.balance))}),[null===Ne||void 0===Ne?void 0:Ne.balance]),Object(w.jsxs)("div",{className:"Navbar",children:[Object(w.jsx)(g.a,{}),Object(w.jsxs)("div",{className:"navbar",children:[Object(w.jsxs)("div",{className:"left",children:[Object(w.jsxs)(p.b,{to:"/",className:"logo",children:[Object(w.jsx)("img",{src:"/logo.png"}),Object(w.jsx)("h3",{className:"title",children:"solasphere"})]}),Object(w.jsx)("div",{className:"navLinks",children:Object(w.jsx)(p.c,{to:"/coinflip",className:function(e){return e.isActive?"activeNavLink":"inactiveNavLink"},children:Object(w.jsx)("p",{className:"title",children:"Coinflip"})})})]}),Object(w.jsxs)("div",{onClick:function(){return U(!B)},className:B?"toggleMenu open":"toggleMenu",children:[Object(w.jsx)("span",{}),Object(w.jsx)("span",{}),Object(w.jsx)("span",{})]}),E&&Ne?Object(w.jsxs)("div",{className:"user",children:[Object(w.jsxs)("div",{className:"balance",children:[Object(w.jsx)(O.a,{src:"/img/coins.svg"}),Object(w.jsx)("h4",{"data-balancechanged":ie,onAnimationEnd:function(){return le("0")},className:"amount",children:Number(((null===Ne||void 0===Ne?void 0:Ne.balance)/b.c).toFixed(5))})]}),Object(w.jsx)("button",{onClick:function(){P(!0),z("none")},className:"depositB",children:"Deposit"}),Object(w.jsx)("button",{onClick:function(){return Ke()},className:"withdrawB",children:"Withdraw"}),Object(w.jsxs)(p.b,{to:"/me",className:"profile",children:[Object(w.jsx)(O.a,{src:Object(h.createAvatar)(m,{seed:Ne.publicKey})}),Object(w.jsx)("h4",{className:"name",children:Object(N.a)(Ne)})]})]}):Object(w.jsx)(d.b,{})]}),Object(w.jsx)("div",{className:"mobile_user_wrapper",children:E&&Ne?Object(w.jsxs)("div",{className:"mobile_user",children:[Object(w.jsxs)("div",{className:"balance",children:[Object(w.jsx)(O.a,{src:"/img/coins.svg"}),Object(w.jsx)("h4",{"data-balancechanged":ie,onAnimationEnd:function(){return le("0")},className:"amount",children:Number(((null===Ne||void 0===Ne?void 0:Ne.balance)/b.c).toFixed(5))})]}),Object(w.jsx)("button",{onClick:function(){P(!0),z("none")},className:"depositB"}),Object(w.jsx)("button",{onClick:function(){return Ke()},className:"withdrawB"}),Object(w.jsx)(p.b,{to:"/me",className:"profile",children:Object(w.jsx)(O.a,{src:Object(h.createAvatar)(m,{seed:Ne.publicKey})})})]}):Object(w.jsx)("div",{className:"mobile_user",children:Object(w.jsx)(d.b,{})})}),Object(w.jsxs)("div",{className:"modal",style:{display:T?"flex":"none"},children:[Object(w.jsx)("div",{className:"container",children:Object(w.jsxs)("div",{className:"wrapper",children:[Object(w.jsx)("button",{className:"closeB",onClick:function(){return P(!1)},children:Object(w.jsx)("svg",{width:"14",height:"14",children:Object(w.jsx)("path",{d:"M14 12.461 8.3 6.772l5.234-5.233L12.006 0 6.772 5.234 1.54 0 0 1.539l5.234 5.233L0 12.006l1.539 1.528L6.772 8.3l5.69 5.7L14 12.461z"})})}),Object(w.jsx)("div",{className:"logo",children:Object(w.jsx)("img",{alt:"logo",src:"/logo.png"})}),Object(w.jsx)("h1",{className:"title",children:"Deposit"}),"none"===Y?Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("input",{type:"number",value:null===I?"":I/b.c,onChange:function(e){return function(e){if(!e)return R(null);console.log({input:e}),Number(e)>=0?R(Number(e)*b.c):R(0)}(e.target.value)}}),Object(w.jsx)("button",{className:"modalB",onClick:function(){return ke()},children:"Deposit"})]}):"sent"===Y?Object(w.jsx)(w.Fragment,{children:Object(w.jsxs)("h3",{className:"status",children:["Validating ",Object(w.jsx)(v.a,{size:13,color:"#443f89"})]})}):"validated"===Y?Object(w.jsx)("h3",{className:"status",children:"Succesfully validated"}):Object(w.jsx)("h3",{className:"status",children:"Failed"})]})}),Object(w.jsx)("div",{className:"overlay"})]}),Object(w.jsxs)("div",{className:"modal",style:{display:V?"flex":"none"},children:[Object(w.jsx)("div",{className:"container",children:Object(w.jsxs)("div",{className:"wrapper",children:[Object(w.jsx)("button",{className:"closeB",onClick:function(){return X(!1)},children:Object(w.jsx)("svg",{width:"14",height:"14",children:Object(w.jsx)("path",{d:"M14 12.461 8.3 6.772l5.234-5.233L12.006 0 6.772 5.234 1.54 0 0 1.539l5.234 5.233L0 12.006l1.539 1.528L6.772 8.3l5.69 5.7L14 12.461z"})})}),Object(w.jsx)("div",{className:"logo",children:Object(w.jsx)("img",{alt:"logo",src:"/logo.png"})}),Object(w.jsx)("h1",{className:"title",children:"Withdraw"}),"none"===ue?Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("input",{type:"number",value:null===$?"":$/b.c,onChange:function(e){return function(e){if(!e)return ee(null);console.log({input:e}),Number(e)>=0?ee(Number(e)*b.c):ee(0)}(e.target.value)}}),Object(w.jsx)("button",{className:"modalB",onClick:function(){return Ce()},children:"Withdraw"})]}):"hasPending"===ue||"withdrawing"===ue?Object(w.jsxs)("div",{className:"pending",children:[Object(w.jsxs)("h2",{children:["Pending: ",he/b.c," SOL"]}),Object(w.jsxs)("button",{className:"modalB",disabled:"withdrawing"===ue,onClick:function(){return Ee()},children:[Object(w.jsx)("span",{className:"withdrawLabel",children:"Withdraw"})," ","withdrawing"===ue?Object(w.jsx)(v.a,{size:13,color:"#27244f"}):null]})]}):"withdrawn"===ue?Object(w.jsxs)("h2",{children:["Succesfully withdrawn ",ne?ne/b.c:null]}):Object(w.jsx)("h3",{className:"status",children:"Failed"})]})}),Object(w.jsx)("div",{className:"overlay"})]}),Object(w.jsxs)("div",{style:{display:B?"flex":"none"},className:"menu",children:[Object(w.jsx)("div",{className:"navLinks",children:Object(w.jsxs)(p.c,{to:"/coinflip",className:function(e){return e.isActive?"activeNavLink navLink":"inactiveNavLink navLink"},children:[Object(w.jsx)("img",{className:"icon",src:"/img/coin0.png"}),Object(w.jsx)("p",{className:"title",children:"Coinflip"})]})}),Object(w.jsx)(y.a,{})]})]})}}).call(this,c(9).Buffer)},133:function(e,t,c){"use strict";c(2),c(232);var n=c(1);t.a=function(){return Object(n.jsx)("div",{className:"TestnetAlert",children:Object(n.jsx)("div",{className:"alert",children:"We Are Currently Live In The Testnet Only"})})}},141:function(e,t,c){},142:function(e,t){},146:function(e,t){},159:function(e,t){},175:function(e,t){},176:function(e,t){},197:function(e,t,c){},221:function(e,t,c){},222:function(e,t,c){},232:function(e,t,c){},234:function(e,t,c){},240:function(e,t,c){},241:function(e,t,c){},242:function(e,t,c){},243:function(e,t,c){},244:function(e,t,c){},245:function(e,t,c){},246:function(e,t,c){"use strict";c.r(t);var n=c(2),a=c(43),s=c.n(a),r=(c(141),c(258)),i=c(254),l=c(135),o=c(255),j=c(256),u=c(257),b=c(59),d=c(13),O=(c(195),c(75)),h=c(17),m=(c(196),c(197),c(131)),p=c(22),x=c(3),f=c.n(x),v=c(5),g=c(6),N=c(89),y=c(20),w=c.n(y),S=c(21),_=(c(88),c(47),c(42),c(8)),A=c(71),k=c(16),E=c(19),C=c(27),L=c(1);var K=function(e){var t,c,a,s=Object(n.useState)(),r=Object(g.a)(s,2),i=r[0],l=r[1],o=Object(n.useState)(0),j=Object(g.a)(o,2),u=(j[0],j[1],Object(N.b)()),b=[["spin1080","spin1440","spin1800","spin2160"],["spin900","spin1260","spin1620","spin1980"]],O=Object(S.b)(),m=Object(S.c)((function(e){return e.user}));Object(n.useEffect)((function(){l(e.game)}),[e.game]);var p=function(t){var c;i&&i.status!==t&&((null===(c=i.winner)||void 0===c?void 0:c._id)===m._id&&"revealed"===t&&O({type:"UPDATE_USER_BALANCE",payload:2*i.amount}),"revealed"===t&&setTimeout((function(){e.removeGame(i)}),2e3),l(Object(_.a)(Object(_.a)({},i),{},{status:t})))},x=function(){var e=Object(v.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u&&u.publicKey&&i){e.next=2;break}return e.abrupt("return");case 2:if(m._id!==i.creator._id){e.next=4;break}return e.abrupt("return",h.b.error("You can not join your game"));case 4:if(!(m.balance<i.amount)){e.next=6;break}return e.abrupt("return",h.b.error("Balance needs to be higher than the game bet"));case 6:return e.prev=6,e.next=9,w.a.post("/api/game/join",{gameId:i._id});case 9:h.b.success("Joined the game"),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(6),h.b.error(e.t0.response.data.message.toString());case 15:case"end":return e.stop()}}),e,null,[[6,12]])})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=Object(v.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u&&u.publicKey&&i){e.next=2;break}return e.abrupt("return");case 2:if(i.creator._id===m._id){e.next=4;break}return e.abrupt("return",h.b.error("You can not cancel another person`s game"));case 4:return e.prev=4,e.next=7,w.a.post("/api/game/cancel",{gameId:i._id});case 7:h.b.success("Game has been cancelled"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),h.b.error(e.t0.response.data.message.toString());case 13:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(){return e.apply(this,arguments)}}();return Object(L.jsx)(L.Fragment,{children:i&&"ended"!==i.status?Object(L.jsxs)("div",{className:"gameWrapper",children:[Object(L.jsxs)("div",{className:"players",children:[Object(L.jsx)("div",{className:"playerWrapper",children:Object(L.jsxs)("div",{className:"revealed"!==i.status?"player":(null===(t=i.winner)||void 0===t?void 0:t._id)==i.creator._id?"player winner":"player loser",children:[Object(L.jsx)("img",{className:"avatar",src:"./img/coin".concat(i.creatorChoice,".png")}),Object(L.jsx)(E.b,{to:"/u/".concat(i.creator.publicKey),className:"address",children:Object(C.a)(i.creator)})]})}),Object(L.jsx)("div",{className:"middle",children:"active"===i.status||"joined"===i.status?Object(L.jsx)("h3",{className:"vsTag",children:"VS"}):"countdown"===i.status?Object(L.jsx)(L.Fragment,{children:Object(L.jsx)(A.a,{date:i.countDownEnd,onComplete:function(){return p("flipping")},renderer:function(e){return Object(L.jsx)("h3",{children:e.seconds})}})}):Object(L.jsxs)("div",{onAnimationEnd:function(){return p("revealed")},id:"coinFlip",className:function(e){if(null===e.result||void 0===e.result)throw"Game is not loaded";var t=parseInt(e.privateSeedHash,36)%b[e.result].length;return b[e.result][t]}(i),children:[Object(L.jsx)("div",{className:"coin0",children:Object(L.jsx)("img",{src:"./img/coin0.png"})}),Object(L.jsx)("div",{className:"coin1",children:Object(L.jsx)("img",{src:"./img/coin1.png"})})]})}),Object(L.jsx)("div",{className:"playerWrapper",children:Object(L.jsx)("div",{className:"revealed"!==i.status?"player":(null===(c=i.winner)||void 0===c?void 0:c._id)==(null===(a=i.opponent)||void 0===a?void 0:a._id)?"player winner":"player loser",children:i.opponent?Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)("img",{className:"avatar",src:"./img/coin".concat(1-i.creatorChoice,".png")}),Object(L.jsx)(E.b,{to:"/u/".concat(i.opponent.publicKey),className:"address",children:Object(C.a)(i.opponent)})]}):Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(k.a,{className:"avatarPlaceholder",src:"/img/playerPlaceholder.svg"}),Object(L.jsx)("h3",{className:"address",children:"waiting..."})]})})})]}),Object(L.jsxs)("div",{className:"info",children:[Object(L.jsxs)("div",{className:"bet",children:[Object(L.jsx)("h3",{children:i.amount/d.c}),Object(L.jsx)(k.a,{src:"./img/coins.svg"})]}),!i.opponent&&m?i.creator._id===m._id?Object(L.jsx)("button",{className:"deleteB",onClick:function(){return y()},children:Object(L.jsx)(k.a,{src:"/img/bin.svg"})}):Object(L.jsx)("button",{onClick:function(){return x()},className:"joinB",children:"Join"}):Object(L.jsx)(L.Fragment,{})]})]},i._id):null})},T=c(26),P=c(31),D=c(72),M=c.n(D);c(240),c(241);var B=function(e){var t;return Object(L.jsxs)("div",{className:"modal",style:{display:"flex"},children:[Object(L.jsx)("div",{className:"container",children:Object(L.jsxs)("div",{className:"wrapper",children:[Object(L.jsx)("button",{className:"closeB",onClick:function(){return e.closeFairnessModal()},children:Object(L.jsx)("svg",{width:"14",height:"14",children:Object(L.jsx)("path",{d:"M14 12.461 8.3 6.772l5.234-5.233L12.006 0 6.772 5.234 1.54 0 0 1.539l5.234 5.233L0 12.006l1.539 1.528L6.772 8.3l5.69 5.7L14 12.461z"})})}),Object(L.jsx)("div",{className:"logo",children:Object(L.jsx)("img",{alt:"logo",src:"/logo.png"})}),Object(L.jsx)("h1",{className:"title",children:"Fairness"}),Object(L.jsxs)("div",{className:"fairness",children:[Object(L.jsxs)("div",{className:"field",children:[Object(L.jsx)("h4",{children:"Creator Public Key"}),Object(L.jsx)("p",{children:e.game.creator.publicKey})]}),Object(L.jsxs)("div",{className:"field",children:[Object(L.jsx)("h4",{children:"Opponent Public Key"}),Object(L.jsx)("p",{children:null===(t=e.game.opponent)||void 0===t?void 0:t.publicKey})]}),Object(L.jsxs)("div",{className:"field",children:[Object(L.jsx)("h4",{children:"Private Seed"}),Object(L.jsx)("p",{children:e.game.privateSeed})]}),Object(L.jsxs)("div",{className:"field",children:[Object(L.jsx)("h4",{children:"Private Seed Hash"}),Object(L.jsx)("p",{children:e.game.privateSeedHash})]}),Object(L.jsxs)("div",{className:"field",children:[Object(L.jsx)("h4",{children:"Solana Blockhash"}),Object(L.jsx)("p",{children:e.game.blockhash})]}),Object(L.jsx)(E.b,{className:"readMore",to:"/fairness",children:"Read More"})]})]})}),Object(L.jsx)("div",{className:"overlay"})]})};var U=function(e){var t=Object(n.useState)(),c=Object(g.a)(t,2),a=c[0],s=c[1];return Object(L.jsxs)("div",{className:"recentGamesWrapper",children:[Object(L.jsxs)("table",{className:"recentGames",children:[Object(L.jsx)("thead",{children:Object(L.jsxs)("tr",{children:[Object(L.jsx)("th",{className:"date",children:"Date"}),Object(L.jsx)("th",{children:"Creator"}),Object(L.jsx)("th",{children:"Opponent"}),Object(L.jsx)("th",{children:"Bet"}),Object(L.jsx)("th",{children:"Result"}),Object(L.jsx)("th",{children:"Winner"}),Object(L.jsx)("th",{children:"Provably Fair"})]})}),Object(L.jsx)("tbody",{children:e.games.map((function(e){return e.opponent&&e.winner&&null!==e.result?Object(L.jsxs)("tr",{className:"recentGame",children:[Object(L.jsx)("td",{className:"date",children:Object(L.jsx)("div",{className:"tdContent",children:M()(e.updatedAt).format("MMM DD, h:mm A")})}),Object(L.jsx)("td",{children:Object(L.jsxs)("div",{className:"user tdContent",children:[" ",Object(L.jsxs)(E.b,{to:"/u/".concat(e.creator.publicKey),children:[" ",Object(L.jsx)(k.a,{src:Object(T.createAvatar)(P,{seed:e.creator.publicKey})})," ",Object(L.jsx)("p",{className:"publicKey",children:Object(C.a)(e.creator)})]})]})}),Object(L.jsx)("td",{children:Object(L.jsx)("div",{className:"user tdContent",children:Object(L.jsxs)(E.b,{to:"/u/".concat(e.opponent.publicKey),children:[Object(L.jsx)(k.a,{src:Object(T.createAvatar)(P,{seed:e.opponent.publicKey})}),"  ",Object(L.jsx)("p",{className:"publicKey",children:Object(C.a)(e.opponent)})]})})}),Object(L.jsx)("td",{children:Object(L.jsxs)("div",{className:"bet tdContent",children:[e.amount/d.c," ",Object(L.jsx)(k.a,{src:"./img/coins.svg"})]})}),Object(L.jsx)("td",{children:Object(L.jsx)("div",{className:"coin tdContent",children:Object(L.jsx)("img",{src:"./img/coin".concat(e.result,".png")})})}),Object(L.jsx)("td",{children:Object(L.jsxs)("div",{className:"user tdContent",children:[" ",Object(L.jsxs)(E.b,{to:"/u/".concat(e.winner.publicKey),children:[" ",Object(L.jsx)(k.a,{src:Object(T.createAvatar)(P,{seed:e.winner.publicKey})})," ",Object(L.jsx)("p",{className:"publicKey",children:Object(C.a)(e.winner)})]})]})}),Object(L.jsx)("td",{children:Object(L.jsx)("button",{onClick:function(){return s(e)},className:"openFairnessB",children:"Fairness"})})]},e._id):null}))})]}),a?Object(L.jsx)(B,{game:a,closeFairnessModal:function(){s(null)}}):null]})},F=["active","joined","countdown","flipping"];var G=function(){var e=Object(N.b)(),t=Object(n.useState)([]),c=Object(g.a)(t,2),a=c[0],s=c[1],r=Object(n.useState)([]),i=Object(g.a)(r,2),l=i[0],o=i[1],j=Object(n.useState)([]),u=Object(g.a)(j,2),b=u[0],O=u[1],m=Object(n.useState)([]),x=Object(g.a)(m,2),y=x[0],_=x[1],A=Object(n.useState)(!1),E=Object(g.a)(A,2),C=E[0],T=E[1],P=Object(n.useState)(0),D=Object(g.a)(P,2),M=D[0],B=D[1],G=Object(n.useState)("none"),I=Object(g.a)(G,2),R=I[0],W=(I[1],Object(n.useState)(0)),H=Object(g.a)(W,2),Y=H[0],z=H[1],J=Object(S.c)((function(e){return e.user})),q=Object(S.c)((function(e){return e.sockets})),V=function(){var t=Object(v.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e&&e.publicKey&&M){t.next=2;break}return t.abrupt("return");case 2:if(!(J.balance<M)){t.next=4;break}return t.abrupt("return",h.b.error("Balance needs to be higher than the game bet"));case 4:return t.prev=4,t.next=7,w.a.post("/api/game",{amount:M,creatorChoice:Y});case 7:h.b.success("Game created"),T(!1),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(4),h.b.error(t.t0.response.data.message.toString());case 14:case"end":return t.stop()}}),t,null,[[4,11]])})));return function(){return t.apply(this,arguments)}}(),X=function(e){s((function(t){return t.filter((function(t){return t._id!==e._id}))})),o((function(t){return[e].concat(Object(p.a)(t.slice(0,30)))}))};return Object(n.useEffect)((function(){(function(){var e=Object(v.a)(f.a.mark((function e(){var t,c,n,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([w.a.get("/api/game/allActive"),w.a.get("/api/game/lastEnded")]);case 2:t=e.sent,c=Object(g.a)(t,2),n=c[0],a=c[1],console.log({activeGames:n.data}),s(n.data),o(a.data);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(n.useEffect)((function(){q.game&&(q.game.on("newGame",(function(e){return s((function(t){return[].concat(Object(p.a)(t),[e])}))})),q.game.on("gameUpdate",(function(e){return function(e){s((function(t){return t.map((function(t){return t._id===e._id?("ended"===e.status&&(e.status="countdown",e.countDownEnd=Date.now()+3e3),console.log(e),e):t}))}))}(e)})))}),[q.game]),Object(n.useEffect)((function(){var e=[],t=[];a.forEach((function(c){"ended"!==c.status&&"cancelled"!==c.status&&(c.creator._id===(null===J||void 0===J?void 0:J._id)?e.push(c):t.push(c))})),O(e),_(t)}),[J,a]),Object(L.jsxs)("div",{className:"Page ActiveGames",children:[Object(L.jsxs)("div",{className:"typeWrapper",children:[Object(L.jsxs)("div",{className:"type",children:[Object(L.jsx)("h2",{className:"typeHeader",children:"My Games"}),Object(L.jsx)("h2",{className:"gamesCounter",children:b.length})]}),J?Object(L.jsxs)("button",{className:"createGameB",onClick:function(){return T(!0)},children:["Create New ",Object(L.jsx)(k.a,{src:"/img/create.svg"})]}):null]}),b.length>0?Object(L.jsx)("div",{className:"games",children:b.map((function(e){return F.includes(e.status)?Object(L.jsx)(K,{game:e,removeGame:X},e._id):null}))}):Object(L.jsx)("div",{className:"typePlaceHolder",children:Object(L.jsx)("p",{children:"Your CoinFlip games will appear here"})}),Object(L.jsxs)("div",{className:"type",children:[Object(L.jsx)("h2",{className:"typeHeader",children:"Open Games"}),Object(L.jsx)("h2",{className:"gamesCounter",children:y.length})]}),y.length>0?Object(L.jsx)("div",{className:"games",children:y.map((function(e){return F.includes(e.status)?Object(L.jsx)(K,{game:e,removeGame:X},e._id):null}))}):Object(L.jsx)("div",{className:"typePlaceHolder",children:Object(L.jsx)("p",{children:"No open Coinflip games at the moment"})}),Object(L.jsxs)("div",{className:"type",children:[Object(L.jsx)("h2",{className:"typeHeader",children:"Recent Games"}),Object(L.jsx)("h2",{className:"gamesCounter",children:l.length})]}),Object(L.jsx)(U,{games:l}),Object(L.jsxs)("div",{className:"modal",style:{display:C?"flex":"none"},children:[Object(L.jsx)("div",{className:"container",children:Object(L.jsxs)("div",{className:"wrapper",children:[Object(L.jsx)("button",{className:"closeB",onClick:function(){return T(!1)},children:Object(L.jsx)("svg",{width:"14",height:"14",children:Object(L.jsx)("path",{d:"M14 12.461 8.3 6.772l5.234-5.233L12.006 0 6.772 5.234 1.54 0 0 1.539l5.234 5.233L0 12.006l1.539 1.528L6.772 8.3l5.69 5.7L14 12.461z"})})}),Object(L.jsx)("div",{className:"logo",children:Object(L.jsx)("img",{alt:"logo",src:"./logo.png"})}),Object(L.jsx)("h1",{className:"title",children:"Create Game"}),"none"===R?Object(L.jsxs)(L.Fragment,{children:[Object(L.jsxs)("div",{className:"coinChooser",children:[Object(L.jsx)("img",{onClick:function(){return z(0)},className:0===Y?"chosen":"",src:"./img/coin0.png"}),Object(L.jsx)("img",{onClick:function(){return z(1)},className:1===Y?"chosen":"",src:"./img/coin1.png"})]}),Object(L.jsx)("input",{type:"number",value:null===M?"":M/d.c,onChange:function(e){return function(e){if(!e)return B(null);console.log({input:e}),Number(e)>=0?B(Number(e)*d.c):B(0)}(e.target.value)}}),Object(L.jsx)("button",{className:"modalB",onClick:function(){return V()},children:"Create"})]}):"sent"===R?Object(L.jsx)(L.Fragment,{children:Object(L.jsxs)("h3",{className:"status",children:["Your deposit was sent ",Object(L.jsx)("br",{}),"It will be validated within 60 seconds"]})}):Object(L.jsx)("h3",{className:"status",children:"Failed"})]})}),Object(L.jsx)("div",{className:"overlay"})]})]})},I=c(14);c(124),c(242);var R=function(e){var t=Object(n.useState)(),c=Object(g.a)(t,2),a=c[0],s=c[1];return Object(L.jsxs)(L.Fragment,{children:[Object(L.jsxs)("table",{className:"UserGames",children:[Object(L.jsx)("thead",{children:Object(L.jsxs)("tr",{children:[Object(L.jsx)("th",{children:"Date"}),Object(L.jsx)("th",{children:"Bet"}),Object(L.jsx)("th",{children:"Picked Side"}),Object(L.jsx)("th",{children:"Opponent"}),Object(L.jsx)("th",{children:"Result"}),Object(L.jsx)("th",{children:"Win Amount"}),Object(L.jsx)("th",{children:"Provably Fair"})]})}),Object(L.jsx)("tbody",{children:e.games.map((function(t,c){var n;return Object(L.jsxs)("tr",{className:"game",children:[Object(L.jsx)("td",{children:M()(t.updatedAt).format("MMM DD, h:mm A")}),Object(L.jsx)("td",{children:Object(L.jsxs)("div",{className:"tdContent bet",children:[t.amount/d.c," ",Object(L.jsx)(k.a,{src:"/img/coins.svg"})]})}),Object(L.jsx)("td",{children:Object(L.jsxs)("div",{className:"tdContent coin",children:[Object(L.jsx)("img",{src:"/img/coin".concat(t.creator._id===e.user._id?t.creatorChoice:1-t.creatorChoice,".png")})," "]})}),Object(L.jsx)("td",{children:t.creator._id===e.user._id?t.opponent?Object(L.jsx)(E.b,{to:"/u/".concat(t.opponent.publicKey),children:Object(C.a)(t.opponent)}):"-":Object(L.jsx)(E.b,{to:"/u/".concat(t.creator.publicKey),children:Object(C.a)(t.creator)})}),Object(L.jsx)("td",{children:Object(L.jsx)("div",{className:"tdContent coin",children:"ended"===t.status?Object(L.jsx)("img",{src:"/img/coin".concat(t.result,".png")}):t.status.charAt(0).toUpperCase()+t.status.slice(1)})}),Object(L.jsx)("td",{children:"ended"===t.status?(null===(n=t.winner)||void 0===n?void 0:n._id)===e.user._id?Object(L.jsx)("span",{className:"win",children:Math.round(2*t.amount*((100-t.fee)/100))/d.c}):Object(L.jsx)("span",{className:"lose",children:-t.amount/d.c}):0}),Object(L.jsx)("td",{children:Object(L.jsx)("button",{onClick:function(){return s(t)},className:"openFairnessB",children:"Fairness"})})]},c)}))})]}),a?Object(L.jsx)(B,{game:a,closeFairnessModal:function(){s(null)}}):null]})};var W=function(){var e=Object(I.h)().publicKey,t=Object(n.useState)(),c=Object(g.a)(t,2),a=c[0],s=c[1],r=Object(n.useState)([]),i=Object(g.a)(r,2),l=i[0],o=i[1],j=Object(n.useState)(!1),u=Object(g.a)(j,2),b=u[0],d=u[1],O=Object(n.useState)(0),h=Object(g.a)(O,2),m=h[0],p=h[1],x=Object(n.useState)(0),N=Object(g.a)(x,2),y=N[0],S=N[1],_=function(){var e=Object(v.a)(f.a.mark((function e(t){var c,n,a,r,i,l,j;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([w.a.get("/api/u/".concat(t)),w.a.get("/api/game/u/".concat(t))]);case 2:c=e.sent,n=Object(g.a)(c,2),a=n[0],r=n[1],i=[a.data,r.data],j=i[1],(l=i[0])||d(!0),s(l),o(j);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){s(void 0),e&&_(e)}),[e]),Object(n.useEffect)((function(){if(l&&a){var e=0,t=0;l.forEach((function(c){"ended"===c.status&&c.winner&&(c.winner._id===a._id?e++:t++)})),p(e),S(t)}}),[a,l]),Object(L.jsx)("div",{className:"Page Profile",children:a?Object(L.jsxs)(L.Fragment,{children:[Object(L.jsxs)("div",{className:"profileBox",children:[Object(L.jsx)(k.a,{className:"avatar",src:Object(T.createAvatar)(P,{seed:a.publicKey.toString()})}),Object(L.jsxs)("div",{className:"rightInfo",children:[a.username?Object(L.jsx)("div",{className:"username",children:Object(L.jsx)("h1",{className:"value",children:a.username})}):null,Object(L.jsxs)("div",{className:"address",children:[Object(L.jsx)("h2",{className:"value",children:a.publicKey}),Object(L.jsx)("a",{className:"scanLink",target:"_blank",rel:"noopener noreferrer",href:"https://solscan.io/account/".concat(a.publicKey.toString()),children:Object(L.jsx)("img",{src:"/img/solscan.png"})})]}),Object(L.jsxs)("div",{className:"gameStats",children:[Object(L.jsxs)("div",{className:"gameStat",children:[Object(L.jsx)("h2",{children:"Games Won:"}),Object(L.jsx)("h2",{children:m})]}),Object(L.jsx)("div",{className:"statCircle",style:{backgroundImage:l.length>0?"linear-gradient(#1C1D25, #1C1D25), linear-gradient( 45deg, rgba(37, 185, 0, 0.85), rgba(37, 185, 0, 0.85) ".concat(m/(m+y)*100,"%, rgba(185, 37, 0, 0.85) ").concat(y/(m+y)*100,"% )"):"linear-gradient(#1c1d25, #1c1d25), linear-gradient( 45deg, gray, gray 100% )"}}),Object(L.jsxs)("div",{className:"gameStat",children:[Object(L.jsx)("h2",{children:"Games Lost:"}),Object(L.jsx)("h2",{children:y})]})]})]})]}),Object(L.jsx)(R,{user:a,games:l})]}):b?Object(L.jsx)("h1",{children:"User was not found"}):Object(L.jsx)("h1",{children:"Loading user..."})})};c(243);var H=function(){return Object(L.jsxs)("div",{className:"Page Fairness",children:[Object(L.jsx)("h1",{children:"Fairness"}),Object(L.jsx)("p",{children:"Solasphere project is built on trust. We want everything to be clear and fair. We are here for a long-term game."}),Object(L.jsx)("h1",{children:"Result Algorithm"}),Object(L.jsx)("p",{children:"Our system generates the result for each round by using the SHA-256 hash of 4 separate inputs"}),Object(L.jsxs)("ol",{className:"hashInputs",children:[Object(L.jsx)("li",{children:"Game Creator Public Key"}),Object(L.jsx)("li",{children:"Game Opponent Public Key"}),Object(L.jsx)("li",{children:"Private Seed (cryptographically secure random number in hex format)"}),Object(L.jsx)("li",{children:"Solana Head Block Hash"})]}),Object(L.jsxs)("p",{children:["Last 2 inputs plays the most important part. ",Object(L.jsx)("br",{}),Object(L.jsx)("span",{className:"term",children:"Private Seed"}),' ensures that the game result will be truly random and it is generated with the game creation. We dont reveal it until the end, but you can check that it was not changed by hashing and comparing it with "privateSeedHash". "privateSeedHash" is always visible. ',Object(L.jsx)("br",{}),"Using  ",Object(L.jsx)("span",{className:"term",children:"Solana Blockchash"})," solasphere proves that even we can't predict the result. Because this value can't be known in advance."]}),Object(L.jsx)("h1",{children:"Check Fairness"}),Object(L.jsxs)("p",{children:["You can execute Python code that checks fairness straight from your browser with ",Object(L.jsx)("a",{target:"_blank",rel:"nofollow noopener",href:"https://replit.com/@ApeTim/Solasphere-Coinflip-Fairness",children:"Fairness checker"}),". Just replace the inputs to correct ones. And you will see that the result will be the same. If you have any questions about this system, feel free to contact our support team."]}),Object(L.jsx)("div",{className:"fairnessCode",children:Object(L.jsxs)("p",{children:["from hashlib import sha256 ",Object(L.jsx)("br",{}),Object(L.jsx)("br",{}),"coins = ",'{0: "Blue Coin", 1: "Orange Coin"}',Object(L.jsx)("br",{}),Object(L.jsx)("br",{}),'creator_public_key = "INPUT"',Object(L.jsx)("br",{}),'opponent_publick_key = "INPUT"',Object(L.jsx)("br",{}),'private_seed = "INPUT"',Object(L.jsx)("br",{}),'private_seed_hash = "INPUT"',Object(L.jsx)("br",{}),'solana_block_hash = "INPUT"',Object(L.jsx)("br",{}),Object(L.jsx)("br",{}),"if sha256(private_seed.encode('utf-8')).hexdigest() != private_seed_hash: ",Object(L.jsx)("br",{}),'\xa0\xa0\xa0\xa0print("Private Seed was changed")',Object(L.jsx)("br",{}),"else: ",Object(L.jsx)("br",{}),"\xa0\xa0\xa0\xa0seed = ",'f"{creator_public_key}-{opponent_publick_key}-{private_seed}-{solana_block_hash}"',Object(L.jsx)("br",{}),"\xa0\xa0\xa0\xa0resultHash = sha256(seed.encode('utf-8')).hexdigest()[:8]",Object(L.jsx)("br",{}),"\xa0\xa0\xa0\xa0resultInt = int(resultHash, 16)",Object(L.jsx)("br",{}),"\xa0\xa0\xa0\xa0result = resultInt % 2",Object(L.jsx)("br",{}),Object(L.jsx)("br",{}),'print(f"Game Result is: ','{coins[result]}"',")",Object(L.jsx)("br",{})]})})]})};var Y=function(){var e=Object(I.f)().pathname;return Object(n.useEffect)((function(){window.scrollTo(0,0)}),[e]),null};var z=function(){var e=Object(n.useState)([]),t=Object(g.a)(e,2),c=t[0],a=t[1],s=Object(n.useState)(0),r=Object(g.a)(s,2),i=r[0],l=r[1],o=Object(n.useState)(0),j=Object(g.a)(o,2),u=j[0],b=j[1],d=Object(n.useState)(),O=Object(g.a)(d,2),m=O[0],p=O[1],x=Object(n.useState)({username:""}),N=Object(g.a)(x,2),y=N[0],A=N[1],E=Object(n.useState)(!1),C=Object(g.a)(E,2),K=C[0],D=C[1],M=Object(S.b)(),B=Object(S.c)((function(e){var t;return null===(t=e.user)||void 0===t?void 0:t.publicKey})),U=function(){var e=Object(v.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.a.post("/api/u/editUser",y);case 3:t=e.sent.data,console.log({newUser:t}),p((function(e){return t})),M({type:"LOAD_USER",payload:m}),h.b.success("Profile has been updated"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),h.b.error(e.t0.response.data.message.toString());case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){B&&function(){var e=Object(v.a)(f.a.mark((function e(){var t,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.get("/api/u/".concat(B));case 2:return t=e.sent.data,e.next=5,w.a.get("/api/game/u/".concat(B));case 5:c=e.sent.data,A({username:t.username||""}),p(t),a(c);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[B]),Object(n.useEffect)((function(){if(c&&m){var e=0,t=0;c.forEach((function(c){"ended"===c.status&&c.winner&&(c.winner._id===m._id?e++:t++)})),l(e),b(t)}}),[m,c]),Object(L.jsxs)(L.Fragment,{children:[m?Object(L.jsxs)("div",{className:"Page Profile",children:[Object(L.jsxs)("div",{className:"profileBox",children:[Object(L.jsxs)("div",{className:"leftInfo",children:[Object(L.jsx)(k.a,{className:"avatar",src:Object(T.createAvatar)(P,{seed:m.publicKey.toString()})}),Object(L.jsx)("button",{onClick:function(){return D(!0)},className:"editB",children:"Edit Profile"})]}),Object(L.jsxs)("div",{className:"rightInfo",children:[m.username?Object(L.jsx)("div",{className:"username",children:Object(L.jsx)("h1",{className:"value",children:m.username})}):null,Object(L.jsxs)("div",{className:"address",children:[Object(L.jsx)("h2",{className:"value",children:m.publicKey}),Object(L.jsx)("a",{className:"scanLink",target:"_blank",rel:"noopener noreferrer",href:"https://solscan.io/account/".concat(m.publicKey.toString()),children:Object(L.jsx)("img",{src:"/img/solscan.png"})})]}),Object(L.jsxs)("div",{className:"gameStats",children:[Object(L.jsxs)("div",{className:"gameStat",children:[Object(L.jsx)("h2",{children:"Games Won:"}),Object(L.jsx)("h2",{children:i})]}),Object(L.jsx)("div",{className:"statCircle",style:{backgroundImage:c.length>0?"linear-gradient(#1C1D25, #1C1D25), linear-gradient( 45deg, rgba(37, 185, 0, 0.85), rgba(37, 185, 0, 0.85) ".concat(i/(i+u)*100,"%, rgba(185, 37, 0, 0.85) ").concat(u/(i+u)*100,"% )"):"linear-gradient(#1c1d25, #1c1d25), linear-gradient( 45deg, gray, gray 100% )"}}),Object(L.jsxs)("div",{className:"gameStat",children:[Object(L.jsx)("h2",{children:"Games Lost:"}),Object(L.jsx)("h2",{children:u})]})]})]})]}),c.length>0?Object(L.jsx)(R,{user:m,games:c}):null]}):null,Object(L.jsxs)("div",{className:"modal",style:{display:K?"flex":"none"},children:[Object(L.jsx)("div",{className:"container",children:Object(L.jsxs)("div",{className:"wrapper",children:[Object(L.jsx)("button",{className:"closeB",onClick:function(){return D(!1)},children:Object(L.jsx)("svg",{width:"14",height:"14",children:Object(L.jsx)("path",{d:"M14 12.461 8.3 6.772l5.234-5.233L12.006 0 6.772 5.234 1.54 0 0 1.539l5.234 5.233L0 12.006l1.539 1.528L6.772 8.3l5.69 5.7L14 12.461z"})})}),Object(L.jsx)("div",{className:"logo",children:Object(L.jsx)("img",{alt:"logo",src:"/logo.png"})}),Object(L.jsx)("h1",{className:"title",children:"Edit Profile"}),Object(L.jsx)("div",{className:"fields",children:Object(L.jsx)("input",{value:y.username,onInput:function(e){return A((function(t){return Object(_.a)(Object(_.a)({},t),{},{username:e.target.value})}))},placeholder:"username"})}),Object(L.jsx)("button",{onClick:function(){return U()},className:"modalB",children:"Save"})]})}),Object(L.jsx)("div",{className:"overlay"})]})]})},J=c(94);c(244);var q=function(){var e=Object(n.useRef)(null),t=Object(n.useState)(""),c=Object(g.a)(t,2),a=c[0],s=c[1],r=Object(n.useState)(!1),i=Object(g.a)(r,2),l=(i[0],i[1],Object(n.useState)([])),o=Object(g.a)(l,2),j=o[0],u=o[1],b=Object(S.b)(),d=Object(S.c)((function(e){return e.user})),O=Object(S.c)((function(e){return e.sockets})),m=function(){var e=Object(v.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==a.length){e.next=2;break}return e.abrupt("return",h.b.error("Message can not be empty"));case 2:return e.prev=2,e.next=5,w.a.post("/api/message",{content:a});case 5:b({type:"UPDATE_USER_LAST_MESSAGE_AT"}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),h.b.error(e.t0.response.data.message.toString());case 11:s("");case 12:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(){return e.apply(this,arguments)}}(),x=function(){e.current&&(e.current.scrollTop=e.current.scrollHeight)},N=function(e){var t=e.split(" ").map((function(e){return e.trim()}));s(t.join(" "))};return Object(n.useEffect)((function(){(function(){var e=Object(v.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.get("/api/message/last");case 2:t=e.sent.data,console.log({messages:t}),u(t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()(),x()}),[]),Object(n.useEffect)((function(){x()}),[j]),Object(n.useEffect)((function(){O.message&&O.message.on("newMessage",(function(e){u((function(t){return[e].concat(Object(p.a)(t))}))}))}),[O]),Object(L.jsx)("div",{className:"Chat",children:Object(L.jsxs)("div",{className:"chat",children:[Object(L.jsx)("div",{className:"chatHeader",children:Object(L.jsx)("h2",{children:"Chat"})}),Object(L.jsx)("div",{ref:e,className:"messages",children:j.map((function(e){return Object(L.jsxs)("div",{className:"message",children:[Object(L.jsx)("div",{className:"avatar",children:Object(L.jsx)(k.a,{className:"avatar",src:Object(T.createAvatar)(P,{seed:e.creator.publicKey})})}),Object(L.jsxs)("div",{className:"content",children:[Object(L.jsx)(E.b,{to:"/u/".concat(e.creator.publicKey),className:"address",children:Object(C.a)(e.creator)}),Object(L.jsx)("p",{className:"text",children:e.content})]})]},e._id)})).reverse()}),Object(L.jsx)("div",{className:"inputMessage",children:d?Date.now()-d.lastMessageAt>3e3?Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(J.a,{onChange:function(e){return N(e.target.value)},onKeyPress:function(e){return"Enter"===e.key?m():null},value:a,placeholder:"Type Message..."}),Object(L.jsx)("button",{onClick:function(){return m()},className:"sendMsgB",children:Object(L.jsx)(k.a,{src:"/img/send.svg"})})]}):Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(J.a,{onChange:function(e){return N(e.target.value)},onKeyPress:function(e){return"Enter"===e.key&&Date.now()-d.lastMessageAt>3e3?m():null},value:a,placeholder:"Type Message..."}),Object(L.jsx)(A.a,{date:d.lastMessageAt+3e3,intervalDelay:0,precision:1,renderer:function(e){return e.seconds+e.milliseconds>0?Object(L.jsxs)("button",{className:"sendMsgB",children:[e.seconds,".",e.milliseconds/100]}):Object(L.jsx)("button",{onClick:function(){return m()},className:"sendMsgB",children:Object(L.jsx)(k.a,{src:"/img/send.svg"})})}})]}):Object(L.jsx)("h4",{children:"You have to Log In"})})]})})},V=(c(245),c(70));var X=function(){return Object(L.jsxs)("div",{className:"RightSide",children:[Object(L.jsx)(q,{}),Object(L.jsx)(V.a,{})]})},Q=l.b.Testnet;var Z,$=function(){var e=Object(n.useMemo)((function(){return Object(d.g)(Q)}),[Q]),t=Object(n.useMemo)((function(){return[Object(o.a)(),Object(j.a)(),Object(u.a)()]}),[Q]),c=Object(S.b)();return window.addEventListener("load",(function(){window.solana&&window.solana.on("accountChanged",(function(){console.log("account has been changed")}))})),Object(n.useEffect)((function(){var e=Object(O.a)("/game"),t=Object(O.a)("/user"),n=Object(O.a)("/message");c({type:"LOAD_GAME_SOCKET",payload:e}),c({type:"LOAD_USER_SOCKET",payload:t}),c({type:"LOAD_MESSAGE_SOCKET",payload:n})}),[]),Object(L.jsx)("div",{className:"App",children:Object(L.jsx)(r.a,{endpoint:e,children:Object(L.jsxs)(i.a,{wallets:t,autoConnect:!0,children:[Object(L.jsx)(b.a,{children:Object(L.jsxs)(E.a,{children:[Object(L.jsx)(m.a,{}),Object(L.jsx)(Y,{}),Object(L.jsxs)("div",{className:"Body",children:[Object(L.jsxs)(I.d,{children:[Object(L.jsx)(I.b,{path:"/",element:Object(L.jsx)(I.a,{to:"/coinflip"})}),Object(L.jsx)(I.b,{path:"/coinflip",element:Object(L.jsx)(G,{})}),Object(L.jsx)(I.b,{path:"/fairness",element:Object(L.jsx)(H,{})}),Object(L.jsx)(I.b,{path:"/me",element:Object(L.jsx)(z,{})}),Object(L.jsx)(I.b,{path:"/u/:publicKey",element:Object(L.jsx)(W,{})})]}),Object(L.jsx)(X,{})]})]})}),Object(L.jsx)(h.a,{autoClose:1500})]})})})},ee=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,259)).then((function(t){var c=t.getCLS,n=t.getFID,a=t.getFCP,s=t.getLCP,r=t.getTTFB;c(e),n(e),a(e),s(e),r(e)}))},te=c(95);!function(e){e.LOAD_USER="LOAD_USER",e.UPDATE_USER_BALANCE="UPDATE_USER_BALANCE",e.UPDATE_USER_LAST_MESSAGE_AT="UPDATE_USER_LAST_MESSAGE_AT"}(Z||(Z={}));var ce;!function(e){e.LOAD_ASSOCIATED_KEYPAIR="LOAD_ASSOCIATED_KEYPAIR"}(ce||(ce={}));var ne;!function(e){e.LOAD_WALLET="LOAD_WALLET"}(ne||(ne={}));var ae;!function(e){e.LOAD_GAME_SOCKET="LOAD_GAME_SOCKET",e.LOAD_USER_SOCKET="LOAD_USER_SOCKET",e.LOAD_MESSAGE_SOCKET="LOAD_MESSAGE_SOCKET"}(ae||(ae={}));var se={user:void 0,game:void 0,message:void 0},re=Object(te.a)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Z.LOAD_USER:return t.payload;case Z.UPDATE_USER_BALANCE:return console.log("prev balance:",null===e||void 0===e?void 0:e.balance),console.log("balance change: ",t.payload),e&&Object(_.a)(Object(_.a)({},e),{},{balance:e.balance+t.payload});case Z.UPDATE_USER_LAST_MESSAGE_AT:return e&&Object(_.a)(Object(_.a)({},e),{},{lastMessageAt:Date.now()});default:return e}},wallet:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ne.LOAD_WALLET:return t.payload;default:return e}},associatedKeypair:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ce.LOAD_ASSOCIATED_KEYPAIR:return t.payload;default:return e}},sockets:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ae.LOAD_GAME_SOCKET:return Object(_.a)(Object(_.a)({},e),{},{game:t.payload});case ae.LOAD_USER_SOCKET:return Object(_.a)(Object(_.a)({},e),{},{user:t.payload});case ae.LOAD_MESSAGE_SOCKET:return Object(_.a)(Object(_.a)({},e),{},{message:t.payload});default:return e}}}),ie=Object(te.b)(re);s.a.render(Object(L.jsx)(n.StrictMode,{children:Object(L.jsx)(S.a,{store:ie,children:Object(L.jsx)($,{})})}),document.getElementById("root")),ee()},27:function(e,t,c){"use strict";c.d(t,"a",(function(){return n}));var n=function(e){return e.username||(t=e.publicKey).slice(0,5)+"..."+t.slice(-5);var t}},42:function(e,t,c){},47:function(e,t,c){},70:function(e,t,c){"use strict";c(2),c(234);var n=c(16),a=c(1);t.a=function(){return Object(a.jsx)("div",{className:"Socials",children:Object(a.jsxs)("div",{className:"community",children:[Object(a.jsx)("div",{className:"socialMedia",children:Object(a.jsx)("a",{target:"_blank",rel:"noopener noreferrer",href:"https://discord.gg",children:Object(a.jsx)(n.a,{src:"/img/discord.svg"})})}),Object(a.jsx)("div",{className:"socialMedia",children:Object(a.jsx)("a",{target:"_blank",rel:"noopener noreferrer",href:"https://twitter.com/solasphereNFT",children:Object(a.jsx)(n.a,{src:"/img/twitter.svg"})})})]})})}},88:function(e,t,c){}},[[246,1,2]]]);
//# sourceMappingURL=main.4cd69701.chunk.js.map