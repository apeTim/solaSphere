{"version":3,"sources":["components/Navbar.tsx","utils/displayName.ts","components/GameBox.tsx","components/ActiveGames.tsx","components/UserGames.tsx","components/Profile.tsx","ScrollToTop.tsx","components/MyProfile.tsx","components/Chat.tsx","components/LeftSide.tsx","components/RecentGames.tsx","components/RightSide.tsx","App.tsx","reducers/user.ts","reportWebVitals.ts","reducers/games.ts","reducers/wallet.ts","reducers/sockets.ts","store.ts","index.tsx","utils/shortenAddress.ts","components/Socials.tsx"],"names":["messageToSign","Uint8Array","from","Buffer","connection","Connection","clusterApiUrl","servicePublicKey","PublicKey","Navbar","wallet","useWallet","useState","isAskedToVerify","setIsAskedToVerify","isLoggedIn","setIsLoggedIn","depositModalOpen","setDepositModalOpen","menuOpen","setMenuOpen","depositAmount","setDepositAmount","depositStatus","setDepositStatus","withdrawModalOpen","setWithdrawModalOpen","withdrawAmount","setWithdrawAmount","withdrawnAmount","setWithdrawnAmount","balanceChanged","setBalanceChanged","withdrawStatus","setWithdrawStatus","amount","instructions","serviceSignature","withdrawData","setWithdrawData","prevBalance","setPrevBalance","dispatch","useDispatch","user","useSelector","state","sockets","connectUser","a","console","log","type","payload","connectSocket","emit","_id","on","fromDeposit","deposit","publicKey","LAMPORTS_PER_SOL","toast","error","transaction","Transaction","add","SystemProgram","transfer","fromPubkey","toPubkey","lamports","sendTransaction","response","data","message","toString","withdraw","customWithdrawData","signTransaction","txWithdrawData","recoverTx","populate","Message","addSignature","requestWithdraw","balance","axios","post","getPendingWithdraw","get","pendingWithdraw","useEffect","signAndAuth","signMessage","authenticated","toBase58","toBytes","signedMessage","Array","withCredentials","className","to","src","isActive","onClick","onAnimationEnd","Number","toFixed","shortenAddress","style","display","width","height","d","value","onChange","event","input","inputDepositAmount","target","size","color","inputWithdrawAmount","disabled","displayName","username","GameBox","props","game","setGame","move","setMove","joinModalOpen","setJoinModalOpen","changeGameStatus","status","winner","setTimeout","joinGame","creator","gameId","success","cancelGame","creatorMove","onAnimationEndCapture","date","countDownEnd","onComplete","renderer","time","seconds","opponent","opponentMove","activeStatuses","amountOptions","ActiveGames","userGames","setUserGames","openGames","setOpenGames","createGameModalOpen","setCreateGameModalOpen","creatingGame","setCreatingGame","gameAmount","setGameAmount","games","createGame","removeGame","getGamesData","activeGames","updatedGame","forEach","push","length","map","includes","UserGames","index","winAmount","moment","updatedAt","format","Profile","useParams","setUser","setGames","notFound","setNotFound","gamesWon","setGamesWon","gamesLost","setGamesLost","getUser","Promise","all","responseUser","responseGame","undefined","ScrollToTop","pathname","useLocation","window","scrollTo","MyProfile","editData","setEditData","editUserModalOpen","setEditUserModalOpen","editUser","newUser","getGames","createAvatar","avatarStyle","seed","rel","href","backgroundImage","alt","onInput","placeholder","Chat","messagesRef","useRef","setMessage","messages","setMessages","sendMessage","content","scrollMessagesToBottom","current","scrollTop","scrollHeight","inputMessage","contentWords","split","c","trim","join","getLast","old","ref","reverse","Date","now","lastMessageAt","onKeyPress","key","intervalDelay","precision","milliseconds","LeftSide","Socials","RecentGames","recentGames","setRecentGames","loadRecentGames","loser","RightSide","network","WalletAdapterNetwork","Testnet","App","UserActions","endpoint","useMemo","wallets","getPhantomWallet","getSlopeWallet","getSolflareWallet","addEventListener","solana","gameSocket","io","userSocket","messageSocket","ConnectionProvider","WalletProvider","autoConnect","path","element","autoClose","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","GamesActions","WalletActions","SocketsActions","defaultSockets","combined","combineReducers","action","LOAD_USER","UPDATE_USER_BALANCE","UPDATE_USER_LAST_MESSAGE_AT","LOAD_WALLET","LOAD_GAMES","ADD_GAME","find","UPDATE_GAME","LOAD_GAME_SOCKET","LOAD_USER_SOCKET","LOAD_MESSAGE_SOCKET","createStore","ReactDOM","render","store","document","getElementById","slice"],"mappings":"6SA0BMA,EAAgBC,WAAWC,KAAKC,EAAOD,KAAK,6BAE5CE,EAAa,IAAIC,IACnBC,YAAc,UACd,aAGEC,EAAmB,IAAIC,IAAU,gDAsSxBC,IApSf,WAEI,IAAMC,EAASC,cACf,EAA8CC,oBAAS,GAAvD,mBAAOC,EAAP,KAAwBC,EAAxB,KACA,EAAoCF,oBAAS,GAA7C,mBAAOG,EAAP,KAAmBC,EAAnB,KACA,EAAgDJ,oBAAS,GAAzD,mBAAOK,EAAP,KAAyBC,EAAzB,KACA,EAAgCN,oBAAS,GAAzC,mBAAOO,EAAP,KAAiBC,EAAjB,KACA,EAA0CR,mBAAwB,GAAlE,mBAAOS,EAAP,KAAsBC,EAAtB,KACA,EAA0CV,mBAAS,QAAnD,mBAAOW,EAAP,KAAsBC,EAAtB,KACA,EAAkDZ,oBAAS,GAA3D,mBAAOa,EAAP,KAA0BC,EAA1B,KACA,EAA4Cd,mBAAwB,GAApE,mBAAOe,EAAP,KAAuBC,EAAvB,KACA,EAA8ChB,mBAAwB,GAAtE,mBAAOiB,GAAP,KAAwBC,GAAxB,KACA,GAA4ClB,mBAAS,KAArD,qBAAOmB,GAAP,MAAuBC,GAAvB,MACA,GAA4CpB,mBAAS,QAArD,qBAAOqB,GAAP,MAAuBC,GAAvB,MACA,GAAwCtB,mBAAiF,CAAEuB,OAAQ,EAAGC,aAAc,GAAIC,iBAAkB,KAA1K,qBAAOC,GAAP,MAAqBC,GAArB,MACA,GAAsC3B,mBAAwB,MAA9D,qBAAO4B,GAAP,MAAoBC,GAApB,MACMC,GAAWC,cACXC,GAAOC,aAAmC,SAACC,GAAD,OAAWA,EAAMF,QAC3DG,GAAUF,aAAsC,SAACC,GAAD,OAAWA,EAAMC,WAEjEC,GAAW,uCAAG,WAAOJ,GAAP,SAAAK,EAAA,6DAChBC,QAAQC,IAAI,CAAEzC,WACdgC,GAAS,CAAEU,KAAM,cAAeC,QAAS3C,IACzCgC,GAAS,CAAEU,KAAM,YAAaC,QAAST,IACvCU,GAAcV,GAJE,kBAKT5B,GAAc,IALL,2CAAH,sDAQXsC,GAAgB,SAACV,GACbG,IAAWA,GAAQH,OAEzBG,GAAQH,KAAKW,KAAK,qBAAsBX,EAAKY,KAC7CT,GAAQH,KAAKa,GAAG,iBAAiB,SAACtB,EAAgBuB,GAC9ChB,GAAS,CAAEU,KAAM,sBAAuBC,QAASlB,IAE7CuB,GAAalC,EAAiB,kBAiBpCmC,GAAO,uCAAG,4BAAAV,EAAA,yDACNvC,GAAUA,EAAOkD,WAAavC,EADxB,sDAGRA,EAAgB,IAAOwC,KAHf,yCAGwCC,IAAMC,MAAM,mCAHpD,uBAMFC,GAAc,IAAIC,KAAcC,IAClCC,IAAcC,SAAS,CACnBC,WAAY3D,EAAOkD,UACnBU,SAAU/D,EACVgE,SAAUlD,KAVV,SAcFX,EAAO8D,gBAAgBR,EAAa5D,GAdlC,OAeR8C,QAAQC,IAAI,CAAEa,gBACdxC,EAAiB,QAhBT,kDAkBRsC,IAAMC,MAAM,KAAEU,SAASC,KAAKC,QAAQC,YACpCpD,EAAiB,UAnBT,0DAAH,qDAuBPqD,GAAQ,uCAAG,4CAAA5B,EAAA,yDAAO6B,EAAP,+BAAwD,KAC/DpE,GAAUA,EAAOkD,WAAalD,EAAOqE,gBAD9B,wDAEb7C,GAAkB,eAEd8C,EAAiB1C,GACjBwC,IACAE,EAAiBF,GAEfG,EAAYhB,IAAYiB,SAASC,IAAQjF,KAAK8E,EAAe5C,eAEnEc,QAAQC,IAAI,CAAE8B,cAEdA,EAAUG,aAAa7E,EAAkBJ,EAAOD,KAAK8E,EAAe3C,mBAZvD,UAcP3B,EAAO8D,gBAAgBS,EAAW7E,GAd3B,QAgBb0B,GAAmBkD,EAAe7C,QAClCD,GAAkB,aAjBL,4CAAH,qDAoBRmD,GAAe,uCAAG,4BAAApC,EAAA,yDACdvC,GAAUA,EAAOkD,WAAajC,EADhB,sDAGhBA,EAAiB,IAAOkC,KAHR,yCAGiCC,IAAMC,MAAM,kCAH7C,YAIhBpC,EAAiBiB,GAAK0C,SAJN,yCAIsBxB,IAAMC,MAAM,wDAJlC,uBAOhB7B,GAAkB,eAPF,UAQYqD,IAAMC,KAAK,yBAA0B,CAAErD,OAAQR,IAR3D,QAQVW,EARU,OAQ8EoC,KAE9FnC,GAAgB,CACZJ,OAAQG,EAAaH,OACrBC,aAAcE,EAAaF,aAC3BC,iBAAkBC,EAAaD,mBAGnCwC,GAAS,CACL1C,OAAQG,EAAaH,OACrBC,aAAcE,EAAaF,aAC3BC,iBAAkBC,EAAaD,mBAnBnB,kDAuBhByB,IAAMC,MAAM,KAAEU,SAASC,KAAKC,QAAQC,YAvBpB,0DAAH,qDA2Bfa,GAAkB,uCAAG,WAAO/E,GAAP,eAAAuC,EAAA,+EAEUsC,IAAMG,IAAI,0BAFpB,UAEfC,EAFe,OAE+CjB,KAF/C,iDAKnBxC,GAAkB,cAClBN,EAAkB+D,EAAgBxD,QAClCI,GAAgB,CACZJ,OAAQwD,EAAgBxD,OACxBC,aAAcuD,EAAgBvD,aAC9BC,iBAAkBsD,EAAgBtD,mBAEtCa,QAAQC,IAAI,CAAEwC,oBAZK,kDAcnB7B,IAAMC,MAAM,KAAEU,SAASC,KAAKC,QAAQC,YACpC1B,QAAQC,IAAR,MAfmB,0DAAH,sDAsExB,OAnDAyC,qBAAU,WACAlF,GAAUkC,IAEhB6C,GAAmB/E,KACpB,CAACA,EAAQkC,KAEZgD,qBAAU,WACN,IAAMC,EAAW,uCAAG,WAAOnF,GAAP,uBAAAuC,EAAA,kEAEPvC,GAAWA,EAAOoF,aAAgBpF,EAAOkD,YAAa/C,EAF/C,wDAGZC,GAAmB,GAHP,SAKyByE,IAAMG,IAAI,mBALnC,mBAKuDhB,KAA7DqB,EALM,EAKNA,cAAenD,EALT,EAKSA,KACrBM,QAAQC,IAAI,CAAE4C,mBACVA,EAPQ,oBAQJnD,EAAKgB,YAAclD,EAAOkD,UAAUoC,WARhC,kCASEhD,GAAYJ,GATd,iDAYRM,QAAQC,IAAI,iCAZJ,UAaFoC,IAAMG,IAAI,oBAbR,eAgBN9B,EAAYlD,EAAOkD,UAAUqC,UAhBvB,UAiBgBvF,EAAOoF,YAAY9F,GAjBnC,eAiBNkG,EAjBM,iBAmBEX,IAAMC,KAAK,kBAAmB,CAAE5B,UAAWuC,MAAMjG,KAAK0D,GAAYsC,cAAeC,MAAMjG,KAAKgG,IAAkB,CAAEE,iBAAiB,IAnBnI,eAmBZxD,EAnBY,OAmB4I8B,KAnB5I,UAqBN1B,GAAYJ,GArBN,0DAuBZkB,IAAMC,MAAM,KAAEU,SAASC,KAAKC,QAAQC,YACpC1B,QAAQC,IAAR,MAxBY,0DAAH,sDA4BjB0C,EAAYnF,KACb,CAACA,IAEJkF,qBAAU,WACDhD,KACc,MAAfJ,KACAU,QAAQC,IAAI,kBAAmBP,GAAK0C,QAAU9C,IAC1CI,GAAK0C,QAAU9C,IAAe,EAC9BR,GAAkB,KAElBA,GAAkB,OAG1BS,GAAeG,GAAK0C,YACrB,QAAC1C,SAAD,IAACA,QAAD,EAACA,GAAM0C,UAGN,sBAAKe,UAAU,SAAf,UACI,sBAAKA,UAAU,SAAf,UACI,sBAAKA,UAAU,OAAf,UACI,cAAC,IAAD,CAAMC,GAAG,IAAID,UAAU,OAAvB,SACI,qBAAKE,IAAI,gBAEb,qBAAKF,UAAU,WAAf,SACI,cAAC,IAAD,CAASC,GAAG,OAAOD,UAAW,qBAAGG,SAA2B,gBAAkB,mBAA9E,SACI,mBAAGH,UAAU,QAAb,wCAIZ,sBAAKI,QAAS,kBAAMrF,GAAaD,IAAWkF,UAAWlF,EAAW,kBAAoB,aAAtF,UACI,yBACA,yBACA,4BAGAJ,GAAc6B,GAEN,sBAAKyD,UAAU,OAAf,UACI,qBAAKA,UAAU,UAAf,SACI,qBAAI,sBAAqBtE,GAAgB2E,eAAgB,kBAAM1E,GAAkB,MAAMqE,UAAU,SAAjG,UAA2GM,SAAY,OAAJ/D,SAAI,IAAJA,QAAA,EAAAA,GAAM0C,SAAUzB,KAAkB+C,QAAQ,IAA7J,YAEJ,wBAAQH,QAAS,WAAQvF,GAAoB,GAAOM,EAAiB,SAAW6E,UAAU,WAA1F,qBACA,wBAAQI,QAAS,kBAAM/E,GAAqB,IAAO2E,UAAU,YAA7D,sBACA,cAAC,IAAD,CAAMC,GAAE,aAAQ1D,GAAKgB,UAAUgB,YAAcyB,UAAU,UAAvD,SACI,oBAAIA,UAAU,OAAd,SAAsBQ,YAAejE,GAAKgB,UAAUgB,mBAK5D,qBAAKyB,UAAU,cAAf,SACI,cAAC,IAAD,SAKpB,sBAAKA,UAAU,QAAQS,MAAO,CAAEC,QAAS9F,EAAmB,OAAS,QAArE,UACI,qBAAKoF,UAAU,YAAf,SACI,sBAAKA,UAAU,UAAf,UACI,wBAAQA,UAAU,SAASI,QAAS,kBAAMvF,GAAoB,IAA9D,SAAsE,qBAAK8F,MAAM,KAAKC,OAAO,KAAvB,SAA4B,sBAAMC,EAAE,4IAC1G,oBAAIb,UAAU,QAAd,qBAEsB,SAAlB9E,EACI,qCACI,uBAAO6B,KAAK,SAAS+D,MAAyB,OAAlB9F,EAAyB,GAAKA,EAAgBwC,IAAkBuD,SAAU,SAACC,GAAD,OAxM3G,SAACC,GACxB,IAAKA,EAAO,OAAOhG,EAAiB,MACpC4B,QAAQC,IAAI,CAAEmE,UACVX,OAAOW,IAAU,EAAGhG,EAAiBqF,OAAOW,GAASzD,KACpDvC,EAAiB,GAoMuHiG,CAAoBF,EAAMG,OAA4BL,UACvK,wBAAQd,UAAU,iBAAiBI,QAAS,kBAAM9C,MAAlD,wBAEc,SAAlBpC,EACI,mCACI,qBAAI8E,UAAU,SAAd,wBAAkC,cAAC,IAAD,CAAYoB,KAAM,GAAIC,MAAM,iBAC1C,cAAlBnG,EAAgC,oBAAI8E,UAAU,SAAd,mCAAoD,oBAAIA,UAAU,SAAd,yBAI9G,qBAAKA,UAAU,eAEnB,sBAAKA,UAAU,QAAQS,MAAO,CAAEC,QAAStF,EAAoB,OAAS,QAAtE,UACI,qBAAK4E,UAAU,YAAf,SACI,sBAAKA,UAAU,UAAf,UACI,wBAAQA,UAAU,SAASI,QAAS,kBAAM/E,GAAqB,IAA/D,SAAuE,qBAAKsF,MAAM,KAAKC,OAAO,KAAvB,SAA4B,sBAAMC,EAAE,4IAC3G,oBAAIb,UAAU,QAAd,sBAEuB,SAAnBpE,GAEI,qCACI,uBAAOmB,KAAK,SAAS+D,MAA0B,OAAnBxF,EAA0B,GAAKA,EAAiBkC,IAAkBuD,SAAU,SAACC,GAAD,OAvN5G,SAACC,GACzB,IAAKA,EAAO,OAAO1F,EAAkB,MACrCsB,QAAQC,IAAI,CAAEmE,UACVX,OAAOW,IAAU,EAAG1F,EAAkB+E,OAAOW,GAASzD,KACrDjC,EAAkB,GAmNwH+F,CAAqBN,EAAMG,OAA4BL,UAC1K,wBAAQd,UAAU,iBAAiBI,QAAS,kBAAMpB,MAAlD,yBAEe,eAAnBpD,IAAsD,gBAAnBA,GAC/B,sBAAKoE,UAAU,UAAf,UACI,6BAAiB,OAAZ/D,SAAY,IAAZA,OAAcH,OAAd,mBAAmCG,GAAaH,OAAS0B,IAAzD,QAAkF,kBACvF,yBAAQwC,UAAU,iBAAiBuB,SAA6B,gBAAnB3F,GAAkCwE,QAAS,kBAAM5B,MAA9F,UAA0G,sBAAMwB,UAAU,gBAAhB,sBAA1G,IAA8K,gBAAnBpE,GAAmC,cAAC,IAAD,CAAYwF,KAAM,GAAIC,MAAM,YAAe,WACjN,cAAnBzF,GACL,wDAA2BJ,GAAkBA,GAAkBgC,IAAmB,QAChF,oBAAIwC,UAAU,SAAd,yBAI1B,qBAAKA,UAAU,eAEnB,sBAAKS,MAAO,CAAEC,QAAS5F,EAAW,OAAS,QAAUkF,UAAU,OAA/D,UACI,sBAAKA,UAAU,WAAf,UACI,eAAC,IAAD,CAASI,QAAS,kBAAMvF,GAAoB,IAAOoF,GAAG,GAAGD,UAAU,wBAAnE,UACI,qBAAKA,UAAU,OAAOE,IAAI,qBAC1B,mBAAGF,UAAU,QAAb,wBAEJ,eAAC,IAAD,CAASI,QAAS,kBAAM/E,GAAqB,IAAO4E,GAAG,GAAGD,UAAU,wBAApE,UACI,qBAAKA,UAAU,OAAOE,IAAI,sBAC1B,mBAAGF,UAAU,QAAb,4BAGR,cAAC,IAAD,a,wpBC9THwB,EAAc,SAACjF,GACxB,OAAOA,EAAKkF,UAAYjB,YAAejE,EAAKgB,Y,gBC8KjCmE,MAtJf,SAAiBC,GAAe,IAAD,IAC3B,EAAwBpH,qBAAxB,mBAAOqH,EAAP,KAAaC,EAAb,KACA,EAAwBtH,mBAAS,GAAjC,mBAAOuH,EAAP,KAAaC,EAAb,KACA,EAA0CxH,oBAAS,GAAnD,mBAAOyH,EAAP,KAAsBC,EAAtB,KAEM5H,EAASC,cACT+B,EAAWC,cACXC,EAAOC,aAAmC,SAACC,GAAD,OAAWA,EAAMF,QAEjEgD,qBAAU,WACNsC,EAAQF,EAAMC,QACf,CAACD,EAAMC,OAEV,IAAMM,EAAmB,SAACC,GAAoB,IAAD,EACpCP,GACDA,EAAKO,SAAWA,KAEhB,UAAAP,EAAKQ,cAAL,eAAajF,OAAQZ,EAAKY,KAAkB,aAAXgF,GAAuB9F,EAAS,CAAEU,KAAM,sBAAuBC,QAAuB,EAAd4E,EAAK9F,SAElH+F,EAAQ,2BAAKD,GAAN,IAAYO,YAEJ,aAAXA,GACAE,YAAW,WACPT,EAAKO,OAAS,UACd9F,EAAS,CAAEU,KAAM,cAAeC,QAAS4E,MAC1C,OAILU,EAAQ,uCAAG,sBAAA1F,EAAA,yDACPvC,GAAUA,EAAOkD,WAAaqE,EADvB,oDAGTrF,EAAKY,MAAQyE,EAAKW,QAAQpF,IAHjB,yCAG6BM,IAAMC,MAAM,+BAHzC,YAITnB,EAAK0C,QAAU2C,EAAK9F,QAJX,yCAI0B2B,IAAMC,MAAM,iDAJtC,gCAOHwB,IAAMC,KAAK,iBAAkB,CAC/BqD,OAAQZ,EAAKzE,IACb2E,SATK,OAYTrE,IAAMgF,QAAQ,mBAEdR,GAAiB,GAdR,kDAgBTxE,IAAMC,MAAM,KAAEU,SAASC,KAAKC,QAAQC,YAhB3B,0DAAH,qDAoBRmE,EAAU,uCAAG,sBAAA9F,EAAA,yDACTvC,GAAUA,EAAOkD,WAAaqE,EADrB,oDAGXA,EAAKW,QAAQpF,MAAQZ,EAAKY,IAHf,yCAG2BM,IAAMC,MAAM,6CAHvC,gCAMLwB,IAAMC,KAAK,mBAAoB,CACjCqD,OAAQZ,EAAKzE,MAPN,OAUXM,IAAMgF,QAAQ,2BAVH,kDAYXhF,IAAMC,MAAM,KAAEU,SAASC,KAAKC,QAAQC,YAZzB,0DAAH,qDAgBhB,OACI,qCACKqD,GAAwB,YAAhBA,EAAKO,OAAuB,sBAAoBnC,UAAU,cAA9B,UACjC,sBAAKA,UAAU,UAAf,UACI,qBAAKA,UAAU,gBAAf,SACqB,aAAhB4B,EAAKO,OACF,sBAAKnC,WAAW,UAAA4B,EAAKQ,cAAL,eAAajF,MAAOyE,EAAKW,QAAQpF,IAAM,gBAAkB,eAAzE,UACI,cAAC,IAAD,CAAK6C,UAAU,YAAYE,IAAG,oBAAe0B,EAAKe,YAApB,UAC9B,cAAC,IAAD,CAAM1C,GAAE,aAAQ2B,EAAKW,QAAQhF,WAAayC,UAAU,UAApD,SAA+DwB,EAAYI,EAAKW,cAElE,aAAhBX,EAAKO,OACH,sBAAKnC,UAAU,SAAf,UACI,qBAAKA,UAAU,OAAf,SAAsB,cAAC,IAAD,CAAK4C,sBAAuB,kBAAMV,EAAiB,aAAalC,UAAU,yCAAyCE,IAAI,sBAC7I,cAAC,IAAD,CAAMD,GAAE,aAAQ2B,EAAKW,QAAQhF,WAAayC,UAAU,UAApD,SAA+DwB,EAAYI,EAAKW,cAElF,sBAAKvC,UAAU,SAAf,UACE,cAAC,IAAD,CAAKA,UAAU,YAAYE,IAAI,oBAC/B,cAAC,IAAD,CAAMD,GAAE,aAAQ2B,EAAKW,QAAQhF,WAAayC,UAAU,UAApD,SAA+DwB,EAAYI,EAAKW,gBAIhG,qBAAKvC,UAAU,SAAf,SACqB,cAAhB4B,EAAKO,OACF,cAAC,IAAD,CAAWU,KAAMjB,EAAKkB,aAAcC,WAAY,kBAAMb,EAAiB,aAAac,SAAU,SAAAC,GAAI,OAAI,6BAAKA,EAAKC,aAC9G,oBAAIlD,UAAU,QAAd,kBAEV,qBAAKA,UAAU,gBAAf,SACM4B,EAAKuB,SAMe,aAAhBvB,EAAKO,OACH,sBAAKnC,WAAW,UAAA4B,EAAKQ,cAAL,eAAajF,MAAOyE,EAAKuB,SAAShG,IAAM,gBAAkB,eAA1E,UACI,cAAC,IAAD,CAAK6C,UAAU,OAAOE,IAAG,oBAAe0B,EAAKwB,aAApB,UACzB,cAAC,IAAD,CAAMnD,GAAE,aAAQ2B,EAAKuB,SAAS5F,WAAayC,UAAU,UAArD,SAAgEwB,EAAYI,EAAKuB,eAEnE,aAAhBvB,EAAKO,OACH,sBAAKnC,UAAU,SAAf,UACI,cAAC,IAAD,CAAK4C,sBAAuB,kBAAMV,EAAiB,aAAalC,UAAU,yCAAyCE,IAAI,oBACvH,cAAC,IAAD,CAAMD,GAAE,aAAQ2B,EAAKuB,SAAS5F,WAAayC,UAAU,UAArD,SAAgEwB,EAAYI,EAAKuB,eAEnF,sBAAKnD,UAAU,SAAf,UACE,cAAC,IAAD,CAAKA,UAAU,OAAOE,IAAI,oBAC1B,cAAC,IAAD,CAAMD,GAAE,aAAQ2B,EAAKuB,SAAS5F,WAAayC,UAAU,UAArD,SAAgEwB,EAAYI,EAAKuB,eAjB5F5G,GAAQqF,EAAKW,QAAQpF,MAAQZ,EAAKY,IAItB,sBAAK6C,UAAU,cAAf,UAA6B,wBAAQI,QAAS,kBAAM6B,GAAiB,IAAOjC,UAAU,UAAzD,kBAA7B,OAHT,sBAAKA,UAAU,SAAf,UACI,cAAC,IAAD,CAAKA,UAAU,kBAAkBE,IAAI,6BACrC,oBAAIF,UAAU,UAAd,gCAmBpB,sBAAKA,UAAU,OAAf,UACI,qBAAKA,UAAU,MAAf,SACI,+BAAK4B,EAAK9F,OAAS0B,IAAnB,aAGFoE,EAAKuB,UAAY5G,EACfqF,EAAKW,QAAQpF,MAAQZ,EAAKY,IACtB,wBAAQ6C,UAAU,UAAUI,QAAS,kBAAMsC,KAA3C,SAAyD,cAAC,IAAD,CAAKxC,IAAI,mBAElE,KACF,kCA1DiC0B,EAAKzE,KA6D3C,KAET,sBAAK6C,UAAU,QAAQS,MAAO,CAAEC,QAASsB,EAAgB,OAAS,QAAlE,UACI,qBAAKhC,UAAU,YAAf,SACI,sBAAKA,UAAU,UAAf,UACI,wBAAQA,UAAU,SAASI,QAAS,kBAAM6B,GAAiB,IAA3D,SAAmE,qBAAKtB,MAAM,KAAKC,OAAO,KAAvB,SAA4B,sBAAMC,EAAE,4IACvG,oBAAIb,UAAU,QAAd,uBACA,sBAAKA,UAAU,cAAf,UACI,cAAC,IAAD,CAAKI,QAAS,kBAAM2B,EAAQ,IAAI/B,UAAoB,IAAT8B,EAAa,SAAW,GAAI5B,IAAI,oBAC3E,cAAC,IAAD,CAAKE,QAAS,kBAAM2B,EAAQ,IAAI/B,UAAoB,IAAT8B,EAAa,SAAW,GAAI5B,IAAI,oBAC3E,cAAC,IAAD,CAAKE,QAAS,kBAAM2B,EAAQ,IAAI/B,UAAoB,IAAT8B,EAAa,SAAW,GAAI5B,IAAI,uBAG/E,wBAAQF,UAAU,iBAAiBI,QAAS,kBAAMkC,KAAlD,uBAGR,qBAAKtC,UAAU,mB,iBCvJzBqD,EAAiB,CAAC,SAAU,SAAU,YAAa,YAEnDC,EAAgB,CAAC,IAAM,GAAK,IAAM,GAAK,EAAG,GAsIjCC,MApIf,WAEI,IAAMlJ,EAASC,cACf,EAAkCC,mBAAiB,IAAnD,mBAAOiJ,EAAP,KAAkBC,EAAlB,KACA,EAAkClJ,mBAAiB,IAAnD,mBAAOmJ,EAAP,KAAkBC,EAAlB,KACA,EAAsDpJ,oBAAS,GAA/D,mBAAOqJ,EAAP,KAA4BC,EAA5B,KACA,EAAwCtJ,oBAAS,GAAjD,mBAAOuJ,EAAP,KAAqBC,EAArB,KACA,EAAoCxJ,mBAAwB,KAA5D,mBAAOyJ,EAAP,KAAmBC,EAAnB,KACA,EAAwB1J,mBAAS,GAAjC,mBAAOuH,EAAP,KAAaC,EAAb,KAEM1F,EAAWC,cAEXC,EAAOC,aAAmC,SAACC,GAAD,OAAWA,EAAMF,QAC3D2H,EAAQ1H,aAAqC,SAACC,GAAD,OAAWA,EAAMyH,SAC9DxH,EAAUF,aAAsC,SAACC,GAAD,OAAWA,EAAMC,WAEjEyH,EAAU,uCAAG,sBAAAvH,EAAA,yDACTvC,GAAUA,EAAOkD,WAAayG,IAAeF,EADpC,oDAEfC,GAAgB,KAEZxH,EAAK0C,QAAU+E,GAJJ,yCAIuBvG,IAAMC,MAAM,iDAJnC,gCAOLwB,IAAMC,KAAK,YAAa,CAC1BrD,OAAQkI,EAAaxG,IACrBmF,YAAab,IATN,OAYXrE,IAAMgF,QAAQ,gBACdoB,GAAuB,GAbZ,kDAeXpG,IAAMC,MAAM,KAAEU,SAASC,KAAKC,QAAQC,YAfzB,QAkBfwF,GAAgB,GAlBD,0DAAH,qDAyBVK,EAAa,SAACxC,GAChBA,EAAKO,OAAS,QACd9F,EAAS,CAAEU,KAAM,cAAeC,QAAS4E,KAkC7C,OA9BArC,qBAAU,WACN,IAAM8E,EAAY,uCAAG,4BAAAzH,EAAA,sEACSsC,IAAMG,IAAI,uBADnB,OACXiF,EADW,OAGjBjI,EAAS,CAAEU,KAAM,aAAcC,QAASsH,EAAYjG,OAHnC,2CAAH,qDAMlBgG,MACD,IAEH9E,qBAAU,WACD7C,EAAQkF,OAEblF,EAAQkF,KAAKxE,GAAG,WAAW,SAACwE,GAAD,OAAgBvF,EAAS,CAAEU,KAAM,WAAYC,QAAS4E,OACjFlF,EAAQkF,KAAKxE,GAAG,cAAc,SAACmH,GAvB/BlI,EAAS,CAAEU,KAAM,cAAeC,QAuBgCuH,UAEjE,CAAC7H,EAAQkF,OAEZrC,qBAAU,WACN,IAAIiE,EAAoB,GACpBE,EAAoB,GACxBQ,EAAMM,SAAQ,SAAA5C,GACU,YAAhBA,EAAKO,QAAwC,cAAhBP,EAAKO,SAClCP,EAAKW,QAAQpF,OAAb,OAAqBZ,QAArB,IAAqBA,OAArB,EAAqBA,EAAMY,KAAMqG,EAAUiB,KAAK7C,GAAQ8B,EAAUe,KAAK7C,OAG/E6B,EAAaD,GACbG,EAAaD,KACd,CAACnH,EAAM2H,IAGN,sBAAKlE,UAAU,mBAAf,UACI,oBAAIA,UAAU,YAAd,iCACA,sBAAKA,UAAU,cAAf,UACI,sBAAKA,UAAU,OAAf,UACI,oBAAIA,UAAU,aAAd,sBACA,oBAAIA,UAAU,eAAd,SAA8BwD,EAAUkB,YAE3CnI,EAAO,wBAAQyD,UAAU,cAAcI,QAAS,kBAAMyD,GAAuB,IAAtE,wBAAmG,QAE9GL,EAAUkB,OAAS,EAAI,qBAAK1E,UAAU,YAAf,SACnBwD,EAAUmB,KAAI,SAAA/C,GACX,OAAOyB,EAAeuB,SAAShD,EAAKO,QAChC,cAAC,EAAD,CAAwBP,KAAMA,EAAMwC,WAAYA,GAAlCxC,EAAKzE,KACnB,UAEH,qBAAK6C,UAAU,sBAAf,SAAqC,8DAC9C,sBAAKA,UAAU,OAAf,UACI,oBAAIA,UAAU,aAAd,wBACA,oBAAIA,UAAU,eAAd,SAA8B0D,EAAUgB,YAE3ChB,EAAUgB,OAAS,EAAI,qBAAK1E,UAAU,YAAf,SACnB0D,EAAUiB,KAAI,SAAA/C,GACX,OAAOyB,EAAeuB,SAAShD,EAAKO,QAChC,cAAC,EAAD,CAAwBP,KAAMA,EAAMwC,WAAYA,GAAlCxC,EAAKzE,KACnB,UAEH,qBAAK6C,UAAU,sBAAf,SAAqC,8DAC9C,sBAAKA,UAAU,QAAQS,MAAO,CAAEC,QAASkD,EAAsB,OAAS,QAAxE,UACI,qBAAK5D,UAAU,YAAf,SACI,sBAAKA,UAAU,UAAf,UACI,wBAAQA,UAAU,SAASI,QAAS,kBAAMyD,GAAuB,IAAjE,SAAyE,qBAAKlD,MAAM,KAAKC,OAAO,KAAvB,SAA4B,sBAAMC,EAAE,4IAC7G,oBAAIb,UAAU,QAAd,yBACA,oBAAIA,UAAU,WAAd,yBACA,sBAAKA,UAAU,cAAf,UACI,cAAC,IAAD,CAAKI,QAAS,kBAAM2B,EAAQ,IAAI/B,UAAoB,IAAT8B,EAAa,cAAgB,OAAQ5B,IAAI,oBACpF,cAAC,IAAD,CAAKE,QAAS,kBAAM2B,EAAQ,IAAI/B,UAAoB,IAAT8B,EAAa,cAAgB,OAAQ5B,IAAI,oBACpF,cAAC,IAAD,CAAKE,QAAS,kBAAM2B,EAAQ,IAAI/B,UAAoB,IAAT8B,EAAa,cAAgB,OAAQ5B,IAAI,uBAExF,oBAAIF,UAAU,WAAd,2BACA,qBAAKA,UAAU,UAAf,SACKsD,EAAcqB,KAAI,SAAA7I,GAAM,OACrB,qBAAKkE,UAAWgE,IAAelI,EAAS,eAAiB,SAAUsE,QAAS,kBAAM6D,EAAcnI,IAAhG,SAA0GA,SAGlH,yBAAQkE,UAAU,iBAAiBuB,SAAUuC,EAAc1D,QAAS,kBAAM+D,KAA1E,UAAyFL,EAAe,cAAgB,SAAxH,IAAmIA,EAAe,cAAC,IAAD,CAAY1C,KAAM,GAAIC,MAAM,YAAe,aAIrM,qBAAKrB,UAAU,mB,0CCvFhB6E,MA3Cf,SAAmBlD,GAGf,OACI,mCACI,wBAAO3B,UAAU,YAAjB,UACI,gCACI,+BACI,sCACA,qCACA,sCACA,0CACA,+CACA,iDAGR,gCAEQ2B,EAAMuC,MAAMS,KAAI,SAAC/C,EAAMkD,GACnB,GAAoB,UAAhBlD,EAAKO,QAAuBP,EAAKuB,SAArC,CAEA,IAAMrB,EAAOF,EAAKW,QAAQpF,MAAQwE,EAAMpF,KAAKY,IAAMyE,EAAKe,YAAcf,EAAKwB,aACrED,EAAWvB,EAAKW,QAAQpF,MAAQwE,EAAMpF,KAAKY,IAAMyE,EAAKuB,SAAWvB,EAAKW,QACtEa,EAAexB,EAAKW,QAAQpF,MAAQwE,EAAMpF,KAAKY,IAAMyE,EAAKwB,aAAexB,EAAKe,YAC9EoC,EAAYnD,EAAKQ,OAASR,EAAKQ,OAAOjF,MAAQwE,EAAMpF,KAAKY,IAAoB,EAAdyE,EAAK9F,OAAa0B,KAAoBoE,EAAK9F,OAAS0B,IAAmB,EAE5I,OAAO,qBAAgBwC,UAAU,OAA1B,UACH,oBAAIA,UAAU,OAAd,SAAsBgF,IAAOpD,EAAKqD,WAAWC,OAAO,oBACpD,+BAAKtD,EAAK9F,OAAS0B,IAAnB,UACA,oBAAIwC,UAAU,YAAd,SAA0B,cAAC,IAAD,CAAKE,IAAG,mBAAc4B,EAAd,YAClC,6BAAI,cAAC,IAAD,CAAM9B,UAAU,cAAcC,GAAE,aAAQkD,EAAS5F,WAAjD,SAA+DiD,YAAc,OAAC2C,QAAD,IAACA,OAAD,EAACA,EAAU5F,eAC5F,oBAAIyC,UAAU,OAAd,SAAqB,cAAC,IAAD,CAAKE,IAAG,mBAAckD,EAAd,YAC7B,6BAAI,uBAAMpD,UAAyB,IAAd+E,EAAkB,GAAKA,EAAY,EAAI,MAAQ,OAAhE,UAAyEA,EAAzE,cANQD,eCyC7BK,MA1Ef,WACI,IAAQ5H,EAAc6H,cAAd7H,UACR,EAAwBhD,qBAAxB,mBAAOgC,EAAP,KAAa8I,EAAb,KACA,EAA0B9K,mBAAiB,IAA3C,mBAAO2J,EAAP,KAAcoB,EAAd,KACA,EAAgC/K,oBAAS,GAAzC,mBAAOgL,EAAP,KAAiBC,EAAjB,KACA,EAAgCjL,mBAAS,GAAzC,mBAAOkL,EAAP,KAAiBC,EAAjB,KACA,EAAkCnL,mBAAS,GAA3C,mBAAOoL,EAAP,KAAkBC,EAAlB,KAEMC,EAAO,uCAAG,WAAOtI,GAAP,2BAAAX,EAAA,sEAC+BkJ,QAAQC,IAAI,CAAC7G,IAAMG,IAAN,iBAAoB9B,IAAc2B,IAAMG,IAAN,sBAAyB9B,MADvG,mCACLyI,EADK,KACSC,EADT,OAEU,CAACD,EAAa3H,KAAM4H,EAAa5H,MAA1C6F,EAFD,MAEL3H,EAFK,OAIDiJ,GAAY,GAEvBH,EAAQ9I,GACR+I,EAASpB,GAPG,4CAAH,sDAoCb,OA1BA3E,qBAAU,WACN8F,OAAQa,GACH3I,GAELsI,EAAQtI,KACT,CAACA,IAEJgC,qBAAU,WACN,GAAK2E,GAAU3H,EAAf,CAEA,IAAIkJ,EAAW,EACXE,EAAY,EAChBzB,EAAMM,SAAQ,SAAA5C,GACU,UAAhBA,EAAKO,QAAuBP,EAAKQ,SAEjCR,EAAKQ,OAAOjF,MAAQZ,EAAKY,IACzBsI,IAEAE,QAIRD,EAAYD,GACZG,EAAaD,MACd,CAACpJ,EAAM2H,IAGN,qBAAKlE,UAAU,eAAf,SACKzD,EAAO,qCAAE,sBAAKyD,UAAU,iBAAf,UACN,qBAAKA,UAAU,SAASE,IAAI,wBAC5B,sBAAKF,UAAU,YAAf,UACI,qBAAKA,UAAU,UAAf,SACI,oBAAIA,UAAU,YAAd,SAA2BzD,EAAKgB,cAGpC,sBAAKyC,UAAU,YAAf,UACI,sBAAKA,UAAU,WAAf,UACI,oBAAIA,UAAU,UAAd,SAAyByF,IACzB,oBAAIzF,UAAU,MAAd,oBAEJ,qBAAKA,UAAU,gBAAf,eAGA,sBAAKA,UAAU,WAAf,UACI,oBAAIA,UAAU,UAAd,SAAyB2F,IACzB,oBAAI3F,UAAU,MAAd,8BAKZ,cAAC,EAAD,CAAWzD,KAAMA,EAAM2H,MAAOA,OAC3BqB,EAAsC,oDAA3B,oDCtEfY,MAVf,WACI,IAAQC,EAAaC,cAAbD,SAMR,OAJA7G,qBAAU,WACN+G,OAAOC,SAAS,EAAG,KACpB,CAACH,IAEG,M,iBCoIII,MA3Hf,WACI,MAA0BjM,mBAAiB,IAA3C,mBAAO2J,EAAP,KAAcoB,EAAd,KACA,EAAgC/K,mBAAS,GAAzC,mBAAOkL,EAAP,KAAiBC,EAAjB,KACA,EAAkCnL,mBAAS,GAA3C,mBAAOoL,EAAP,KAAkBC,EAAlB,KACA,EAAwBrL,qBAAxB,mBAAOgC,EAAP,KAAa8I,EAAb,KACA,EAAgC9K,mBAAS,CACrCkH,SAAU,KADd,mBAAOgF,EAAP,KAAiBC,EAAjB,KAGA,EAAkDnM,oBAAS,GAA3D,mBAAOoM,EAAP,KAA0BC,EAA1B,KACMvK,EAAWC,cAEXiB,EAAYf,aAAqC,SAACC,GAAD,uBAAWA,EAAMF,YAAjB,aAAW,EAAYgB,aAExEsJ,EAAQ,uCAAG,4BAAAjK,EAAA,+EAEcsC,IAAMC,KAAN,kBAA8BsH,GAF5C,OAEHK,EAFG,OAEuDzI,KAChExB,QAAQC,IAAI,CAAEgK,YAEdzB,GAAQ,SAAA9I,GAAI,OAAIuK,KAChBzK,EAAS,CAAEU,KAAM,YAAaC,QAAST,IAEvCkB,IAAMgF,QAAQ,4BARL,kDAUThF,IAAMC,MAAM,KAAEU,SAASC,KAAKC,QAAQC,YAV3B,0DAAH,qDAkDd,OApCAgB,qBAAU,WACN,GAAKhC,EAAL,CAEA,IAAMwJ,EAAQ,uCAAG,8BAAAnK,EAAA,sEACasC,IAAMG,IAAN,iBAAoB9B,IADjC,cACPhB,EADO,OAC+C8B,KAD/C,SAEgBa,IAAMG,IAAN,sBAAyB9B,IAFzC,OAEP2G,EAFO,OAEuD7F,KAEpEqI,EAAY,CACRjF,SAAUlF,EAAKkF,UAAY,KAE/B4D,EAAQ9I,GACR+I,EAASpB,GARI,2CAAH,qDAWd6C,OACD,CAACxJ,IAEJgC,qBAAU,WACN,GAAK2E,GAAU3H,EAAf,CAEA,IAAIkJ,EAAW,EACXE,EAAY,EAChBzB,EAAMM,SAAQ,SAAA5C,GACU,UAAhBA,EAAKO,QAAuBP,EAAKQ,SAEjCR,EAAKQ,OAAOjF,MAAQZ,EAAKY,IACzBsI,IAEAE,QAIRD,EAAYD,GACZG,EAAaD,MACd,CAACpJ,EAAM2H,IAGN,qCACK3H,EACG,sBAAKyD,UAAU,eAAf,UACI,sBAAKA,UAAU,aAAf,UACI,sBAAKA,UAAU,WAAf,UACI,cAAC,IAAD,CAAKA,UAAU,SAASE,IAAK8G,uBAAaC,EAAa,CAAEC,KAAM3K,EAAKgB,UAAUgB,eAC9E,wBAAQ6B,QAAS,kBAAMwG,GAAqB,IAAO5G,UAAU,QAA7D,6BAEJ,sBAAKA,UAAU,YAAf,UACKzD,EAAKkF,SAAW,qBAAKzB,UAAU,WAAf,SACb,oBAAIA,UAAU,QAAd,SAAuBzD,EAAKkF,aACvB,KACT,sBAAKzB,UAAU,UAAf,UACI,oBAAIA,UAAU,QAAd,SAAuBzD,EAAKgB,YAC5B,mBAAGyC,UAAU,WAAWmB,OAAO,SAASgG,IAAI,sBAAsBC,KAAI,qCAAgC7K,EAAKgB,UAAUgB,YAArH,SAAmI,qBAAK2B,IAAI,0BAEhJ,sBAAKF,UAAU,YAAf,UACI,sBAAKA,UAAU,WAAf,UACI,4CACA,6BAAKyF,OAET,qBAAKzF,UAAU,aAAaS,MAAO,CAC/B4G,gBAAiBnD,EAAMQ,OAAS,EAAf,oHAAgIe,GAAYA,EAAWE,GAAa,IAApK,qCAAoMA,GAAaF,EAAWE,GAAa,IAAzO,yFAGrB,sBAAK3F,UAAU,WAAf,UACI,6CACA,6BAAK2F,gBAKpBzB,EAAMQ,OAAS,EACV,cAAC,EAAD,CAAWnI,KAAMA,EAAM2H,MAAOA,IAEhC,QAEN,KAEN,sBAAKlE,UAAU,QAAQS,MAAO,CAAEC,QAASiG,EAAoB,OAAS,QAAtE,UACI,qBAAK3G,UAAU,YAAf,SACI,sBAAKA,UAAU,UAAf,UACI,wBAAQA,UAAU,SAASI,QAAS,kBAAMwG,GAAqB,IAA/D,SAAuE,qBAAKjG,MAAM,KAAKC,OAAO,KAAvB,SAA4B,sBAAMC,EAAE,4IAC3G,qBAAKb,UAAU,OAAf,SACI,qBAAKsH,IAAI,OAAOpH,IAAI,gBAExB,oBAAIF,UAAU,QAAd,0BACA,qBAAKA,UAAU,SAAf,SACI,uBAAOc,MAAO2F,EAAShF,SAAU8F,QAAS,SAACvG,GAAD,OAAW0F,GAAY,SAAArI,GAAU,OAAO,2BAAKA,GAAZ,IAAkBoD,SAAWT,EAAMG,OAA4BL,YAAY0G,YAAY,eAEtK,wBAAQpH,QAAS,kBAAMyG,KAAY7G,UAAU,SAA7C,uBAGR,qBAAKA,UAAU,mB,uBCVhByH,MAvGf,WACI,IAAMC,EAAcC,iBAA8B,MAElD,EAA8BpN,mBAAS,IAAvC,mBAAO+D,EAAP,KAAgBsJ,EAAhB,KACA,EAAgCrN,mBAAoB,IAApD,mBAAOsN,EAAP,KAAiBC,EAAjB,KAEMzL,EAAWC,cACXC,EAAOC,aAAmC,SAACC,GAAD,OAAWA,EAAMF,QAC3DG,EAAUF,aAAsC,SAACC,GAAD,OAAWA,EAAMC,WAEjEqL,EAAW,uCAAG,sBAAAnL,EAAA,yDACO,IAAnB0B,EAAQoG,OADI,yCACiBjH,IAAMC,MAAM,6BAD7B,gCAINwB,IAAMC,KAAK,eAAgB,CAAE6I,QAAS1J,IAJhC,OAKZjC,EAAS,CAAEU,KAAM,gCALL,gDAOZU,IAAMC,MAAM,KAAEU,SAASC,KAAKC,QAAQC,YAPxB,QAUhBqJ,EAAW,IAVK,yDAAH,qDAaXK,EAAyB,WACtBP,EAAYQ,UAEjBR,EAAYQ,QAAQC,UAAYT,EAAYQ,QAAQE,eAGlDC,EAAe,SAACL,GAClB,IAAMM,EAAeN,EAAQO,MAAM,KAAK5D,KAAI,SAAA6D,GAAC,OAAIA,EAAEC,UAEnDb,EAAWU,EAAaI,KAAK,OA+BjC,OA3BAnJ,qBAAU,WACN,IAAMoJ,EAAO,uCAAG,4BAAA/L,EAAA,sEACYsC,IAAMG,IAAI,qBADtB,OACNwI,EADM,OAC4CxJ,KACxDxB,QAAQC,IAAI,CAAE+K,aAEdC,EAAYD,GAJA,2CAAH,qDAObc,IACAV,MACD,IAEH1I,qBAAU,WACN0I,MACD,CAACJ,IAIJtI,qBAAU,WACD7C,EAAQ4B,SAEb5B,EAAQ4B,QAAQlB,GAAG,cAAc,SAACkB,GAC9BwJ,GAAY,SAAAc,GAAG,OAAKtK,GAAL,mBAAiBsK,YAErC,CAAClM,IAIA,qBAAKsD,UAAU,WAAf,SACI,sBAAKA,UAAU,OAAf,UACI,oBAAIA,UAAU,aAAd,uBACA,qBAAK6I,IAAKnB,EAAa1H,UAAU,WAAjC,SACK6H,EAASlD,KAAI,SAAArG,GAAO,OACjB,sBAAuB0B,UAAU,UAAjC,UACI,sBAAKA,UAAU,SAAf,UACI,qBAAKA,UAAU,SAASE,IAAI,wBAC5B,cAAC,IAAD,CAAMD,GAAE,aAAQ3B,EAAQiE,QAAQhF,WAAayC,UAAU,sBAAvD,SAA8EwB,EAAYlD,EAAQiE,cAEtG,qBAAKvC,UAAU,UAAf,SACI,mBAAGA,UAAU,OAAb,SAAqB1B,EAAQ0J,cAN3B1J,EAAQnB,QASpB2L,YAEN,qBAAK9I,UAAU,eAAf,SACKzD,EACKwM,KAAKC,MAAQzM,EAAK0M,cAAgB,IAChC,qCACI,cAAC,IAAD,CAAkBlI,SAAU,SAACC,GAAD,OAAWqH,EAAcrH,EAAMG,OAA+BL,QAAQoI,WAAY,SAAClI,GAAD,MAAyB,UAAdA,EAAMmI,IAAkBpB,IAAgB,MAAMjH,MAAOxC,EAASkJ,YAAY,oBACnM,wBAAQpH,QAAS,kBAAM2H,KAAe/H,UAAU,WAAhD,SAA2D,cAAC,IAAD,CAAKE,IAAI,uBAEtE,qCACE,cAAC,IAAD,CAAkBa,SAAU,SAACC,GAAD,OAAWqH,EAAcrH,EAAMG,OAA+BL,QAAQoI,WAAY,SAAClI,GAAD,MAAyB,UAAdA,EAAMmI,KAAmBJ,KAAKC,MAAQzM,EAAK0M,cAAgB,IAAOlB,IAAgB,MAAMjH,MAAOxC,EAASkJ,YAAY,oBAC7O,cAAC,IAAD,CAAW3E,KAAMtG,EAAK0M,cAAgB,IAAMG,cAAe,EACvDC,UAAW,EACXrG,SAAU,SAAAC,GAAI,OACVA,EAAKC,QAAUD,EAAKqG,aAAe,EAAI,yBAAQtJ,UAAU,WAAlB,UAA8BiD,EAAKC,QAAnC,IAA6CD,EAAKqG,aAAe,OAAgB,wBAAQlJ,QAAS,kBAAM2H,KAAe/H,UAAU,WAAhD,SAA2D,cAAC,IAAD,CAAKE,IAAI,0BAG1M,4D,iBCrGXqJ,MAXf,WAGI,OACI,sBAAKvJ,UAAU,WAAf,UACI,cAAC,EAAD,IACA,cAACwJ,EAAA,EAAD,Q,cC8DGC,MAlDf,WACI,MAAsClP,mBAAiB,IAAvD,mBAAOmP,EAAP,KAAoBC,EAApB,KACMzF,EAAQ1H,aAAqC,SAACC,GAAD,OAAWA,EAAMyH,SAE9D0F,EAAe,uCAAG,4BAAAhN,EAAA,sEACOsC,IAAMG,IAAI,yBADjB,OACdqK,EADc,OAC2CrL,KAC/DsL,EAAeD,GAFK,2CAAH,qDASrB,OAJAnK,qBAAU,WACNqK,MACD,IAGC,sBAAK5J,UAAU,yBAAf,UACI,oBAAIA,UAAU,oBAAd,0BACA,sBAAKA,UAAU,cAAf,UACKkE,EAAMS,KAAI,SAAA/C,GACP,GAAoB,YAAhBA,EAAKO,QAAyBP,EAAKuB,SAAvC,CAEA,GAAIvB,EAAKQ,OAAQ,CACb,IAAMyH,EAAQjI,EAAKW,QAAQpF,MAAQyE,EAAKQ,OAAOjF,IAAMyE,EAAKuB,SAAWvB,EAAKW,QAC1E,OAAO,sBAAKvC,UAAU,aAAf,UACH,cAAC,IAAD,CAAMA,UAAU,cAAcC,GAAE,aAAQ2B,EAAKQ,OAAO7E,WAApD,SAAkEiD,YAAeoB,EAAKQ,OAAO7E,aAD1F,aACsH,+BAAqB,EAAdqE,EAAK9F,OAAa0B,MAD/I,gBACoL,cAAC,IAAD,CAAMwC,UAAU,cAAcC,GAAE,aAAQ4J,EAAMtM,WAA9C,SAA4DiD,YAAeqJ,EAAMtM,gBAG5Q,OAAO,sBAAKyC,UAAU,aAAf,UACH,cAAC,IAAD,CAAMA,UAAU,cAAcC,GAAE,aAAQ2B,EAAKW,QAAQhF,WAArD,SAAmEiD,YAAeoB,EAAKW,QAAQhF,aAD5F,oBAC+H,cAAC,IAAD,CAAMyC,UAAU,cAAcC,GAAE,aAAQ2B,EAAKuB,SAAS5F,WAAtD,SAAoEiD,YAAeoB,EAAKuB,SAAS5F,oBAI9OmM,EAAY/E,KAAI,SAAA/C,GACb,GAAKA,EAAKuB,SAAV,CAEA,GAAIvB,EAAKQ,OAAQ,CACb,IAAMyH,EAAQjI,EAAKW,QAAQpF,MAAQyE,EAAKQ,OAAOjF,IAAMyE,EAAKuB,SAAWvB,EAAKW,QAC1E,OAAO,sBAAKvC,UAAU,aAAf,UACH,cAAC,IAAD,CAAMA,UAAU,cAAcC,GAAE,aAAQ2B,EAAKQ,OAAO7E,WAApD,SAAkEiD,YAAeoB,EAAKQ,OAAO7E,aAD1F,aACsH,+BAAqB,EAAdqE,EAAK9F,OAAa0B,MAD/I,gBACoL,cAAC,IAAD,CAAMwC,UAAU,cAAcC,GAAE,aAAQ4J,EAAMtM,WAA9C,SAA4DiD,YAAeqJ,EAAMtM,gBAG5Q,OAAO,sBAAKyC,UAAU,aAAf,UACH,cAAC,IAAD,CAAMA,UAAU,cAAcC,GAAE,aAAQ2B,EAAKW,QAAQhF,WAArD,SAAmEiD,YAAeoB,EAAKW,QAAQhF,aAD5F,oBAC+H,cAAC,IAAD,CAAMyC,UAAU,cAAcC,GAAE,aAAQ2B,EAAKuB,SAAS5F,WAAtD,SAAoEiD,YAAeoB,EAAKuB,SAAS5F,2BCnDhPuM,MAVf,WAGI,OACI,qBAAK9J,UAAU,YAAf,SACI,cAAC,EAAD,OC0BN+J,GAAUC,IAAqBC,QA8DtBC,IC/FVC,GD+FUD,GA5Df,WAEE,IAAME,EAAWC,mBAAQ,kBAAMpQ,YAAc8P,MAAU,CAACA,KAClDO,EAAUD,mBAAQ,iBAAM,CAC5BE,cACAC,cACAC,iBACC,CAACV,KAEE1N,EAAWC,cAsBjB,OApBAgK,OAAOoE,iBAAiB,QAAQ,WAE1BpE,OAAOqE,QAETrE,OAAOqE,OAAOvN,GAAG,kBAAkB,WACjCP,QAAQC,IAAI,kCAKlByC,qBAAU,WACR,IAAMqL,EAAaC,YAAG,SAChBC,EAAaD,YAAG,SAChBE,EAAgBF,YAAG,YAEzBxO,EAAS,CAAEU,KAAM,mBAAoBC,QAAS4N,IAC9CvO,EAAS,CAAEU,KAAM,mBAAoBC,QAAS8N,IAC9CzO,EAAS,CAAEU,KAAM,sBAAuBC,QAAS+N,MAChD,IAGD,sBAAK/K,UAAU,MAAf,UACE,cAAC,IAAD,CAAKA,UAAU,aAAaE,IAAI,wBAChC,cAAC,IAAD,CAAKF,UAAU,0BAA0BE,IAAI,wBAC7C,cAAC8K,EAAA,EAAD,CAAoBZ,SAAUA,EAA9B,SACE,eAACa,EAAA,EAAD,CAAgBX,QAASA,EAASY,aAAW,EAA7C,UACE,cAAC,IAAD,UACE,eAAC,IAAD,WACE,cAAC9Q,EAAA,EAAD,IACA,cAAC,EAAD,IACA,sBAAK4F,UAAU,OAAf,UACE,cAAC,EAAD,IACA,eAAC,IAAD,WACE,cAAC,IAAD,CAAOmL,KAAK,IAAIC,QAAS,cAAC,IAAD,CAAUnL,GAAG,WACtC,cAAC,IAAD,CAAOkL,KAAK,OAAOC,QAAS,cAAC,EAAD,MAC5B,cAAC,IAAD,CAAOD,KAAK,MAAMC,QAAS,cAAC,EAAD,MAC3B,cAAC,IAAD,CAAOD,KAAK,gBAAgBC,QAAS,cAAC,EAAD,SAEvC,cAAC,EAAD,YAIN,cAAC,IAAD,CAAgBC,UAAW,gBE5EtBC,GAZS,SAACC,GACnBA,GAAeA,aAAuBC,UACxC,8BAAqBC,MAAK,YAAkD,IAA/CC,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAON,GACPO,EAAQP,O,mBDPTpB,K,sBAAAA,E,0CAAAA,E,2DAAAA,Q,KAwBU,IEvBV4B,I,SAAAA,K,wBAAAA,E,oBAAAA,E,2BAAAA,Q,KAwBU,ICzBVC,I,SAAAA,K,2BAAAA,Q,KAaU,ICbVC,I,SAAAA,K,oCAAAA,E,oCAAAA,E,2CAAAA,Q,KAwBL,IAAMC,GAAiB,CAAE,UAAQhG,EAAW,UAAQA,EAAW,aAAWA,GCjBpEiG,GAAWC,aAAgB,CAC7B7P,KLgBW,WAAiE,IAAhEE,EAA+D,uDAA1C,KAAM4P,EAAoC,uCAE3E,OAAQA,EAAOtP,MACX,KAAKoN,GAAYmC,UACb,OAAOD,EAAOrP,QAElB,KAAKmN,GAAYoC,oBACb,OAAO9P,GAAK,2BAASA,GAAT,IAAgBwC,QAASxC,EAAMwC,QAAUoN,EAAOrP,UAEhE,KAAKmN,GAAYqC,4BACb,OAAO/P,GAAK,2BAASA,GAAT,IAAgBwM,cAAeF,KAAKC,QAEpD,QACI,OAAOvM,IK5BfpC,OFIW,WAA+F,IAA9FoC,EAA6F,uDAA1D,KAAM4P,EAAoD,uCACzG,OAAQA,EAAOtP,OACNiP,GAAcS,YACRJ,EAAOrP,QAGPP,GETfyH,MHeW,WAA4D,IAA3DzH,EAA0D,uDAA1C,GAAI4P,EAAsC,uCAEtE,OAAQA,EAAOtP,MACX,KAAKgP,GAAaW,WACd,OAAOL,EAAOrP,QAElB,KAAK+O,GAAaY,SACd,OAAIlQ,EAAMmQ,MAAK,SAAAhL,GAAI,OAAIA,EAAKzE,MAAQkP,EAAOrP,QAAQG,OAAaV,EAE1D,GAAN,mBAAWA,GAAX,CAAkB4P,EAAOrP,UAE7B,KAAK+O,GAAac,YACd,OAAOpQ,EAAMkI,KAAI,SAAA/C,GACb,OAAIA,EAAKzE,MAAQkP,EAAOrP,QAAQG,KACE,UAA1BkP,EAAOrP,QAAQmF,SACfkK,EAAOrP,QAAQmF,OAAS,YACxBkK,EAAOrP,QAAQ8F,aAAeiG,KAAKC,MAAQ,KAExCqD,EAAOrP,SAEX4E,KAGf,QACI,OAAOnF,IGtCfC,QDeW,WAAsE,IAArED,EAAoE,uDAAnDyP,GAAgBG,EAAmC,uCAChF,OAAQA,EAAOtP,MACX,KAAKkP,GAAea,iBAChB,OAAO,2BAAKrQ,GAAZ,IAAmB,KAAQ4P,EAAOrP,UAEtC,KAAKiP,GAAec,iBAChB,OAAO,2BAAKtQ,GAAZ,IAAmB,KAAQ4P,EAAOrP,UAEtC,KAAKiP,GAAee,oBAChB,OAAO,2BAAKvQ,GAAZ,IAAmB,QAAW4P,EAAOrP,UAEzC,QACI,OAAOP,MCjBJwQ,gBAAYd,ICf3Be,IAASC,OACP,cAAC,aAAD,UACE,cAAC,IAAD,CAAUC,MAAOA,GAAjB,SACE,cAAC,GAAD,QAGJC,SAASC,eAAe,SAM1BhC,M,gCCpBA,kCAAO,IAAM9K,EAAiB,SAACjD,GAC3B,OAAOA,EAAUgQ,MAAM,EAAG,GAAK,MAAQhQ,EAAUgQ,OAAO,K,0ECD5D,uBAwBe/D,IAnBf,WAEI,OACI,qBAAKxJ,UAAU,UAAf,SACI,sBAAKA,UAAU,YAAf,UACI,qBAAKA,UAAU,cAAf,SACI,mBAAGmB,OAAO,SAASgG,IAAI,sBAAsBC,KAAK,gCAAlD,SAAkF,qBAAKlH,IAAI,yBAE/F,qBAAKF,UAAU,cAAf,SACI,mBAAGmB,OAAO,SAASgG,IAAI,sBAAsBC,KAAK,sCAAlD,SAAwF,qBAAKlH,IAAI,yBAErG,qBAAKF,UAAU,cAAf,SACI,mBAAGmB,OAAO,SAASgG,IAAI,sBAAsBC,KAAK,8CAAlD,SAAgG,qBAAKlH,IAAI,kC","file":"static/js/main.2ffdaaa0.chunk.js","sourcesContent":["import React, { useEffect, useState } from 'react';\r\n\r\nimport { useWallet, WalletContextState } from '@solana/wallet-adapter-react';\r\nimport axios from 'axios';\r\n\r\nimport { useDispatch, useSelector } from 'react-redux';\r\n\r\nimport { Connection, Keypair, LAMPORTS_PER_SOL, Message, PublicKey, SystemProgram, Transaction } from '@solana/web3.js'\r\nimport { clusterApiUrl } from '@solana/web3.js'\r\nimport { WalletMultiButton } from '@solana/wallet-adapter-react-ui';\r\n\r\nimport '../css/Navbar.css'\r\nimport '../css/Modal.css'\r\nimport '../css/Dropdown.css'\r\nimport User from '../interfaces/User';\r\nimport { CombinedReducer } from '../store';\r\nimport Svg from 'react-inlinesvg'\r\n\r\nimport { Sockets } from '../reducers/sockets';\r\nimport { Link } from 'react-router-dom';\r\nimport { toast } from 'react-toastify';\r\nimport ClipLoader from \"react-spinners/ClipLoader\";\r\nimport { NavLink } from 'react-router-dom';\r\nimport Socials from './Socials';\r\nimport { shortenAddress } from '../utils/shortenAddress';\r\n\r\nconst messageToSign = Uint8Array.from(Buffer.from('Login to the Degen Games'))\r\n\r\nconst connection = new Connection(\r\n    clusterApiUrl('devnet'),\r\n    'confirmed',\r\n);\r\n\r\nconst servicePublicKey = new PublicKey('BBMtXMEiuy9TZNR78e4UcX8CF4xWju7kRaUu6UyVFZ6G')\r\n\r\nfunction Navbar() {\r\n\r\n    const wallet = useWallet()\r\n    const [isAskedToVerify, setIsAskedToVerify] = useState(false)\r\n    const [isLoggedIn, setIsLoggedIn] = useState(false)\r\n    const [depositModalOpen, setDepositModalOpen] = useState(false)\r\n    const [menuOpen, setMenuOpen] = useState(false)\r\n    const [depositAmount, setDepositAmount] = useState<number | null>(0)\r\n    const [depositStatus, setDepositStatus] = useState('none')\r\n    const [withdrawModalOpen, setWithdrawModalOpen] = useState(false)\r\n    const [withdrawAmount, setWithdrawAmount] = useState<number | null>(0)\r\n    const [withdrawnAmount, setWithdrawnAmount] = useState<number | null>(0)\r\n    const [balanceChanged, setBalanceChanged] = useState('0')\r\n    const [withdrawStatus, setWithdrawStatus] = useState('none')\r\n    const [withdrawData, setWithdrawData] = useState<{ amount: number, instructions: number[], serviceSignature: number[] }>({ amount: 0, instructions: [], serviceSignature: [] })\r\n    const [prevBalance, setPrevBalance] = useState<number | null>(null)\r\n    const dispatch = useDispatch()\r\n    const user = useSelector<CombinedReducer, User>((state) => state.user)\r\n    const sockets = useSelector<CombinedReducer, Sockets>((state) => state.sockets)\r\n\r\n    const connectUser = async (user: User) => {\r\n        console.log({ wallet })\r\n        dispatch({ type: 'LOAD_WALLET', payload: wallet })\r\n        dispatch({ type: 'LOAD_USER', payload: user })\r\n        connectSocket(user)\r\n        return setIsLoggedIn(true)\r\n    }\r\n\r\n    const connectSocket = (user: User) => {\r\n        if (!(sockets && sockets.user)) return\r\n\r\n        sockets.user.emit('subscribeToProfile', user._id)\r\n        sockets.user.on('balanceChange', (amount: number, fromDeposit: boolean) => {\r\n            dispatch({ type: 'UPDATE_USER_BALANCE', payload: amount })\r\n\r\n            if (fromDeposit) setDepositStatus('validated')\r\n        })\r\n    }\r\n\r\n    const inputDepositAmount = (input: string) => {\r\n        if (!input) return setDepositAmount(null)\r\n        console.log({ input })\r\n        if (Number(input) >= 0) setDepositAmount(Number(input) * LAMPORTS_PER_SOL)\r\n        else setDepositAmount(0)\r\n    }\r\n    const inputWithdrawAmount = (input: string) => {\r\n        if (!input) return setWithdrawAmount(null)\r\n        console.log({ input })\r\n        if (Number(input) >= 0) setWithdrawAmount(Number(input) * LAMPORTS_PER_SOL)\r\n        else setWithdrawAmount(0)\r\n    }\r\n\r\n    const deposit = async () => {\r\n        if (!(wallet && wallet.publicKey && depositAmount)) return\r\n\r\n        if (depositAmount < 0.01 * LAMPORTS_PER_SOL) return toast.error('Minimum deposit amount is 0.01')\r\n\r\n        try {\r\n            const transaction = new Transaction().add(\r\n                SystemProgram.transfer({\r\n                    fromPubkey: wallet.publicKey,\r\n                    toPubkey: servicePublicKey,\r\n                    lamports: depositAmount\r\n                })\r\n            )\r\n\r\n            await wallet.sendTransaction(transaction, connection)\r\n            console.log({ transaction })\r\n            setDepositStatus('sent')\r\n        } catch (e: any) {\r\n            toast.error(e.response.data.message.toString())\r\n            setDepositStatus('failed')\r\n        }\r\n    }\r\n\r\n    const withdraw = async (customWithdrawData: null | typeof withdrawData = null) => {\r\n        if (!(wallet && wallet.publicKey && wallet.signTransaction)) return\r\n        setWithdrawStatus('withdrawing')\r\n\r\n        let txWithdrawData = withdrawData\r\n        if (customWithdrawData) {\r\n            txWithdrawData = customWithdrawData\r\n        }\r\n        const recoverTx = Transaction.populate(Message.from(txWithdrawData.instructions))\r\n\r\n        console.log({ recoverTx })\r\n\r\n        recoverTx.addSignature(servicePublicKey, Buffer.from(txWithdrawData.serviceSignature))\r\n\r\n        await wallet.sendTransaction(recoverTx, connection)\r\n\r\n        setWithdrawnAmount(txWithdrawData.amount)\r\n        setWithdrawStatus('withdrawn')\r\n    }\r\n\r\n    const requestWithdraw = async () => {\r\n        if (!(wallet && wallet.publicKey && withdrawAmount)) return\r\n\r\n        if (withdrawAmount < 0.01 * LAMPORTS_PER_SOL) return toast.error(\"Minimum withdraw is 0.01 SOLs\")\r\n        if (withdrawAmount > user.balance) return toast.error(\"Balance needs to be higher than the withdraw amount\")\r\n\r\n        try {\r\n            setWithdrawStatus('withdrawing')\r\n            const withdrawData = (await axios.post('/api/u/requestWithdraw', { amount: withdrawAmount })).data\r\n\r\n            setWithdrawData({\r\n                amount: withdrawData.amount,\r\n                instructions: withdrawData.instructions,\r\n                serviceSignature: withdrawData.serviceSignature\r\n            })\r\n\r\n            withdraw({\r\n                amount: withdrawData.amount,\r\n                instructions: withdrawData.instructions,\r\n                serviceSignature: withdrawData.serviceSignature\r\n            })\r\n\r\n        } catch (e: any) {\r\n            toast.error(e.response.data.message.toString())\r\n        }\r\n    }\r\n\r\n    const getPendingWithdraw = async (wallet: WalletContextState) => {\r\n        try {\r\n            let pendingWithdraw = (await axios.get('/api/u/pendingWithdraw')).data\r\n\r\n            if (!pendingWithdraw) return\r\n            setWithdrawStatus('hasPending')\r\n            setWithdrawAmount(pendingWithdraw.amount)\r\n            setWithdrawData({\r\n                amount: pendingWithdraw.amount,\r\n                instructions: pendingWithdraw.instructions,\r\n                serviceSignature: pendingWithdraw.serviceSignature\r\n            })\r\n            console.log({ pendingWithdraw })\r\n        } catch (e: any) {\r\n            toast.error(e.response.data.message.toString())\r\n            console.log(e)\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (!(wallet && user)) return\r\n\r\n        getPendingWithdraw(wallet)\r\n    }, [wallet, user])\r\n\r\n    useEffect(() => {\r\n        const signAndAuth = async (wallet: WalletContextState) => {\r\n            try {\r\n                if (!wallet || !wallet.signMessage || !wallet.publicKey || isAskedToVerify) return\r\n                setIsAskedToVerify(true)\r\n\r\n                let { authenticated, user } = (await axios.get('/api/auth/state')).data\r\n                console.log({ authenticated })\r\n                if (authenticated) {\r\n                    if (user.publicKey === wallet.publicKey.toBase58()) {\r\n                        await connectUser(user)\r\n                        return\r\n                    }\r\n                    console.log('PUBLIC KEYS ARE NOT THE SAME!')\r\n                    await axios.get('/api/auth/logout')\r\n                }\r\n\r\n                const publicKey = wallet.publicKey.toBytes()\r\n                const signedMessage = await wallet.signMessage(messageToSign)\r\n\r\n                user = (await axios.post('/api/auth/login', { publicKey: Array.from(publicKey), signedMessage: Array.from(signedMessage) }, { withCredentials: true })).data\r\n\r\n                await connectUser(user)\r\n            } catch (e: any) {\r\n                toast.error(e.response.data.message.toString())\r\n                console.log(e)\r\n            }\r\n        }\r\n\r\n        signAndAuth(wallet)\r\n    }, [wallet])\r\n\r\n    useEffect(() => {\r\n        if (!user) return\r\n        if (prevBalance != null) {\r\n            console.log('Balance Update!', user.balance - prevBalance)\r\n            if (user.balance - prevBalance >= 0) {\r\n                setBalanceChanged('1')\r\n            } else {\r\n                setBalanceChanged('-1')\r\n            }\r\n        }\r\n        setPrevBalance(user.balance)\r\n    }, [user?.balance])\r\n\r\n    return (\r\n        <div className='Navbar' >\r\n            <div className='navbar'>\r\n                <div className='left'>\r\n                    <Link to='/' className='logo'>\r\n                        <img src='/logo.png' />\r\n                    </Link>\r\n                    <div className='navLinks'>\r\n                        <NavLink to='/rps' className={({ isActive }) => (isActive ? 'activeNavLink' : 'inactiveNavLink')}>\r\n                            <p className='title'>Rock Paper Scissors</p>\r\n                        </NavLink>\r\n                    </div>\r\n                </div>\r\n                <div onClick={() => setMenuOpen(!menuOpen)} className={menuOpen ? \"toggleMenu open\" : \"toggleMenu\"}>\r\n                    <span></span>\r\n                    <span></span>\r\n                    <span></span>\r\n                </div>\r\n                {\r\n                    isLoggedIn && user\r\n                        ? (\r\n                            <div className='user'>\r\n                                <div className='balance'>\r\n                                    <h4 data-balancechanged={balanceChanged} onAnimationEnd={() => setBalanceChanged('0')} className='amount'>{Number((user?.balance / LAMPORTS_PER_SOL).toFixed(5))} SOL</h4>\r\n                                </div>\r\n                                <button onClick={() => { setDepositModalOpen(true); setDepositStatus('none') }} className='depositB'>Deposit</button>\r\n                                <button onClick={() => setWithdrawModalOpen(true)} className='withdrawB'>Withdraw</button>\r\n                                <Link to={`/u/${user.publicKey.toString()}`} className='profile'>\r\n                                    <h4 className='name'>{shortenAddress(user.publicKey.toString())}</h4>\r\n                                </Link>\r\n                            </div>\r\n                        )\r\n                        : (\r\n                            <div className='multiButton'>\r\n                                <WalletMultiButton />\r\n                            </div>\r\n                        )\r\n                }\r\n            </div >\r\n            <div className='modal' style={{ display: depositModalOpen ? 'flex' : 'none' }}>\r\n                <div className='container'>\r\n                    <div className='wrapper'>\r\n                        <button className='closeB' onClick={() => setDepositModalOpen(false)}><svg width=\"14\" height=\"14\"><path d=\"M14 12.461 8.3 6.772l5.234-5.233L12.006 0 6.772 5.234 1.54 0 0 1.539l5.234 5.233L0 12.006l1.539 1.528L6.772 8.3l5.69 5.7L14 12.461z\"></path></svg></button>\r\n                        <h1 className='title'>Deposit</h1>\r\n                        {\r\n                            depositStatus === 'none' ?\r\n                                <>\r\n                                    <input type=\"number\" value={depositAmount === null ? '' : depositAmount / LAMPORTS_PER_SOL} onChange={(event) => inputDepositAmount((event.target as HTMLInputElement).value)} />\r\n                                    <button className='actionB modalB' onClick={() => deposit()}>Deposit</button></>\r\n                                :\r\n                                depositStatus === 'sent' ?\r\n                                    <>\r\n                                        <h3 className='status'>Validating <ClipLoader size={13} color='#443f89' /></h3>\r\n                                    </> : depositStatus === 'validated' ? <h3 className='status'>Succesfully validated</h3> : <h3 className='status'>Failed</h3>\r\n                        }\r\n                    </div>\r\n                </div>\r\n                <div className='overlay'></div>\r\n            </div>\r\n            <div className='modal' style={{ display: withdrawModalOpen ? 'flex' : 'none' }}>\r\n                <div className='container'>\r\n                    <div className='wrapper'>\r\n                        <button className='closeB' onClick={() => setWithdrawModalOpen(false)}><svg width=\"14\" height=\"14\"><path d=\"M14 12.461 8.3 6.772l5.234-5.233L12.006 0 6.772 5.234 1.54 0 0 1.539l5.234 5.233L0 12.006l1.539 1.528L6.772 8.3l5.69 5.7L14 12.461z\"></path></svg></button>\r\n                        <h1 className='title'>Withdraw</h1>\r\n                        {\r\n                            withdrawStatus === 'none'\r\n                                ?\r\n                                <>\r\n                                    <input type=\"number\" value={withdrawAmount === null ? '' : withdrawAmount / LAMPORTS_PER_SOL} onChange={(event) => inputWithdrawAmount((event.target as HTMLInputElement).value)} />\r\n                                    <button className='actionB modalB' onClick={() => requestWithdraw()}>Withdraw</button></>\r\n                                :\r\n                                withdrawStatus === 'hasPending' || withdrawStatus === 'withdrawing' ?\r\n                                    <div className='pending'>\r\n                                        <h2>{withdrawData?.amount ? `Pending: ${withdrawData.amount / LAMPORTS_PER_SOL} SOL` : 'Requesting...'}</h2>\r\n                                        <button className='actionB modalB' disabled={withdrawStatus === 'withdrawing'} onClick={() => withdraw()}><span className='withdrawLabel'>Withdraw</span> {withdrawStatus === 'withdrawing' ? <ClipLoader size={13} color='#27244f' /> : null}</button>\r\n                                    </div> : withdrawStatus === 'withdrawn' ?\r\n                                        <h2>Succesfully withdrawn {withdrawnAmount ? withdrawnAmount / LAMPORTS_PER_SOL : null}</h2>\r\n                                        : <h3 className='status'>Failed</h3>\r\n                        }\r\n                    </div>\r\n                </div>\r\n                <div className='overlay'></div>\r\n            </div>\r\n            <div style={{ display: menuOpen ? 'flex' : 'none' }} className='menu'>\r\n                <div className='navLinks'>\r\n                    <NavLink onClick={() => setDepositModalOpen(true)} to='' className='activeNavLink navLink'>\r\n                        <img className='icon' src='/img/deposit.png' />\r\n                        <p className='title'>Deposit</p>\r\n                    </NavLink>\r\n                    <NavLink onClick={() => setWithdrawModalOpen(true)} to='' className='activeNavLink navLink'>\r\n                        <img className='icon' src='/img/withdraw.png' />\r\n                        <p className='title'>Withdraw</p>\r\n                    </NavLink>\r\n                </div>\r\n                <Socials />\r\n            </div>\r\n        </div >\r\n    );\r\n}\r\n\r\nexport default Navbar;\r\n","import User from \"../interfaces/User\";\r\nimport { shortenAddress } from \"./shortenAddress\";\r\n\r\nexport const displayName = (user: User) => {\r\n    return user.username || shortenAddress(user.publicKey)\r\n}","import React, { useEffect, useState } from 'react';\r\n\r\nimport { useWallet } from '@solana/wallet-adapter-react';\r\nimport axios from 'axios';\r\n\r\nimport { useDispatch, useSelector } from 'react-redux';\r\n\r\nimport { LAMPORTS_PER_SOL } from '@solana/web3.js'\r\nimport Countdown from 'react-countdown';\r\nimport Svg from 'react-inlinesvg'\r\n\r\nimport '../css/ActiveGames.css'\r\nimport '../css/Coin.css'\r\nimport '../css/Modal.css'\r\nimport User from '../interfaces/User';\r\nimport { CombinedReducer } from '../store';\r\nimport Game from '../interfaces/Game';\r\nimport { toast } from 'react-toastify';\r\nimport { Link } from 'react-router-dom';\r\nimport { displayName } from '../utils/displayName';\r\n\r\nimport 'animate.css'\r\n\r\ninterface Props {\r\n    game: Game,\r\n    removeGame: (game: Game) => void\r\n}\r\n\r\nfunction GameBox(props: Props) {\r\n    const [game, setGame] = useState<Game>()\r\n    const [move, setMove] = useState(0)\r\n    const [joinModalOpen, setJoinModalOpen] = useState(false)\r\n\r\n    const wallet = useWallet()\r\n    const dispatch = useDispatch()\r\n    const user = useSelector<CombinedReducer, User>((state) => state.user)\r\n\r\n    useEffect(() => {\r\n        setGame(props.game)\r\n    }, [props.game])\r\n\r\n    const changeGameStatus = (status: string) => {\r\n        if (!game) return\r\n        if (game.status === status) return\r\n\r\n        if (game.winner?._id === user._id && status === 'revealed') dispatch({ type: 'UPDATE_USER_BALANCE', payload: game.amount * 2 })\r\n\r\n        setGame({ ...game, status })\r\n\r\n        if (status === 'revealed') {\r\n            setTimeout(() => {\r\n                game.status = 'removed'\r\n                dispatch({ type: 'UPDATE_GAME', payload: game })\r\n            }, 2000)\r\n        }\r\n    }\r\n\r\n    const joinGame = async () => {\r\n        if (!(wallet && wallet.publicKey && game)) return\r\n\r\n        if (user._id === game.creator._id) return toast.error('You can not join your game')\r\n        if (user.balance < game.amount) return toast.error('Balance needs to be higher than the game bet')\r\n\r\n        try {\r\n            await axios.post('/api/game/join', {\r\n                gameId: game._id,\r\n                move\r\n            })\r\n\r\n            toast.success('Joined the game')\r\n\r\n            setJoinModalOpen(false)\r\n        } catch (e: any) {\r\n            toast.error(e.response.data.message.toString())\r\n        }\r\n    }\r\n\r\n    const cancelGame = async () => {\r\n        if (!(wallet && wallet.publicKey && game)) return\r\n\r\n        if (game.creator._id !== user._id) return toast.error('You can not cancel another person`s game')\r\n\r\n        try {\r\n            await axios.post('/api/game/cancel', {\r\n                gameId: game._id\r\n            })\r\n\r\n            toast.success('Game has been cancelled')\r\n        } catch (e: any) {\r\n            toast.error(e.response.data.message.toString())\r\n        }\r\n    }\r\n\r\n    return (\r\n        <>\r\n            {game && game.status !== 'removed' ? <div key={game._id} className='gameWrapper'>\r\n                <div className=\"players\">\r\n                    <div className='playerWrapper'>\r\n                        {game.status === 'revealed' ?\r\n                            <div className={game.winner?._id == game.creator._id ? 'player winner' : 'player loser'}>\r\n                                <Svg className='move flip' src={`./img/move${game.creatorMove}.svg`} />\r\n                                <Link to={`/u/${game.creator.publicKey}`} className='address'>{displayName(game.creator)}</Link>\r\n                            </div>\r\n                            : game.status === 'flipping' ?\r\n                                <div className='player'>\r\n                                    <div className='flip'><Svg onAnimationEndCapture={() => changeGameStatus('revealed')} className='move animate__animated animate__bounce' src='./img/move0.svg' /></div>\r\n                                    <Link to={`/u/${game.creator.publicKey}`} className='address'>{displayName(game.creator)}</Link>\r\n                                </div>\r\n                                : <div className='player'>\r\n                                    <Svg className='move flip' src='./img/move0.svg' />\r\n                                    <Link to={`/u/${game.creator.publicKey}`} className='address'>{displayName(game.creator)}</Link>\r\n                                </div>\r\n                        }\r\n                    </div>\r\n                    <div className='middle'>\r\n                        {game.status === 'countdown' ?\r\n                            <Countdown date={game.countDownEnd} onComplete={() => changeGameStatus('flipping')} renderer={time => <h3>{time.seconds}</h3>} />\r\n                            : <h3 className='vsTag'>VS</h3>}\r\n                    </div>\r\n                    <div className='playerWrapper'>\r\n                        {!game.opponent ?\r\n                            !user || game.creator._id === user._id ?\r\n                                <div className='player'>\r\n                                    <Svg className='movePlaceholder' src='/img/movePlaceholder.svg' />\r\n                                    <h3 className='address'>waiting...</h3>\r\n                                </div> : <div className='player join'><button onClick={() => setJoinModalOpen(true)} className='actionB'>Join</button> </div>\r\n                            : game.status === 'revealed' ?\r\n                                <div className={game.winner?._id == game.opponent._id ? 'player winner' : 'player loser'}>\r\n                                    <Svg className='move' src={`./img/move${game.opponentMove}.svg`} />\r\n                                    <Link to={`/u/${game.opponent.publicKey}`} className='address'>{displayName(game.opponent)}</Link>\r\n                                </div>\r\n                                : game.status === 'flipping' ?\r\n                                    <div className='player'>\r\n                                        <Svg onAnimationEndCapture={() => changeGameStatus('revealed')} className='move animate__animated animate__bounce' src='./img/move0.svg' />\r\n                                        <Link to={`/u/${game.opponent.publicKey}`} className='address'>{displayName(game.opponent)}</Link>\r\n                                    </div>\r\n                                    : <div className='player'>\r\n                                        <Svg className='move' src='./img/move0.svg' />\r\n                                        <Link to={`/u/${game.opponent.publicKey}`} className='address'>{displayName(game.opponent)}</Link>\r\n                                    </div>\r\n                        }\r\n                    </div>\r\n                </div>\r\n                <div className='info'>\r\n                    <div className='bet'>\r\n                        <h3>{game.amount / LAMPORTS_PER_SOL} SOL</h3>\r\n                    </div>\r\n\r\n                    {!game.opponent && user ?\r\n                        game.creator._id === user._id ?\r\n                            <button className='deleteB' onClick={() => cancelGame()}><Svg src='/img/bin.svg' /></button>\r\n                            :\r\n                            null\r\n                        : <></>\r\n                    }\r\n                </div>\r\n            </div> : null\r\n            }\r\n            <div className='modal' style={{ display: joinModalOpen ? 'flex' : 'none' }}>\r\n                <div className='container'>\r\n                    <div className='wrapper'>\r\n                        <button className='closeB' onClick={() => setJoinModalOpen(false)}><svg width=\"14\" height=\"14\"><path d=\"M14 12.461 8.3 6.772l5.234-5.233L12.006 0 6.772 5.234 1.54 0 0 1.539l5.234 5.233L0 12.006l1.539 1.528L6.772 8.3l5.69 5.7L14 12.461z\"></path></svg></button>\r\n                        <h1 className='title'>Join Game</h1>\r\n                        <div className='coinChooser'>\r\n                            <Svg onClick={() => setMove(0)} className={move === 0 ? 'chosen' : ''} src='./img/move0.svg' />\r\n                            <Svg onClick={() => setMove(1)} className={move === 1 ? 'chosen' : ''} src='./img/move1.svg' />\r\n                            <Svg onClick={() => setMove(2)} className={move === 2 ? 'chosen' : ''} src='./img/move2.svg' />\r\n                        </div>\r\n\r\n                        <button className='actionB modalB' onClick={() => joinGame()}>Join</button>\r\n                    </div>\r\n                </div>\r\n                <div className='overlay'></div>\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default GameBox;","import React, { useEffect, useState } from 'react';\r\n\r\nimport { useWallet } from '@solana/wallet-adapter-react';\r\nimport axios from 'axios';\r\n\r\nimport { useDispatch, useSelector } from 'react-redux';\r\n\r\nimport '../css/ActiveGames.css'\r\nimport '../css/Coin.css'\r\nimport '../css/Modal.css'\r\nimport User from '../interfaces/User';\r\nimport { CombinedReducer } from '../store';\r\nimport Game from '../interfaces/Game';\r\nimport { toast } from 'react-toastify';\r\nimport { Sockets } from '../reducers/sockets';\r\nimport GameBox from './GameBox';\r\nimport { LAMPORTS_PER_SOL } from '@solana/web3.js';\r\nimport ClipLoader from \"react-spinners/ClipLoader\";\r\n\r\nimport Svg from 'react-inlinesvg'\r\n\r\nconst activeStatuses = ['active', 'joined', 'countdown', 'flipping']\r\n\r\nconst amountOptions = [0.05, 0.1, 0.25, 0.5, 1, 2]\r\n\r\nfunction ActiveGames() {\r\n\r\n    const wallet = useWallet()\r\n    const [userGames, setUserGames] = useState<Game[]>([])\r\n    const [openGames, setOpenGames] = useState<Game[]>([])\r\n    const [createGameModalOpen, setCreateGameModalOpen] = useState(false)\r\n    const [creatingGame, setCreatingGame] = useState(false)\r\n    const [gameAmount, setGameAmount] = useState<number | null>(0.05)\r\n    const [move, setMove] = useState(0)\r\n\r\n    const dispatch = useDispatch()\r\n\r\n    const user = useSelector<CombinedReducer, User>((state) => state.user)\r\n    const games = useSelector<CombinedReducer, Game[]>((state) => state.games)\r\n    const sockets = useSelector<CombinedReducer, Sockets>((state) => state.sockets)\r\n\r\n    const createGame = async () => {\r\n        if (!(wallet && wallet.publicKey && gameAmount && !creatingGame)) return\r\n        setCreatingGame(true)\r\n\r\n        if (user.balance < gameAmount) return toast.error('Balance needs to be higher than the game bet')\r\n\r\n        try {\r\n            await axios.post('/api/game', {\r\n                amount: gameAmount * LAMPORTS_PER_SOL,\r\n                creatorMove: move\r\n            })\r\n\r\n            toast.success('Game created')\r\n            setCreateGameModalOpen(false)\r\n        } catch (e: any) {\r\n            toast.error(e.response.data.message.toString())\r\n        }\r\n\r\n        setCreatingGame(false)\r\n    }\r\n\r\n    const gameUpdate = (game: Game) => {\r\n        dispatch({ type: 'UPDATE_GAME', payload: game })\r\n    }\r\n\r\n    const removeGame = (game: Game) => {\r\n        game.status = 'ended'\r\n        dispatch({ type: 'UPDATE_GAME', payload: game })\r\n    }\r\n\r\n\r\n    useEffect(() => {\r\n        const getGamesData = async () => {\r\n            const activeGames = await axios.get('/api/game/allActive')\r\n\r\n            dispatch({ type: 'LOAD_GAMES', payload: activeGames.data })\r\n        }\r\n\r\n        getGamesData()\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        if (!sockets.game) return\r\n\r\n        sockets.game.on('newGame', (game: Game) => dispatch({ type: 'ADD_GAME', payload: game }))\r\n        sockets.game.on('gameUpdate', (updatedGame: Game) => gameUpdate(updatedGame))\r\n\r\n    }, [sockets.game])\r\n\r\n    useEffect(() => {\r\n        let userGames: Game[] = []\r\n        let openGames: Game[] = []\r\n        games.forEach(game => {\r\n            if (game.status !== 'removed' && game.status !== 'cancelled') {\r\n                game.creator._id === user?._id ? userGames.push(game) : openGames.push(game)\r\n            }\r\n        })\r\n        setUserGames(userGames)\r\n        setOpenGames(openGames)\r\n    }, [user, games])\r\n\r\n    return (\r\n        <div className='Page ActiveGames' >\r\n            <h1 className='gameTitle'>Rock Paper Scissors</h1>\r\n            <div className=\"typeWrapper\">\r\n                <div className='type'>\r\n                    <h2 className='typeHeader'>My Games</h2>\r\n                    <h2 className='gamesCounter'>{userGames.length}</h2>\r\n                </div>\r\n                {user ? <button className='createGameB' onClick={() => setCreateGameModalOpen(true)}>NEW GAME +</button> : null}\r\n            </div>\r\n            {userGames.length > 0 ? <div className='box games'>\r\n                {userGames.map(game => {\r\n                    return activeStatuses.includes(game.status) ? (\r\n                        <GameBox key={game._id} game={game} removeGame={removeGame} />\r\n                    ) : null\r\n                })}\r\n            </div> : <div className='box typePlaceHolder'><p>Your games will appear here</p></div>}\r\n            <div className='type'>\r\n                <h2 className='typeHeader'>Open Games</h2>\r\n                <h2 className='gamesCounter'>{openGames.length}</h2>\r\n            </div>\r\n            {openGames.length > 0 ? <div className='box games'>\r\n                {openGames.map(game => {\r\n                    return activeStatuses.includes(game.status) ? (\r\n                        <GameBox key={game._id} game={game} removeGame={removeGame} />\r\n                    ) : null\r\n                })}\r\n            </div> : <div className='box typePlaceHolder'><p>No open games at the moment</p></div>}\r\n            <div className='modal' style={{ display: createGameModalOpen ? 'flex' : 'none' }}>\r\n                <div className='container'>\r\n                    <div className='wrapper'>\r\n                        <button className='closeB' onClick={() => setCreateGameModalOpen(false)}><svg width=\"14\" height=\"14\"><path d=\"M14 12.461 8.3 6.772l5.234-5.233L12.006 0 6.772 5.234 1.54 0 0 1.539l5.234 5.233L0 12.006l1.539 1.528L6.772 8.3l5.69 5.7L14 12.461z\"></path></svg></button>\r\n                        <h1 className='title'>Create Game</h1>\r\n                        <h3 className='subtitle'>Choose Move</h3>\r\n                        <div className='coinChooser'>\r\n                            <Svg onClick={() => setMove(0)} className={move === 0 ? 'chosen flip' : 'flip'} src='./img/move0.svg' />\r\n                            <Svg onClick={() => setMove(1)} className={move === 1 ? 'chosen flip' : 'flip'} src='./img/move1.svg' />\r\n                            <Svg onClick={() => setMove(2)} className={move === 2 ? 'chosen flip' : 'flip'} src='./img/move2.svg' />\r\n                        </div>\r\n                        <h3 className='subtitle'>Choose Amount</h3>\r\n                        <div className='amounts'>\r\n                            {amountOptions.map(amount =>\r\n                                <div className={gameAmount === amount ? 'amountChosen' : 'amount'} onClick={() => setGameAmount(amount)}>{amount}</div>\r\n                            )}\r\n                        </div>\r\n                        <button className='actionB modalB' disabled={creatingGame} onClick={() => createGame()}>{creatingGame ? 'Creating...' : 'Create'} {creatingGame ? <ClipLoader size={13} color='#27244f' /> : null}</button>\r\n\r\n                    </div>\r\n                </div>\r\n                <div className='overlay'></div>\r\n            </div>\r\n        </div >\r\n    );\r\n}\r\n\r\nexport default ActiveGames;\r\n","import React, { useState } from 'react';\r\n\r\nimport { LAMPORTS_PER_SOL } from '@solana/web3.js'\r\nimport Svg from 'react-inlinesvg'\r\n\r\nimport '../css/UserGames.css'\r\nimport '../css/Coin.css'\r\nimport '../css/Modal.css'\r\nimport User from '../interfaces/User';\r\nimport Game from '../interfaces/Game';\r\nimport moment from 'moment'\r\nimport { Link } from 'react-router-dom';\r\nimport { displayName } from '../utils/displayName';\r\nimport { shortenAddress } from '../utils/shortenAddress';\r\n\r\ninterface Props {\r\n    games: Game[],\r\n    user: User\r\n}\r\n\r\n\r\nfunction UserGames(props: Props) {\r\n    const calculateWinAmount = (amount: number, fee: number) => Math.round(amount * 2 * ((100 - fee) / 100)) / LAMPORTS_PER_SOL\r\n\r\n    return (\r\n        <>\r\n            <table className='UserGames'>\r\n                <thead>\r\n                    <tr>\r\n                        <th>Date</th>\r\n                        <th>Bet</th>\r\n                        <th>Move</th>\r\n                        <th>Opponent</th>\r\n                        <th>Opponent Move</th>\r\n                        <th>Win Amount</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    {\r\n                        props.games.map((game, index) => {\r\n                            if (game.status !== 'ended' || !game.opponent) return\r\n\r\n                            const move = game.creator._id === props.user._id ? game.creatorMove : game.opponentMove\r\n                            const opponent = game.creator._id === props.user._id ? game.opponent : game.creator\r\n                            const opponentMove = game.creator._id === props.user._id ? game.opponentMove : game.creatorMove\r\n                            const winAmount = game.winner ? game.winner._id === props.user._id ? game.amount * 2 / LAMPORTS_PER_SOL : -game.amount / LAMPORTS_PER_SOL : 0\r\n\r\n                            return <tr key={index} className='game' >\r\n                                <td className='date'>{moment(game.updatedAt).format('MMM DD, h:mm A')}</td>\r\n                                <td>{game.amount / LAMPORTS_PER_SOL} SOL</td>\r\n                                <td className='move flip'><Svg src={`/img/move${move}.svg`} /></td>\r\n                                <td><Link className='profileLink' to={`/u/${opponent.publicKey}`}>{shortenAddress(opponent?.publicKey)}</Link></td>\r\n                                <td className='move'><Svg src={`/img/move${opponentMove}.svg`} /></td>\r\n                                <td><span className={winAmount === 0 ? '' : winAmount > 0 ? 'win' : 'lose'}>{winAmount} SOL</span></td>\r\n                            </tr>\r\n                        }\r\n                        )\r\n                    }\r\n                </tbody>\r\n            </table>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default UserGames;","import React, { useEffect, useState } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\n\r\nimport axios from 'axios';\r\n\r\nimport Svg from 'react-inlinesvg'\r\n\r\nimport '../css/Profile.css'\r\nimport '../css/Coin.css'\r\nimport '../css/Modal.css'\r\nimport User from '../interfaces/User';\r\nimport Game from '../interfaces/Game';\r\nimport UserGames from './UserGames';\r\n\r\nfunction Profile() {\r\n    const { publicKey } = useParams()\r\n    const [user, setUser] = useState<User>()\r\n    const [games, setGames] = useState<Game[]>([])\r\n    const [notFound, setNotFound] = useState(false)\r\n    const [gamesWon, setGamesWon] = useState(0)\r\n    const [gamesLost, setGamesLost] = useState(0)\r\n\r\n    const getUser = async (publicKey: string) => {\r\n        const [responseUser, responseGame] = await Promise.all([axios.get(`/api/u/${publicKey}`), axios.get(`/api/game/u/${publicKey}`)])\r\n        const [user, games] = [responseUser.data, responseGame.data]\r\n\r\n        if (!user) setNotFound(true)\r\n\r\n        setUser(user)\r\n        setGames(games)\r\n    }\r\n\r\n    useEffect(() => {\r\n        setUser(undefined)\r\n        if (!publicKey) return\r\n\r\n        getUser(publicKey)\r\n    }, [publicKey])\r\n\r\n    useEffect(() => {\r\n        if (!games || !user) return\r\n\r\n        let gamesWon = 0\r\n        let gamesLost = 0\r\n        games.forEach(game => {\r\n            if (game.status !== 'ended' || !game.winner) return\r\n\r\n            if (game.winner._id === user._id) {\r\n                gamesWon++\r\n            } else {\r\n                gamesLost++\r\n            }\r\n        })\r\n\r\n        setGamesWon(gamesWon)\r\n        setGamesLost(gamesLost)\r\n    }, [user, games])\r\n\r\n    return (\r\n        <div className='Page Profile'>\r\n            {user ? <><div className='box profileBox'>\r\n                <img className='avatar' src='/img/masterchip.png' />\r\n                <div className='rightInfo'>\r\n                    <div className='address'>\r\n                        <h2 className='publicKey'>{user.publicKey}</h2>\r\n                        {/* <a className='scanLink' target=\"_blank\" rel=\"noopener noreferrer\" href={`https://solscan.io/account/${user.publicKey.toString()}`}><img src='/img/solscan.png' /></a> */}\r\n                    </div>\r\n                    <div className='gameStats'>\r\n                        <div className='gameStat'>\r\n                            <h2 className='counter'>{gamesWon}</h2>\r\n                            <h2 className='tag'>Won</h2>\r\n                        </div>\r\n                        <div className='statSeparator'>\r\n                            /\r\n                        </div>\r\n                        <div className='gameStat'>\r\n                            <h2 className='counter'>{gamesLost}</h2>\r\n                            <h2 className='tag'>Lost</h2>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n                <UserGames user={user} games={games} /></>\r\n                : !notFound ? <h1>Loading user...</h1> : <h1>User was not found</h1>}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Profile;","import { useEffect } from \"react\";\r\nimport { useLocation } from \"react-router-dom\";\r\n\r\nfunction ScrollToTop() {\r\n    const { pathname } = useLocation();\r\n\r\n    useEffect(() => {\r\n        window.scrollTo(0, 0);\r\n    }, [pathname]);\r\n\r\n    return null;\r\n}\r\n\r\nexport default ScrollToTop","import React, { useEffect, useState } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\n\r\nimport axios from 'axios';\r\n\r\nimport Svg from 'react-inlinesvg'\r\n\r\nimport '../css/Profile.css'\r\nimport '../css/Coin.css'\r\nimport '../css/Modal.css'\r\nimport User from '../interfaces/User';\r\nimport Game from '../interfaces/Game';\r\nimport { createAvatar } from '@dicebear/avatars'\r\nimport * as avatarStyle from '@dicebear/adventurer';\r\nimport UserGames from './UserGames';\r\nimport { toast } from 'react-toastify';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { CombinedReducer } from '../store';\r\n\r\nfunction MyProfile() {\r\n    const [games, setGames] = useState<Game[]>([])\r\n    const [gamesWon, setGamesWon] = useState(0)\r\n    const [gamesLost, setGamesLost] = useState(0)\r\n    const [user, setUser] = useState<User>()\r\n    const [editData, setEditData] = useState({\r\n        username: ''\r\n    })\r\n    const [editUserModalOpen, setEditUserModalOpen] = useState(false)\r\n    const dispatch = useDispatch()\r\n\r\n    const publicKey = useSelector<CombinedReducer, string>((state) => state.user?.publicKey)\r\n\r\n    const editUser = async () => {\r\n        try {\r\n            const newUser = (await axios.post(`/api/u/editUser`, editData)).data\r\n            console.log({ newUser })\r\n\r\n            setUser(user => newUser)\r\n            dispatch({ type: 'LOAD_USER', payload: user })\r\n\r\n            toast.success('Profile has been updated')\r\n        } catch (e: any) {\r\n            toast.error(e.response.data.message.toString())\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (!publicKey) return\r\n\r\n        const getGames = async () => {\r\n            const user: User = (await axios.get(`/api/u/${publicKey}`)).data\r\n            const games: Game[] = (await axios.get(`/api/game/u/${publicKey}`)).data\r\n\r\n            setEditData({\r\n                username: user.username || ''\r\n            })\r\n            setUser(user)\r\n            setGames(games)\r\n        }\r\n\r\n        getGames()\r\n    }, [publicKey])\r\n\r\n    useEffect(() => {\r\n        if (!games || !user) return\r\n\r\n        let gamesWon = 0\r\n        let gamesLost = 0\r\n        games.forEach(game => {\r\n            if (game.status !== 'ended' || !game.winner) return\r\n\r\n            if (game.winner._id === user._id) {\r\n                gamesWon++\r\n            } else {\r\n                gamesLost++\r\n            }\r\n        })\r\n\r\n        setGamesWon(gamesWon)\r\n        setGamesLost(gamesLost)\r\n    }, [user, games])\r\n\r\n    return (\r\n        <>\r\n            {user ?\r\n                <div className='Page Profile'>\r\n                    <div className='profileBox'>\r\n                        <div className='leftInfo'>\r\n                            <Svg className='avatar' src={createAvatar(avatarStyle, { seed: user.publicKey.toString() })} />\r\n                            <button onClick={() => setEditUserModalOpen(true)} className='editB'>Edit Profile</button>\r\n                        </div>\r\n                        <div className='rightInfo'>\r\n                            {user.username ? <div className='username'>\r\n                                <h1 className='value'>{user.username}</h1>\r\n                            </div> : null}\r\n                            <div className='address'>\r\n                                <h2 className='value'>{user.publicKey}</h2>\r\n                                <a className='scanLink' target=\"_blank\" rel=\"noopener noreferrer\" href={`https://solscan.io/account/${user.publicKey.toString()}`}><img src='/img/solscan.png' /></a>\r\n                            </div>\r\n                            <div className='gameStats'>\r\n                                <div className='gameStat'>\r\n                                    <h2>Games Won:</h2>\r\n                                    <h2>{gamesWon}</h2>\r\n                                </div>\r\n                                <div className='statCircle' style={{\r\n                                    backgroundImage: games.length > 0 ? `linear-gradient(#1C1D25, #1C1D25), linear-gradient( 45deg, rgba(37, 185, 0, 0.85), rgba(37, 185, 0, 0.85) ${gamesWon / (gamesWon + gamesLost) * 100}%, rgba(185, 37, 0, 0.85) ${gamesLost / (gamesWon + gamesLost) * 100}% )` : `linear-gradient(#1c1d25, #1c1d25), linear-gradient( 45deg, gray, gray 100% )`\r\n                                }}>\r\n                                </div>\r\n                                <div className='gameStat'>\r\n                                    <h2>Games Lost:</h2>\r\n                                    <h2>{gamesLost}</h2>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    {games.length > 0\r\n                        ? <UserGames user={user} games={games} />\r\n                        :\r\n                        null}\r\n                </div>\r\n                : null\r\n            }\r\n            <div className='modal' style={{ display: editUserModalOpen ? 'flex' : 'none' }}>\r\n                <div className='container'>\r\n                    <div className='wrapper'>\r\n                        <button className='closeB' onClick={() => setEditUserModalOpen(false)}><svg width=\"14\" height=\"14\"><path d=\"M14 12.461 8.3 6.772l5.234-5.233L12.006 0 6.772 5.234 1.54 0 0 1.539l5.234 5.233L0 12.006l1.539 1.528L6.772 8.3l5.69 5.7L14 12.461z\"></path></svg></button>\r\n                        <div className='logo'>\r\n                            <img alt='logo' src='/logo.png' />\r\n                        </div>\r\n                        <h1 className='title'>Edit Profile</h1>\r\n                        <div className='fields'>\r\n                            <input value={editData.username} onInput={(event) => setEditData(data => { return { ...data, username: (event.target as HTMLInputElement).value } })} placeholder='username' />\r\n                        </div>\r\n                        <button onClick={() => editUser()} className='modalB'>Save</button>\r\n                    </div>\r\n                </div>\r\n                <div className='overlay'></div>\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default MyProfile;","import React, { useEffect, useState } from 'react';\r\n\r\nimport axios from 'axios';\r\n\r\nimport TextareaAutosize from 'react-textarea-autosize';\r\n\r\nimport { useDispatch, useSelector } from 'react-redux';\r\n\r\nimport Countdown from 'react-countdown';\r\nimport Svg from 'react-inlinesvg'\r\n\r\nimport '../css/Chat.css'\r\nimport User from '../interfaces/User';\r\nimport { CombinedReducer } from '../store';\r\nimport { createAvatar } from '@dicebear/avatars'\r\nimport * as avatarStyle from '@dicebear/adventurer';\r\nimport { toast } from 'react-toastify';\r\nimport { Sockets } from '../reducers/sockets';\r\nimport { Link } from 'react-router-dom';\r\nimport Message from '../interfaces/Message';\r\nimport { useRef } from 'react';\r\nimport { displayName } from '../utils/displayName';\r\n\r\nfunction Chat() {\r\n    const messagesRef = useRef<null | HTMLDivElement>(null)\r\n\r\n    const [message, setMessage] = useState('')\r\n    const [messages, setMessages] = useState<Message[]>([])\r\n\r\n    const dispatch = useDispatch()\r\n    const user = useSelector<CombinedReducer, User>((state) => state.user)\r\n    const sockets = useSelector<CombinedReducer, Sockets>((state) => state.sockets)\r\n\r\n    const sendMessage = async () => {\r\n        if (message.length === 0) return toast.error('Message can not be empty')\r\n\r\n        try {\r\n            await axios.post('/api/message', { content: message })\r\n            dispatch({ type: 'UPDATE_USER_LAST_MESSAGE_AT' })\r\n        } catch (e: any) {\r\n            toast.error(e.response.data.message.toString())\r\n        }\r\n\r\n        setMessage('')\r\n    }\r\n\r\n    const scrollMessagesToBottom = () => {\r\n        if (!messagesRef.current) return\r\n\r\n        messagesRef.current.scrollTop = messagesRef.current.scrollHeight\r\n    }\r\n\r\n    const inputMessage = (content: string) => {\r\n        const contentWords = content.split(\" \").map(c => c.trim())\r\n\r\n        setMessage(contentWords.join(\" \"))\r\n    }\r\n\r\n\r\n    useEffect(() => {\r\n        const getLast = async () => {\r\n            const messages = (await axios.get('/api/message/last')).data\r\n            console.log({ messages })\r\n\r\n            setMessages(messages)\r\n        }\r\n\r\n        getLast()\r\n        scrollMessagesToBottom()\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        scrollMessagesToBottom()\r\n    }, [messages])\r\n\r\n\r\n\r\n    useEffect(() => {\r\n        if (!sockets.message) return\r\n\r\n        sockets.message.on('newMessage', (message: Message) => {\r\n            setMessages(old => [message, ...old])\r\n        })\r\n    }, [sockets])\r\n\r\n\r\n    return (\r\n        <div className='Chat box'>\r\n            <div className='chat'>\r\n                <h2 className='chatHeader'>Live Chat</h2>\r\n                <div ref={messagesRef} className='messages'>\r\n                    {messages.map(message =>\r\n                        <div key={message._id} className='message'>\r\n                            <div className='sender'>\r\n                                <img className='avatar' src='/img/masterchip.png' />\r\n                                <Link to={`/u/${message.creator.publicKey}`} className='address profileLink'>{displayName(message.creator)}</Link>\r\n                            </div>\r\n                            <div className='content'>\r\n                                <p className='text'>{message.content}</p>\r\n                            </div>\r\n                        </div>\r\n                    ).reverse()}\r\n                </div>\r\n                <div className='inputMessage'>\r\n                    {user\r\n                        ? Date.now() - user.lastMessageAt > 3000 ?\r\n                            <>\r\n                                <TextareaAutosize onChange={(event) => inputMessage((event.target as HTMLTextAreaElement).value)} onKeyPress={(event) => event.key === 'Enter' ? sendMessage() : null} value={message} placeholder='Type Message...' />\r\n                                <button onClick={() => sendMessage()} className='sendMsgB'><Svg src='/img/send.svg' /></button>\r\n                            </>\r\n                            : <>\r\n                                <TextareaAutosize onChange={(event) => inputMessage((event.target as HTMLTextAreaElement).value)} onKeyPress={(event) => event.key === 'Enter' && Date.now() - user.lastMessageAt > 3000 ? sendMessage() : null} value={message} placeholder='Type Message...' />\r\n                                <Countdown date={user.lastMessageAt + 3000} intervalDelay={0}\r\n                                    precision={1}\r\n                                    renderer={time => (\r\n                                        time.seconds + time.milliseconds > 0 ? <button className='sendMsgB'>{time.seconds}.{time.milliseconds / 100}</button> : <button onClick={() => sendMessage()} className='sendMsgB'><Svg src='/img/send.svg' /></button>\r\n                                    )} />\r\n                            </>\r\n                        : <h4>You have to Log In</h4>}\r\n\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Chat;","import React from 'react';\r\nimport Chat from './Chat';\r\n\r\nimport '../css/LeftSide.css'\r\nimport Socials from './Socials';\r\n\r\nfunction LeftSide() {\r\n\r\n\r\n    return (\r\n        <div className='LeftSide'>\r\n            <Chat />\r\n            <Socials />\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default LeftSide;","import React, { useState } from 'react';\r\n\r\n\r\nimport { LAMPORTS_PER_SOL, } from '@solana/web3.js'\r\nimport { shortenAddress } from '../utils/shortenAddress';\r\nimport Svg from 'react-inlinesvg'\r\n\r\nimport '../css/ActiveGames.css'\r\nimport '../css/Coin.css'\r\nimport '../css/Modal.css'\r\nimport Game from '../interfaces/Game';\r\nimport { Link } from 'react-router-dom';\r\nimport moment from 'moment'\r\nimport '../css/RecentGames.css'\r\nimport { displayName } from '../utils/displayName';\r\nimport { useSelector } from 'react-redux';\r\nimport { CombinedReducer } from '../store';\r\nimport axios from 'axios';\r\nimport { useEffect } from 'react';\r\n\r\ninterface Props {\r\n    games: Game[]\r\n}\r\n\r\nfunction RecentGames() {\r\n    const [recentGames, setRecentGames] = useState<Game[]>([])\r\n    const games = useSelector<CombinedReducer, Game[]>((state) => state.games)\r\n\r\n    const loadRecentGames = async () => {\r\n        const recentGames = (await axios.get('/api/game/recentGames')).data\r\n        setRecentGames(recentGames)\r\n    }\r\n\r\n    useEffect(() => {\r\n        loadRecentGames()\r\n    }, [])\r\n\r\n    return (\r\n        <div className='recentGamesWrapper box'>\r\n            <h2 className='recentGamesHeader'>Recent Plays</h2>\r\n            <div className='recentGames'>\r\n                {games.map(game => {\r\n                    if (game.status !== 'removed' || !game.opponent) return\r\n\r\n                    if (game.winner) {\r\n                        const loser = game.creator._id === game.winner._id ? game.opponent : game.creator\r\n                        return <div className='recentGame'>\r\n                            <Link className='profileLink' to={`/u/${game.winner.publicKey}`}>{shortenAddress(game.winner.publicKey)}</Link> just won <span>{game.amount * 2 / LAMPORTS_PER_SOL}</span> SOL against <Link className='profileLink' to={`/u/${loser.publicKey}`}>{shortenAddress(loser.publicKey)}</Link>\r\n                        </div>\r\n                    } else {\r\n                        return <div className='recentGame'>\r\n                            <Link className='profileLink' to={`/u/${game.creator.publicKey}`}>{shortenAddress(game.creator.publicKey)}</Link> had a draw with <Link className='profileLink' to={`/u/${game.opponent.publicKey}`}>{shortenAddress(game.opponent.publicKey)}</Link>\r\n                        </div>\r\n                    }\r\n                })}\r\n                {recentGames.map(game => {\r\n                    if (!game.opponent) return\r\n\r\n                    if (game.winner) {\r\n                        const loser = game.creator._id === game.winner._id ? game.opponent : game.creator\r\n                        return <div className='recentGame'>\r\n                            <Link className='profileLink' to={`/u/${game.winner.publicKey}`}>{shortenAddress(game.winner.publicKey)}</Link> just won <span>{game.amount * 2 / LAMPORTS_PER_SOL}</span> SOL against <Link className='profileLink' to={`/u/${loser.publicKey}`}>{shortenAddress(loser.publicKey)}</Link>\r\n                        </div>\r\n                    } else {\r\n                        return <div className='recentGame'>\r\n                            <Link className='profileLink' to={`/u/${game.creator.publicKey}`}>{shortenAddress(game.creator.publicKey)}</Link> had a draw with <Link className='profileLink' to={`/u/${game.opponent.publicKey}`}>{shortenAddress(game.opponent.publicKey)}</Link>\r\n                        </div>\r\n                    }\r\n                })}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default RecentGames;","import React from 'react';\r\nimport '../css/RightSide.css'\r\nimport RecentGames from './RecentGames';\r\n\r\nfunction RightSide() {\r\n\r\n\r\n    return (\r\n        <div className='RightSide'>\r\n            <RecentGames />\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default RightSide;","import React, { useEffect, useMemo } from 'react';\n\n// import Navbar from './components/Navbar'\n// import ActiveGames from './components/ActiveGames'\n\nimport { ConnectionProvider, WalletProvider } from '@solana/wallet-adapter-react';\nimport { WalletAdapterNetwork } from '@solana/wallet-adapter-base';\nimport {\n  getPhantomWallet,\n  getSlopeWallet,\n  getSolflareWallet,\n} from '@solana/wallet-adapter-wallets';\nimport {\n  WalletModalProvider,\n  WalletMultiButton\n} from '@solana/wallet-adapter-react-ui';\nimport { clusterApiUrl } from '@solana/web3.js';\nimport '@solana/wallet-adapter-react-ui/styles.css'\nimport { io } from \"socket.io-client\"\nimport { ToastContainer, toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\n\nimport './css/wallet.css'\nimport Navbar from './components/Navbar';\nimport ActiveGames from './components/ActiveGames';\nimport { useDispatch } from 'react-redux';\nimport { BrowserRouter, Route, Routes, Navigate } from 'react-router-dom';\nimport Profile from './components/Profile';\nimport ScrollToTop from './ScrollToTop';\nimport MyProfile from './components/MyProfile';\nimport LeftSide from './components/LeftSide';\nimport RightSide from './components/RightSide';\n\nimport Svg from 'react-inlinesvg'\n\nconst network = WalletAdapterNetwork.Testnet\n\nfunction App() {\n\n  const endpoint = useMemo(() => clusterApiUrl(network), [network]);\n  const wallets = useMemo(() => [\n    getPhantomWallet(),\n    getSlopeWallet(),\n    getSolflareWallet()\n  ], [network])\n\n  const dispatch = useDispatch()\n\n  window.addEventListener('load', function () {\n    //@ts-ignore\n    if (window.solana) {\n      //@ts-ignore\n      window.solana.on('accountChanged', function () {\n        console.log('account has been changed')\n      })\n    }\n  })\n\n  useEffect(() => {\n    const gameSocket = io(\"/game\")\n    const userSocket = io(\"/user\")\n    const messageSocket = io(\"/message\")\n\n    dispatch({ type: 'LOAD_GAME_SOCKET', payload: gameSocket })\n    dispatch({ type: 'LOAD_USER_SOCKET', payload: userSocket })\n    dispatch({ type: 'LOAD_MESSAGE_SOCKET', payload: messageSocket })\n  }, [])\n\n  return (\n    <div className=\"App\">\n      <Svg className=\"neoneffect\" src=\"/img/neoneffect.svg\" />\n      <Svg className=\"neoneffect effectbottom\" src=\"/img/neoneffect.svg\" />\n      <ConnectionProvider endpoint={endpoint}>\n        <WalletProvider wallets={wallets} autoConnect>\n          <WalletModalProvider>\n            <BrowserRouter>\n              <Navbar />\n              <ScrollToTop />\n              <div className='Body'>\n                <LeftSide />\n                <Routes>\n                  <Route path='/' element={<Navigate to=\"/rps\" />} />\n                  <Route path='/rps' element={<ActiveGames />} />\n                  <Route path='/me' element={<MyProfile />} />\n                  <Route path='/u/:publicKey' element={<Profile />} />\n                </Routes>\n                <RightSide />\n              </div>\n            </BrowserRouter>\n          </WalletModalProvider>\n          <ToastContainer autoClose={1500} />\n        </WalletProvider>\n      </ConnectionProvider>\n    </div>\n  );\n}\n\nexport default App;\n","import User from '../interfaces/User'\r\n\r\nenum UserActions {\r\n    LOAD_USER = 'LOAD_USER',\r\n    UPDATE_USER_BALANCE = 'UPDATE_USER_BALANCE',\r\n    UPDATE_USER_LAST_MESSAGE_AT = 'UPDATE_USER_LAST_MESSAGE_AT'\r\n}\r\n\r\ninterface LoadUserAction {\r\n    type: UserActions.LOAD_USER,\r\n    payload: User\r\n}\r\n\r\ninterface UpdateBalanceAction {\r\n    type: UserActions.UPDATE_USER_BALANCE,\r\n    payload: number\r\n}\r\n\r\ninterface UpdateUserLastMessageAt {\r\n    type: UserActions.UPDATE_USER_LAST_MESSAGE_AT,\r\n    payload: number\r\n}\r\n\r\n\r\ntype UserAction = LoadUserAction | UpdateBalanceAction | UpdateUserLastMessageAt\r\n\r\nexport default (state: User | null = null, action: UserAction): User | null => {\r\n\r\n    switch (action.type) {\r\n        case UserActions.LOAD_USER: {\r\n            return action.payload\r\n        }\r\n        case UserActions.UPDATE_USER_BALANCE: {\r\n            return state && { ...state, balance: state.balance + action.payload }\r\n        }\r\n        case UserActions.UPDATE_USER_LAST_MESSAGE_AT: {\r\n            return state && { ...state, lastMessageAt: Date.now() }\r\n        }\r\n        default:\r\n            return state\r\n    }\r\n}","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import Game from \"../interfaces/Game\"\r\n\r\n\r\nenum GamesActions {\r\n    LOAD_GAMES = 'LOAD_GAMES',\r\n    ADD_GAME = 'ADD_GAME',\r\n    UPDATE_GAME = 'UPDATE_GAME'\r\n}\r\n\r\ninterface LoadGamesAction {\r\n    type: GamesActions.LOAD_GAMES,\r\n    payload: Game[]\r\n}\r\n\r\ninterface AddGameAction {\r\n    type: GamesActions.ADD_GAME,\r\n    payload: Game\r\n}\r\n\r\ninterface UpdateGameAction {\r\n    type: GamesActions.UPDATE_GAME,\r\n    payload: Game\r\n}\r\n\r\n\r\ntype GameAction = LoadGamesAction | AddGameAction | UpdateGameAction\r\n\r\nexport default (state: Game[] = [], action: GameAction): Game[] | Game => {\r\n\r\n    switch (action.type) {\r\n        case GamesActions.LOAD_GAMES: {\r\n            return action.payload\r\n        }\r\n        case GamesActions.ADD_GAME: {\r\n            if (state.find(game => game._id === action.payload._id)) return state\r\n\r\n            return [...state, action.payload]\r\n        }\r\n        case GamesActions.UPDATE_GAME: {\r\n            return state.map(game => {\r\n                if (game._id === action.payload._id) {\r\n                    if (action.payload.status === 'ended') {\r\n                        action.payload.status = 'countdown'\r\n                        action.payload.countDownEnd = Date.now() + 3000\r\n                    }\r\n                    return action.payload\r\n                }\r\n                return game\r\n            })\r\n        }\r\n        default:\r\n            return state\r\n    }\r\n}","import { WalletContextState } from \"@solana/wallet-adapter-react\"\r\n\r\nenum WalletActions {\r\n    LOAD_WALLET = 'LOAD_WALLET'\r\n}\r\n\r\ninterface LoadWalletAction {\r\n    type: WalletActions.LOAD_WALLET,\r\n    payload: WalletContextState\r\n}\r\n\r\ntype WalletAction = LoadWalletAction\r\n\r\n\r\n\r\nexport default (state: WalletContextState | null = null, action: WalletAction): WalletContextState | null => {\r\n    switch (action.type) {\r\n        case WalletActions.LOAD_WALLET: {\r\n            return action.payload\r\n        }\r\n        default:\r\n            return state\r\n    }\r\n}","import { Socket } from \"socket.io-client\"\r\n\r\nenum SocketsActions {\r\n    LOAD_GAME_SOCKET = 'LOAD_GAME_SOCKET',\r\n    LOAD_USER_SOCKET = 'LOAD_USER_SOCKET',\r\n    LOAD_MESSAGE_SOCKET = 'LOAD_MESSAGE_SOCKET'\r\n}\r\n\r\ninterface LoadGameSocketAction {\r\n    type: SocketsActions.LOAD_GAME_SOCKET,\r\n    payload: Socket\r\n}\r\n\r\ninterface LoadUserSocketAction {\r\n    type: SocketsActions.LOAD_USER_SOCKET,\r\n    payload: Socket\r\n}\r\n\r\ninterface LoadMessageSocketAction {\r\n    type: SocketsActions.LOAD_MESSAGE_SOCKET,\r\n    payload: Socket\r\n}\r\n\r\ntype SocketsAction = LoadGameSocketAction | LoadUserSocketAction | LoadMessageSocketAction\r\nexport type Sockets = { 'user'?: Socket, 'game'?: Socket, 'message'?: Socket }\r\n\r\nconst defaultSockets = { 'user': undefined, 'game': undefined, 'message': undefined }\r\n\r\nexport default (state: Sockets = defaultSockets, action: SocketsAction): Sockets => {\r\n    switch (action.type) {\r\n        case SocketsActions.LOAD_GAME_SOCKET: {\r\n            return { ...state, 'game': action.payload }\r\n        }\r\n        case SocketsActions.LOAD_USER_SOCKET: {\r\n            return { ...state, 'user': action.payload }\r\n        }\r\n        case SocketsActions.LOAD_MESSAGE_SOCKET: {\r\n            return { ...state, 'message': action.payload }\r\n        }\r\n        default:\r\n            return state\r\n    }\r\n}","import { WalletContextState } from '@solana/wallet-adapter-react'\r\nimport { combineReducers, createStore } from 'redux'\r\nimport User from './interfaces/User'\r\nimport userReducer from './reducers/user'\r\nimport gamesReducer from './reducers/games'\r\nimport walletReducer from './reducers/wallet'\r\nimport socketsReducer, { Sockets } from './reducers/sockets'\r\nimport Game from './interfaces/Game'\r\n\r\nconst combined = combineReducers({\r\n    user: userReducer,\r\n    wallet: walletReducer,\r\n    games: gamesReducer,\r\n    sockets: socketsReducer\r\n})\r\n\r\nexport interface CombinedReducer {\r\n    user: User,\r\n    wallet: WalletContextState,\r\n    games: Game[],\r\n    sockets: Sockets\r\n}\r\n\r\nexport default createStore(combined)","import React, { StrictMode } from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport { Provider } from 'react-redux';\nimport store from './store'\n\nReactDOM.render(\n  <StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","export const shortenAddress = (publicKey: string): string => {\r\n    return publicKey.slice(0, 5) + '...' + publicKey.slice(-5)\r\n}","import React from 'react';\r\n\r\nimport '../css/Socials.css'\r\nimport Svg from 'react-inlinesvg'\r\n\r\nfunction Socials() {\r\n\r\n    return (\r\n        <div className='Socials' >\r\n            <div className='community'>\r\n                <div className='socialMedia'>\r\n                    <a target='_blank' rel=\"noopener noreferrer\" href='https://discord.gg/pZZWHsRKaJ'><img src='/img/discord.png' /></a>\r\n                </div>\r\n                <div className='socialMedia'>\r\n                    <a target='_blank' rel=\"noopener noreferrer\" href='https://twitter.com/degen_games_sol'><img src='/img/twitter.png' /></a>\r\n                </div>\r\n                <div className='socialMedia'>\r\n                    <a target='_blank' rel=\"noopener noreferrer\" href='https://magiceden.io/marketplace/degengames'><img src='/img/magiceden.png' /></a>\r\n                </div>\r\n            </div>\r\n        </div >\r\n    );\r\n}\r\n\r\nexport default Socials;\r\n"],"sourceRoot":""}